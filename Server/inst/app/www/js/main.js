(()=>{"use strict";var e,t,a,r={7898:(e,t,a)=>{var r=a(3790),n=a(9962),l=a(1134);const i=jQuery;var s=a.n(i),o=a(7493),m=a(5146),c=a(7233),d=a(6317),u=a(4742),g=a(9598),p=a(2555),h=a(9012),A=a(3979),E=a(1626),M=a(3448),y=a(1311),S=a(6423),b=a(6073),f=a(888),I=a(3303);const D=e=>null==e;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},x.apply(null,arguments)}const C=(0,l.PA)((e=>{const{pages:t,activePageId:a,onPageChange:n}=e;return r.createElement("div",{style:{minWidth:"220px",maxWidth:"220px",backgroundColor:"white",padding:"12px 8px 12px 12px"}},r.createElement(M.A,{nonLinear:!0,activeStep:a,orientation:"vertical"},t.map(((e,t)=>{const a={};return D(e.description)||(a.optional=r.createElement(h.A,{width:"150px",textAlign:"left"},r.createElement(p.A,{variant:"caption"},e.description))),r.createElement(y.A,{key:t,completed:e.completed,disabled:e.disabled},r.createElement(S.A,x({onClick:()=>n(t)},a),e.title),e.subPages.length>0&&r.createElement(I.A,null,r.createElement(b.A,null,e.subPages.map(((a,l)=>r.createElement(f.Ay,{button:!0,key:l,selected:l===e.activeSubPageId,disabled:a.disabled,onClick:()=>n(t,l)},a.title))))))}))))}));var v=a(882),P=a(5136),R=a(8853),T=a(5368),N=a(5940);const Y=({progress:e})=>D(e)?null:r.createElement(N.A,{variant:"determinate",value:100*e,color:"secondary",sx:{marginTop:"10px",marginBottom:"10px",height:"5px"}}),w=(0,l.PA)((e=>{const{appMgr:t,open:a,onClose:n}=e,[l,i]=r.useState(null);return r.createElement(v.Ay,{anchor:"right",open:a,onClose:n},r.createElement(h.A,{width:300,p:2},r.createElement(b.A,{dense:!0},r.createElement(P.A,null,r.createElement(p.A,{variant:"button"},"Application")),r.createElement(f.Ay,null,r.createElement(T.A,{color:"primary",size:"small",component:"label",onClick:()=>t.saveState()},"Save state")),r.createElement(f.Ay,null,r.createElement(T.A,{color:"primary",size:"small",component:"label"},"Load state",r.createElement("input",{hidden:!0,type:"file",accept:".rds",onChange:e=>t.loadState(e.target),id:"loadStateBtn"}))),r.createElement(Y,{progress:t.loadStateProgress}),r.createElement(f.Ay,null,r.createElement(T.A,{color:"primary",size:"small",component:"a",href:"./",target:"_blank"},"Open another instance"))),r.createElement(P.A,null,r.createElement(p.A,{variant:"button"},"Documentation")),r.createElement(f.Ay,null,r.createElement(T.A,{color:"primary",size:"small",component:"a",href:"./www/docs/HIVPlatform_3.0_manual.pdf",target:"_blank"},"Open manual pdf")),r.createElement(P.A,null,r.createElement(p.A,{variant:"button"},"Options")),r.createElement(f.Ay,null,r.createElement(R.A,{label:"Seed value",helperText:"Leave empty value to enable random seed",type:"number",fullWidth:!0,defaultValue:t.seedText,onChange:e=>i(parseInt(e.target.value))})),r.createElement(f.Ay,null,r.createElement(T.A,{color:"primary",size:"small",onClick:()=>t.btnClicked("seed",l)},"Apply"))))}));var F=a(9),O=a(3603),_=a(4802),k=a(5934),j=a(9367),B=a(776),H=a(4678);const U=e=>{const{title:t,description:a,moreText:n,image:l,onClick:i}=e,[s,o]=r.useState(!1);return r.createElement(O.A,null,r.createElement(_.A,{onClick:i},r.createElement(j.A,{style:{height:300},image:l}),r.createElement(k.A,null,r.createElement(p.A,{gutterBottom:!0,variant:"h5",component:"h2"},t),r.createElement(p.A,{variant:"body2",color:"textSecondary",component:"p"},a))),r.createElement(B.A,{disableSpacing:!0},r.createElement(T.A,{onClick:()=>o(!s),size:"small",color:"primary"},s?"Read less...":"Read more...")),r.createElement(H.A,{in:s,timeout:"auto",unmountOnExit:!0},r.createElement(k.A,null,n)))},L=e=>{const t=e.appMgr,a=()=>t.uiStateMgr.setActivePageId(1),n=r.createElement(r.Fragment,null,r.createElement("p",null,"The ",r.createElement("b",null,"HIV Estimates Accuracy Tool")," is an application that uses statistical methods to calculate adjusted estimates from HIV surveillance data."),r.createElement("p",null,"Missing data are a well-recognised problem within surveillance systems. When values for some variables are missing and cases with missing values are excluded from analysis, it may lead to biased and potentially less precise estimates. Reporting delay, the time from case diagnosis to notification, can lead to problems when analysing the most recent years given that information on certain cases or variables may not have been collected yet due to national reporting process characteristics."),r.createElement("p",null,"With this tool you can correct missing data for the variables age, gender, transmission category and CD4 count. Additionally, the tool allows for correction of delays in reporting. The adjustments may be used separately or in combination."),r.createElement("p",null,"The tool accepts HIV case-based surveillance data and requires a minimum set of variables routinely collected at national public health systems."),r.createElement("p",null,"A complete instruction ",r.createElement("a",{href:"#"},"manual")," will guide you through the tool. The manual can also be consulted to interpret the outputs. The outputs include results in the form of a report containing tables and graphs, and datasets in various file formats, in which the corrections have been incorporated and are ready for further analysis.")),l=r.createElement(r.Fragment,null,r.createElement("p",null,"The ",r.createElement("b",null,"HIV Modelling Tool")," is an application that can estimate How many people are getting infected with HIV, how many are being missed or not being reported and how many should be on treatment."),r.createElement("p",null,"The tool uses CD4 back calculation methods to estimate the number of people living with HIV, including those not yet diagnosed. The tool can also estimate the annual number of new HIV infections, the average time between infection and diagnosis, and the number of undiagnosed people CD4 category."),r.createElement("p",null,"The tool accepts a minimum required set of variables: HIV cases, AIDS cases and HIVAIDS cases and, if available, CD4 count at HIV diagnosis. The tool uses aggregated HIV surveillance data or case-based data. Data adjusted by the Accuracy tool can thereafter be used as input data for this tool. When data on these parameters are provided, the tool also accounts for mortality and migration."),r.createElement("p",null,"A complete instruction manual will guide you through the tool. The ",r.createElement("a",{href:"#"},"manual")," can also be consulted to interpret the outputs and to aid in the selection of some parameters using clear and well instructed examples.")),i=r.createElement(r.Fragment,null,r.createElement("p",null,"The two tools were combined into one flexible tool that manages all inputs, adjustments and outputs in one simple workflow. After uploading HIV cased-based data, the data can be initially adjusted for missing information and/or reporting delay and then automatically used as input data to the modelling tool, where estimates of HIV incidence, prevalence and the undiagnosed number of people living with HIV can be made."));return r.createElement(F.Ay,{container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"baseline"},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{width:"50%",m:"auto",p:5},r.createElement("p",null,"HIV continues to be of significant public health importance in the European Union as well as globally. To evaluate and direct prevention efforts, it is crucial to understand the pattern of new HIV infections, or HIV incidence, among groups most at risk of infection. It is also important to estimate the size of the total population of persons living with HIV, including those that are not yet diagnosed, in order to understand the burden of HIV and the need for antiretroviral treatment and other HIV-related care. Accurate surveillance data are crucial to achieve reliable parameter estimates."),r.createElement("p",null,"The ECDC HIV Modelling Platform provides a set of tools to support users to obtain reliable parameter estimates to appropriately direct and evaluate public health responses."))),r.createElement(F.Ay,{item:!0,xs:3},r.createElement(U,{title:"Accuracy",description:"Adjust case-based data for missing values and reporting delay",moreText:n,image:"www/img/accuracy.png",onClick:a})),r.createElement(F.Ay,{item:!0,xs:3},r.createElement(U,{title:"Modelling",description:"Estimate number of PLHIV and incidence",moreText:l,image:"www/img/modelling.png",onClick:a})),r.createElement(F.Ay,{item:!0,xs:3},r.createElement(U,{title:"All-in-one",description:"Accuracy adjustements and modelling integrated in one tool",moreText:i,image:"www/img/all-in-one.png",onClick:a})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{width:"50%",m:"auto",p:5},r.createElement("p",null,"NOTE: This is the latest version of HIV Platform tool (v3). Previous version (v2) is still available here on ECDC server: ",r.createElement("a",{href:"https://shinyapps.ecdc.europa.eu/shiny/hivPlatform_v2/",target:"_blank"},"https://shinyapps.ecdc.europa.eu/shiny/hivPlatform_v2/")))))};var W=a(9573);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},X.apply(null,arguments)}const G=e=>{const{children:t,...a}=e;return r.createElement(p.A,X({component:"div",role:"tabpanel",style:{flexGrow:1}},a),t)};var V=a(6349),z=a(7099),Q=a(1454),J=a(4126),K=a(3036),q=a(4304),Z=a(4932),ee=a(17);function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},te.apply(null,arguments)}const ae=e=>{const{children:t,...a}=e;return r.createElement(T.A,te({variant:"contained",color:"primary",component:"span",sx:{color:"white"}},a),t)};var re=a(75);function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ne.apply(null,arguments)}const le=e=>{const{valid:t,msg:a,...n}=e;if(D(t))return null;const l=t?"success":"error";return r.createElement(re.A,ne({severity:l},n,{style:{marginTop:10}}),a)},ie=(e,t=2)=>{if(D(e))return"";if(0===e)return"0 Bytes";const a=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]};function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},se.apply(null,arguments)}const oe=e=>r.createElement(K.A,se({sx:{width:142,fontWeight:"bold"}},e)),me=e=>r.createElement(K.A,se({sx:{maxWidth:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},e)),ce=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.summaryPageEnabled,onClick:()=>t.uiStateMgr.setActivePageId(2)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Upload case-based data")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement("input",{style:{display:"none"},id:"caseUploadBtn",className:"uploadBtn",type:"file",accept:".csv, .rds, .txt, .xls, .xlsx, .zip",onChange:e=>t.caseBasedDataMgr.uploadData(e.target)}),r.createElement(V.A,{title:"Select case-based data file",arrow:!0},r.createElement("label",{htmlFor:"caseUploadBtn"},r.createElement(ae,{sx:{marginBottom:"6px",color:"white"}},r.createElement(ee.A,null)," Upload data"))),r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Maximum file size: 100MB",r.createElement("br",null),"Supported files types: rds, txt, csv, xls, xlsx (uncompressed and zip archives)"),r.createElement(Y,{progress:t.caseBasedDataMgr.uploadProgress}),r.createElement(le,{valid:t.caseBasedDataMgr.actionValid,msg:t.caseBasedDataMgr.actionMessage})),r.createElement(F.Ay,{item:!0,xs:10},!t.caseBasedDataMgr.actionValid&&r.createElement(Q.A,{sx:{color:"#eee",fontSize:"600px"}}),t.caseBasedDataMgr.actionValid&&r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Uploaded file details"),r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:6},r.createElement(z.A,null,r.createElement(J.A,null,r.createElement(q.A,null,r.createElement(oe,null,"File name"),r.createElement(me,null,t.caseBasedDataMgr.fileName)),r.createElement(q.A,null,r.createElement(oe,null,"File size"),r.createElement(me,null,ie(t.caseBasedDataMgr.fileSize))),r.createElement(q.A,null,r.createElement(oe,null,"File type"),r.createElement(me,null,t.caseBasedDataMgr.fileType)),r.createElement(q.A,null,r.createElement(oe,null,"Number of records"),r.createElement(me,null,t.caseBasedDataMgr.recordCount))))),r.createElement(F.Ay,{item:!0,xs:6},r.createElement(z.A,null,r.createElement(J.A,null,r.createElement(q.A,{hover:!1},r.createElement(oe,null,"Column names")),r.createElement(q.A,null,r.createElement(me,{sx:{whiteSpace:"normal"}},r.createElement("div",{style:{overflow:"auto",maxHeight:"164px"}},t.caseBasedDataMgr.columnNamesString))))))))))}));var de=a(5162),ue=a(9789),ge=a(214),pe=a(8428),he=a(5924),Ae=a(4409),Ee=a(8757),Me=a(880);function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ye.apply(null,arguments)}const Se=(0,l.PA)((e=>{const{onChange:t,validationFunc:a,helperText:n,...l}=e,[i,s]=r.useState(!1),[o,m]=r.useState(""),c=o||n;return r.createElement(R.A,ye({},l,{error:i,helperText:c,onChange:e=>{const{value:r}=e.target,l=a(r),i=l!==n,o=!i;s(i),m(l),t&&t(r,o)},inputProps:{autoComplete:"new-password",form:{autoComplete:"off"}}}))})),be=(e,t)=>-1!==t.indexOf(e),fe=e=>Array.isArray(e),Ie=e=>fe(e)?e:[e],De=(e,t)=>{t=Ie(t);let a=e.filter(((e,a)=>-1===t.indexOf(a)));return D(a)&&(a=[]),console.log(a),a},xe=(0,l.PA)((e=>{const{i:t,isSelected:a,onSelectClick:n,el:l,appMgr:i}=e,[s,o]=r.useState(""),[m,c]=r.useState([]);r.useEffect((()=>{o(l.GroupedRegionOfOrigin)}),[l.GroupedRegionOfOrigin]),r.useEffect((()=>{c(i.origGroupMgr.usedNames)}),[i.origGroupMgr.usedNames]);const d=i.origGroupMgr.unusedOrigins,u=l.FullRegionOfOrigin.concat(d),g=r.createElement(pe.A,{inputProps:{"aria-labelledby":`labelId${t}`},color:"primary",checked:a,onClick:n}),p=r.createElement(Se,{sx:{width:"100%","& .MuiInputBase-root":{fontSize:"0.75rem"}},helperText:"",value:s,validationFunc:e=>{let a="";return""===(e=e.trim())?a="Name is empty":be(e,De(m,t))&&(a="Name is used"),a},onChange:(e,a)=>{o(e),a&&i.origGroupMgr.setGroupName(t,e)},onInput:e=>{e.target.value=(""+e.target.value).toUpperCase()}}),h=r.createElement(ge.A,{sx:{width:"100%",fontSize:"0.75rem"},value:l.MigrantRegionOfOrigin||"",onChange:e=>{const a=""==e.target.value?null:e.target.value;i.origGroupMgr.setMigrantOrigin(t,a)}},r.createElement(he.A,{value:"",dense:!0}),r.createElement(he.A,{value:"REPCOUNTRY",dense:!0},"REPCOUNTRY"),r.createElement(he.A,{value:"EUROPE-NORTH AMERICA",dense:!0},"EUROPE-NORTH AMERICA"),r.createElement(he.A,{value:"AFRICA",dense:!0},"AFRICA"),r.createElement(he.A,{value:"ASIA",dense:!0},"ASIA"),r.createElement(he.A,{value:"CARIBBEAN-LATIN AMERICA",dense:!0},"CARIBBEAN-LATIN AMERICA"),r.createElement(he.A,{value:"OTHER",dense:!0},"OTHER"),r.createElement(he.A,{value:"UNK",dense:!0},"UNK")),A=r.createElement(ge.A,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(Me.A,{key:e,label:e,sx:{margin:"2px"},color:"info",size:"small"})))),value:l.FullRegionOfOrigin,sx:{width:"100%",fontSize:"0.75rem","&:before":{borderBottom:"0px solid black"}},onChange:e=>i.origGroupMgr.setGroupOrigin(t,e.target.value)},u.map(((e,t)=>r.createElement(he.A,{key:t,value:e,dense:!0},e))));return r.createElement(q.A,{hover:!0,role:"checkbox"},r.createElement(K.A,{padding:"checkbox",sx:{verticalAlign:"top"}},g),r.createElement(K.A,{id:`labelId${t}`,scope:"row",sx:{padding:"4px 20px 6px 0px",verticalAlign:"top"}},p),r.createElement(K.A,{scope:"row",sx:{padding:"4px 4px 6px 0px",verticalAlign:"top"}},h),r.createElement(K.A,{sx:{padding:"0px 4px 0px 16px",verticalAlign:"top",maxWidth:"300px"}},A),r.createElement(K.A,{align:"right",sx:{padding:"4px 16px 0px 16px",verticalAlign:"top"}},l.groupCount))})),Ce=e=>{const{selectedCount:t,onAddClick:a,onDeleteClick:n,addDisabled:l}=e,i=0===t;return r.createElement(g.A,null,r.createElement(p.A,{variant:"subtitle1",component:"div",style:{flex:"1 1 100%"}},t," selected"),r.createElement(T.A,{color:"primary",disabled:i,onClick:n},"Delete"),r.createElement(T.A,{color:"primary",disabled:l,onClick:a},"Add"))},ve=(e,t)=>{t=Ie(t);return e.filter((e=>-1===t.indexOf(e)))},Pe=(0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState([]),l=t.origGroupMgr.distributionArray,i=t.origGroupMgr.groupingsJS,s=e=>t=>{let r=[];r=-1===a.indexOf(e)?r.concat(a,e):ve(a,e),n(r)},o=i.length,m=a.length,c=e=>-1!==a.indexOf(e);return r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,{variant:"overline"},"Distribution of region of origin"),r.createElement(z.A,{size:"small"},r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,null,"FullRegionOfOrigin"),r.createElement(K.A,{align:"right"},"Count"))),r.createElement(J.A,null,l.map(((e,t)=>r.createElement(q.A,{key:t},r.createElement(K.A,null,e.origin),r.createElement(K.A,{align:"right"},e.count))))))),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(p.A,{variant:"overline"},"Migrant variable regrouping"),r.createElement(Ae.A,{sx:{width:"100%",fontSize:"0.75rem"}},r.createElement(ge.A,{value:t.origGroupMgr.preset,onChange:e=>{const a=e.target.value;t.inputValueSet("groupingPresetSelect",a),t.origGroupMgr.setPreset(a)},sx:{width:"100%",fontSize:"0.75rem"}},r.createElement(P.A,null,r.createElement(p.A,{variant:"overline"},"General presets")),r.createElement(he.A,{value:"REPCOUNTRY + UNK + OTHER",dense:!0},"REPCOUNTRY + UNK + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + SUB-SAHARAN AFRICA + OTHER",dense:!0},"REPCOUNTRY + UNK + SUB-SAHARAN AFRICA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + 3 most prevalent regions + OTHER",dense:!0},"REPCOUNTRY + UNK + 3 most prevalent regions + OTHER"),r.createElement(he.A,{value:"Custom",dense:!0},"Custom"),r.createElement(P.A,null,r.createElement(W.A,null)),r.createElement(P.A,null,r.createElement(p.A,{variant:"overline"},"Migrant-module specific presets")),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + AFRICA + ASIA + OTHER",dense:!0},"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + AFRICA + ASIA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-OTHER-NORTH AMERICA + AFRICA + ASIA + OTHER",dense:!0},"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-NORTH AMERICA-OTHER + AFRICA + ASIA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + OTHER",dense:!0},"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + AFRICA + ASIA + CARIBBEAN-LATIN AMERICA + OTHER",dense:!0},"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + AFRICA + ASIA + CARIBBEAN-LATIN AMERICA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-OTHER-NORTH AMERICA + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + OTHER",dense:!0},"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-NORTH AMERICA-OTHER + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-OTHER-NORTH AMERICA + AFRICA + ASIA + CARIBBEAN-LATIN AMERICA + OTHER",dense:!0},"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-NORTH AMERICA-OTHER + AFRICA + ASIA + CARIBBEAN-LATIN AMERICA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + CARIBBEAN-LATIN AMERICA + OTHER",dense:!0},"REPCOUNTRY + UNK + EUROPE-NORTH AMERICA + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + CARIBBEAN-LATIN AMERICA + OTHER"),r.createElement(he.A,{value:"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-OTHER-NORTH AMERICA + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + CARIBBEAN-LATIN AMERICA + OTHER",dense:!0},"REPCOUNTRY + UNK + EASTERN EUROPE + EUROPE-NORTH AMERICA-OTHER + SUB-SAHARAN AFRICA + AFRICA-OTHER + ASIA + CARIBBEAN-LATIN AMERICA + OTHER")),r.createElement(Ee.A,null,"Select regrouping preset")),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{padding:"checkbox"},r.createElement(pe.A,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=i.map(((e,t)=>t));n(e)}else n([])},checked:o>0&&m===o})),r.createElement(K.A,{width:250,sx:{padding:"0px 20px 0px 0px"}},"Grouped Region Of Origin"),r.createElement(K.A,{width:250,padding:"none"},"Region For Migration Module Parameter"),r.createElement(K.A,null,"FullRegionOfOrigin"),r.createElement(K.A,{align:"right",width:"10%"},"Count"))),r.createElement(J.A,null,i.map(((e,a)=>r.createElement(xe,{key:a,i:a,el:e,appMgr:t,isSelected:c(a),onSelectClick:s(a)}))))),r.createElement(Ce,{selectedCount:m,onAddClick:()=>{t.origGroupMgr.addEmptyGrouping()},onDeleteClick:()=>{t.origGroupMgr.removeGroupings(a),n([])}}),r.createElement(re.A,{severity:"info"},'Records with value "UNK" are removed from the dataset processed for migration.',r.createElement("br",null),'Region "CARIBBEAN-LATIN AMERICA" is combined with region "OTHER" for migration module parameter.'),r.createElement(le,{valid:t.origGroupMgr.migrantCompatibleStatus,msg:t.origGroupMgr.migrantCompatibleMessage}))))})),Re=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Migrant variable regrouping")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(ae,{sx:{marginBottom:"6px",color:"white"},onClick:()=>t.origGroupMgr.applyGroupings(),disabled:!t.uiStateMgr.caseBasedOrigGroupingEnabled},r.createElement(de.A,null)," Apply regrouping"),r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Migrant variable can be created by grouping regions.",r.createElement("br",null),"Choose preset or define custom grouping and press 'Apply regrouping' button."),r.createElement(le,{valid:t.origGroupMgr.actionValid,msg:t.origGroupMgr.actionMessage})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Pe,e)))}));var Te=a(749),Ne=a(6669),Ye=a(864);const we=(0,l.PA)((e=>{const{appMgr:t}=e;let a=[];null!==t.caseBasedDataMgr.columnNames&&(a=t.caseBasedDataMgr.columnNames.slice().sort().concat(""));const n=e=>a=>{t.attrMappingMgr.setDefVal(e,a.target.value)},l=t.attrMappingMgr.mapping.map(((e,l)=>{return r.createElement(q.A,{key:l},r.createElement(K.A,null,`${l+1}.`),r.createElement(K.A,null,e.attribute),r.createElement(K.A,{sx:{padding:"4px 16px 0px 16px"}},r.createElement(Te.A,{value:e.origColName||"",onChange:(i=e.attribute,(e,a)=>{t.attrMappingMgr.setOrigCol(i,a)}),options:a,renderInput:e=>r.createElement(R.A,e),sx:{input:{fontSize:"0.75rem"}},autoComplete:!0,autoHighlight:!0,selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,blurOnSelect:!0,clearOnEscape:!0})),r.createElement(K.A,{sx:{padding:"4px 16px 0px 16px"}},r.createElement(Ne.A,{sx:{width:"100%",fontSize:"0.75rem"},onChange:n(e.attribute),disabled:!!e.origColName})),r.createElement(K.A,null,r.createElement(p.A,{variant:"overline"},e.type)));var i}));return r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Attribute mapping")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(ae,{sx:{marginBottom:"6px",color:"white"},onClick:()=>t.attrMappingMgr.applyMapping(),disabled:!t.attrMappingMgr.actionValid},r.createElement(Ye.A,null)," Apply mapping"),r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Input data must mapped to internal attributes.",r.createElement("br",null),"Adjust mapping and press 'Apply mapping' button."),r.createElement(le,{valid:t.attrMappingMgr.actionValid,msg:t.attrMappingMgr.actionMessage})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Attribute mapping"),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{width:"8%"},"Idx"),r.createElement(K.A,{width:"23%"},"Attribute"),r.createElement(K.A,{width:"23%"},"Uploaded data column"),r.createElement(K.A,{width:"23%"},"Override value"),r.createElement(K.A,{width:"23%"},"Type"))),r.createElement(J.A,null,l)),r.createElement(re.A,{severity:"info"},"Date of diagnosis is the date of HIV diagnosis in the reporting country."))))})),Fe=(0,l.PA)((e=>{const{appMgr:t}=e,a=r.createElement(W.A,{light:!0,style:{margin:"30px 0"}});return r.createElement(G,null,r.createElement(ce,e),t.uiStateMgr.caseBasedAttrMappingEnabled&&r.createElement(r.Fragment,null,a,r.createElement(we,e)),t.uiStateMgr.caseBasedOrigGroupingProvisioned&&r.createElement(r.Fragment,null,a,r.createElement(Re,e)))}));var Oe=a(2993);function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_e.apply(null,arguments)}const ke=e=>r.createElement(K.A,_e({sx:{width:142,fontWeight:"bold"}},e)),je=e=>r.createElement(K.A,_e({sx:{maxWidth:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},e)),Be=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.modellingPageEnabled,onClick:()=>t.uiStateMgr.setActivePageId(4)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Upload aggregated data")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement("input",{style:{display:"none"},id:"aggrUploadBtn",className:"uploadBtn",type:"file",accept:".csv, .zip",onChange:e=>t.aggrDataMgr.uploadData(e.target)}),r.createElement(V.A,{title:"Select aggregated data file",arrow:!0},r.createElement("label",{htmlFor:"aggrUploadBtn"},r.createElement(ae,{sx:{marginBottom:"6px",color:"white"}},r.createElement(ee.A,null)," Upload data"))),r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Maximum file size: 100MB",r.createElement("br",null),"Supported files types: csv (zip archives)"),r.createElement(Y,{progress:t.aggrDataMgr.fileUploadProgress}),r.createElement(le,{valid:t.aggrDataMgr.actionValid,msg:t.aggrDataMgr.actionMessage})),r.createElement(F.Ay,{item:!0,xs:10},!t.aggrDataMgr.actionValid&&r.createElement(Oe.A,{sx:{color:"#eee",fontSize:"600px"}}),t.aggrDataMgr.actionValid&&r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Uploaded file details"),r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:6},r.createElement(z.A,null,r.createElement(J.A,null,r.createElement(q.A,null,r.createElement(ke,null,"File name"),r.createElement(je,null,t.aggrDataMgr.fileName)),r.createElement(q.A,null,r.createElement(ke,null,"File size"),r.createElement(je,null,ie(t.aggrDataMgr.fileSize))),r.createElement(q.A,null,r.createElement(ke,null,"File type"),r.createElement(je,null,t.aggrDataMgr.fileType))))),r.createElement(F.Ay,{item:!0,xs:6},r.createElement(z.A,null,r.createElement(J.A,null,r.createElement(q.A,{hover:!1},r.createElement(ke,null,"Data names")),r.createElement(q.A,null,r.createElement(je,{sx:{whiteSpace:"normal"}},r.createElement("div",{style:{overflow:"auto",maxHeight:164}},t.aggrDataMgr.dataNamesString))),r.createElement(q.A,{hover:!1},r.createElement(ke,null,"Population names")),r.createElement(q.A,null,r.createElement(je,{sx:{whiteSpace:"normal"}},r.createElement("div",{style:{overflow:"auto",maxHeight:164}},t.aggrDataMgr.populationNamesString)))))))))))})),He=(0,l.PA)((e=>{const{appMgr:t}=e,a=t.uiStateMgr.activeSubPageId;return r.createElement(r.Fragment,null,0===a&&r.createElement(Fe,e),1===a&&r.createElement(Be,e))}));var Ue=a(6441),Le=a(3083),We=a(6296),Xe=a(1628),Ge=a(5410),Ve=a(971),ze=a(1489),$e=a(9487),Qe=a(6350),Je=a(3170),Ke=a(920),qe=a(2304);Ge.Y([$e.a,Qe.a,Je.a,Ke.a,ze.a,qe.a]);const Ze=(0,l.PA)((e=>{const t=r.useRef(null),{xAxisLabel:a,xCategories:n,maleData:l,femaleData:i}=e,s={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:90,bottom:40,left:60},xAxis:{type:"category",name:a,data:n,nameLocation:"center",nameTextStyle:{padding:[10,0,0,0]},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{type:"value",name:"Count",nameLocation:"center",nameGap:45,splitLine:{show:!1}},series:[{name:"Male",data:l,type:"bar",stack:!0,barCategoryGap:1,color:"#69b023"},{name:"Female",data:i,type:"bar",stack:!0,barCategoryGap:1,color:"#7bbcc0"}],animationEasing:"elasticOut",animationDelayUpdate:e=>5*e,tooltip:{trigger:"axis"},legend:{orient:"vertical",right:0,top:"middle"}};return r.createElement(Xe.A,{echarts:Ve,option:s,style:{height:"200px",width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{},ref:t})})),et=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:2},r.createElement(Le.A,{control:r.createElement(We.A,{checked:t.summaryDataMgr.diagYearPlotData.filter.applyInAdjustments,onChange:e=>t.summaryDataMgr.setDiagYearFilterApply(e.target.checked),color:"primary",size:"small"}),label:"Apply this data selection in adjustments"})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Diagnosis year"),r.createElement("div",{style:{padding:"40px 105px 0 65px"}},r.createElement(Ue.Ay,{min:t.summaryDataMgr.diagYearPlotData.filter.scaleMinYear,max:t.summaryDataMgr.diagYearPlotData.filter.scaleMaxYear,marks:!0,value:[t.summaryDataMgr.diagYearPlotData.filter.valueMinYear,t.summaryDataMgr.diagYearPlotData.filter.valueMaxYear],onChange:(e,a)=>{t.summaryDataMgr.setDiagYearFilterMinYear(a[0]),t.summaryDataMgr.setDiagYearFilterMaxYear(a[1])},valueLabelDisplay:"on",valueLabelFormat:e=>e.toFixed(),"aria-labelledby":"range-slider",getAriaLabel:e=>e.toFixed(),getAriaValueText:e=>e.toFixed(),color:"secondary",sx:{"& *":{fontSize:"9px"}}})),r.createElement(Ze,{xAxisLabel:"Diagnosis year",xCategories:t.summaryDataMgr.diagYearPlotData.chartCategories,maleData:t.summaryDataMgr.diagYearPlotData.chartData[0].data,femaleData:t.summaryDataMgr.diagYearPlotData.chartData[1].data}))))})),tt=e=>4*(e%1+.125).toFixed(3),at=e=>Math.floor(e)+"Q"+tt(e),rt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:2},r.createElement(Le.A,{control:r.createElement(We.A,{value:t.summaryDataMgr.notifQuarterPlotData.filter.applyInAdjustments,onChange:e=>t.summaryDataMgr.setNotifQuarterFilterApply(e.target.checked),color:"primary",size:"small"}),label:"Apply this data selection in adjustments"})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Notification quarter"),r.createElement("div",{style:{padding:"40px 105px 0 65px"}},r.createElement(Ue.Ay,{min:t.summaryDataMgr.notifQuarterPlotData.filter.scaleMinYear,max:t.summaryDataMgr.notifQuarterPlotData.filter.scaleMaxYear,step:null,marks:t.summaryDataMgr.notifQuarterSliderMarks,value:[t.summaryDataMgr.notifQuarterPlotData.filter.valueMinYear,t.summaryDataMgr.notifQuarterPlotData.filter.valueMaxYear],onChange:(e,a)=>{t.summaryDataMgr.setNotifQuarterFilterMinYear(a[0]),t.summaryDataMgr.setNotifQuarterFilterMaxYear(a[1])},valueLabelDisplay:"on",valueLabelFormat:e=>at(e),"aria-labelledby":"range-slider",color:"secondary",sx:{"& *":{fontSize:"9px"}}})),r.createElement(Ze,{xAxisLabel:"Notification quarter",xCategories:t.summaryDataMgr.notifQuarterChartCategories,maleData:t.summaryDataMgr.notifQuarterPlotData.chartData[0].data,femaleData:t.summaryDataMgr.notifQuarterPlotData.chartData[1].data}))))}));var nt=a(8769),lt=a(4838),it=a(8549),st=a(9923),ot=a(6967),mt=a(4198);const ct=(e,t=2)=>{if(D(e))return"";if(isNaN(e))return e;const a=Math.pow(10,t),r=Math.round((e+Number.EPSILON)*a)/a;return Number(r).toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})},dt=(e,t=2)=>`${ct(100*e,t)}%`;Ge.Y([$e.a,Qe.a,Je.a,Ke.a,st.a,ot.a,mt.a,ze.a,it.a,qe.a]);const ut=e=>{const{xCategories:t,data1:a,data2:n,data3:l,options:i}=e,s={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:[{left:5,width:"30%",height:"347px",containLabel:!0,tooltip:{formatter:e=>`${e.marker} ${e.name}: ${dt(e.value,2)}`}},{left:"center",width:"30%",height:"347px",containLabel:!0,tooltip:{formatter:e=>`${e.marker} ${e.name}: ${e.value[2]?"Present":"Missing"}`}},{right:15,width:"30%",height:"300px",containLabel:!0,tooltip:{formatter:e=>`${e.marker} Combination ${e.name}: ${dt(e.value,2)}`}}],xAxis:[{gridIndex:0,type:"category",data:t,axisLabel:{rotate:45},axisTick:{show:!1},axisLine:{show:!1}},{gridIndex:1,type:"category",data:t,splitArea:{show:!0},axisLabel:{rotate:45},axisTick:{show:!1},axisLine:{show:!1}},{gridIndex:2,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{formatter:e=>dt(e,0)}}],yAxis:[{id:"test",gridIndex:0,name:"Relative frequency of missing data",nameTextStyle:{align:"left"},nameLocation:"end",axisTick:{show:!1},axisLine:{show:!1},axisLabel:{formatter:e=>dt(e,0)}},{gridIndex:1,type:"category",name:"Missing data pattern",nameTextStyle:{align:"left"},nameLocation:"end",axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},{gridIndex:2,type:"category",axisTick:{show:!1},axisLine:{show:!1}},{gridIndex:2,position:"right",type:"category",data:l[2],axisTick:{show:!1},axisLine:{show:!1}}],visualMap:{type:"piecewise",seriesIndex:1,min:0,max:1,pieces:[{min:0,max:.9999999,color:"#ddd",label:"Missing"},{min:.9999999,color:"#69b023",label:"Present"}],show:!1},series:[{type:"bar",barCategoryGap:1,color:"#cccccc",data:a,xAxisIndex:0,yAxisIndex:0,visualMap:!1},{type:"heatmap",data:n,xAxisIndex:1,yAxisIndex:1,itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{itemStyle:{borderColor:"#fff",borderWidth:1}}},{name:"Present",type:"bar",data:l[0],xAxisIndex:2,yAxisIndex:2,barCategoryGap:1,color:"#69b023",stack:!0},{name:"Missing",type:"bar",data:l[1],xAxisIndex:2,yAxisIndex:2,barCategoryGap:1,color:"#ccc",stack:!0}],tooltip:{trigger:"item"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{pixelRatio:2,name:"MissingnessPattern",title:"Save"}}},legend:{}},o=Object.assign({},s,i);return r.createElement(Xe.A,{echarts:Ve,option:o,style:{height:"410px",width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{}})};var gt=a(934),pt=a(4049);Ge.Y([$e.a,Qe.a,Je.a,pt.a,Ke.a,gt.a,qe.a]);const ht=(0,l.PA)((e=>{const{yLabelName:t,xCategories:a,data:n,options:l}=e,i={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:15,bottom:40,left:60},xAxis:{type:"category",name:"Diagnosis year",data:a,nameLocation:"center",nameTextStyle:{padding:[10,0,0,0]},boundaryGap:!1},yAxis:{type:"value",name:t,nameLocation:"center",nameGap:45,axisLabel:{formatter:e=>dt(e,0)}},series:[{name:n[0].name,type:"line",data:n[0].data},{name:n[1].name,type:"line",data:n[1].data},{name:n[2].name,type:"line",data:n[2].data},{name:n[3].name,type:"line",data:n[3].data}],tooltip:{trigger:"axis",formatter:e=>`\n          Year: ${e[0].axisValue}<br/ >\n          ${e.map((e=>`${e.marker} ${e.seriesName}: ${dt(e.value,2)}`)).join("<br />")}\n        `},toolbox:{show:!0,feature:{dataZoom:{},restore:{},saveAsImage:{pixelRatio:2,name:"MissingnessDistribution",title:"Save"}}},legend:{}},s=Object.assign({},i,l);return r.createElement(Xe.A,{echarts:Ve,option:s,notMerge:!0,lazyUpdate:!0,opts:{}})})),At=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Missing data summary: key variables")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Percentages of cases for which the information was not available (missing) for one or more of the key variables: CD4 count, transmission category, migrant status or age."),r.createElement(Ae.A,{component:"fieldset"},r.createElement(lt.A,{name:"missDataSelection",value:t.summaryDataMgr.missPlotSelection,onChange:e=>t.summaryDataMgr.setMissPlotSelection(e.target.value)},r.createElement(Le.A,{value:"all",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"All"}),r.createElement(Le.A,{value:"female",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Female"}),r.createElement(Le.A,{value:"male",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Male"})))),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(F.Ay,{container:!0},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(ut,{xCategories:t.summaryDataMgr.missPlotData.plot1.chartCategories,data1:t.summaryDataMgr.missPlot1Series,data2:t.summaryDataMgr.missPlot2Series,data3:t.summaryDataMgr.missPlot3Series})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(ht,{yLabelName:"Proportion of missing values",xCategories:t.summaryDataMgr.missPlot4Categories,data:t.summaryDataMgr.missPlot4Series}))))))}));var Et=a(1150);Ge.Y([$e.a,Qe.a,Je.a,pt.a,Ke.a,Et.a,gt.a,qe.a]);const Mt=(0,l.PA)((e=>{const{yLabelName:t,data:a,q95:n}=e,l={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:10,bottom:40,left:60},xAxis:{type:"value",name:"Notification time in quarters of the year",nameLocation:"center",nameTextStyle:{padding:[10,0,0,0]},boundaryGap:!1},yAxis:{type:"value",name:t,nameLocation:"center",nameGap:45},series:[{name:a[0].name,type:"line",data:a[0].data,showSymbol:!1,areaStyle:{opacity:.4},color:"#69b023",markLine:{data:[[{name:`95% of cases reported by ${n} quarters`,xAxis:n,y:40},{xAxis:n,y:260}]],lineStyle:{color:"#bedfe1"},label:{position:"start",distance:10,formatter:"{a|{b}}",rich:{a:{color:"#000",backgroundColor:"#bedfe1",padding:5,borderRadius:5}}}}}],tooltip:{trigger:"axis",formatter:e=>`\n        ${e[0].marker} Quarter ${e[0].axisValueLabel}: ${ct(e[0].value[1],6)}\n      `},toolbox:{show:!0,feature:{dataZoom:{},restore:{},saveAsImage:{pixelRatio:2,name:"ReportingDelays",title:"Save"}}}};return r.createElement(Xe.A,{echarts:Ve,option:l,notMerge:!0,lazyUpdate:!0,opts:{}})})),yt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Reporting delays summary")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Average reporting delay for cases notified within a quarter and the upper bound for typical average delay values. Quarters when the average delay exceeds the upper bound may indicate cleaning events in surveillance."),r.createElement(Ae.A,{component:"fieldset"},r.createElement(lt.A,{name:"repDelDataSelection",value:t.summaryDataMgr.repDelPlotSelection,onChange:e=>t.summaryDataMgr.setRepDelPlotSelection(e.target.value)},r.createElement(Le.A,{value:"all",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"All"}),r.createElement(Le.A,{value:"female",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Female"}),r.createElement(Le.A,{value:"male",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Male"})))),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(Mt,{yLabelName:"Proportion of reported with delay",data:t.summaryDataMgr.repDelPlot.series,q95:t.summaryDataMgr.repDelPlot.q95}))))})),St=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.caseBasedAdjustmentsStageEnabled,onClick:()=>t.uiStateMgr.setActiveStepId(3)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Select case-based data for summary")),r.createElement(et,e),r.createElement(rt,e),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"body1"},"Number of records in the selection: ",t.summaryDataMgr.selectedCount," (out of ",t.summaryDataMgr.totalCount,", ",dt(t.summaryDataMgr.selectedCount/t.summaryDataMgr.totalCount),")")),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(W.A,{light:!0,sx:{margin:"30px 0px"}})),r.createElement(At,e),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(W.A,{light:!0,sx:{margin:"30px 0px"}})),r.createElement(yt,e)))})),bt=()=>r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"overline"},"No parameters"),r.createElement(p.A,null,"No Multiple Imputations adjustment selected"));var ft=a(9118);const It=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"overline"},"Joint Modelling - JOMO parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Number of imputations",helperText:"Type the number of data sets to input",type:"number",value:t.adjustMgr.miJomoSettings.nimp,onChange:e=>t.adjustMgr.setMIJomoNimp(e.target.value),onBlur:e=>t.adjustMgr.setMIJomoNimp(Math.min(Math.max(e.target.value,2),50)),fullWidth:!0,InputProps:{inputProps:{min:2,max:50}},sx:{marginBottom:"20px"}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Number of burn-in iterations",helperText:"Type the number of inital iterations to skip before imputing",type:"number",value:t.adjustMgr.miJomoSettings.nburn,onChange:e=>t.adjustMgr.setMIJomoNburn(e.target.value),onBlur:e=>t.adjustMgr.setMIJomoNburn(Math.min(Math.max(e.target.value,100),1e4)),fullWidth:!0,InputProps:{inputProps:{min:100,max:1e4}},sx:{marginBottom:"20px"}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Number of iterations between two successive imputations",type:"number",value:t.adjustMgr.miJomoSettings.nbetween,onChange:e=>t.adjustMgr.setMIJomoNbetween(e.target.value),onBlur:e=>t.adjustMgr.setMIJomoNbetween(Math.min(Math.max(e.target.value,100),1e4)),fullWidth:!0,InputProps:{inputProps:{min:100,max:1e4}},sx:{marginBottom:"20px"}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(p.A,{id:"discrete-slider",gutterBottom:!0},"Number of degrees of freedom for spline of diagnosis calendar year"),r.createElement(Ue.Ay,{min:3,max:5,value:t.adjustMgr.miJomoSettings.nsdf,onChange:(e,a)=>t.adjustMgr.setMIJomoNsdf(a),marks:[{value:3,label:3},{value:4,label:4},{value:5,label:5}]})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(ft.A,{row:!0},r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.miJomoSettings.imputeRD,onChange:(e,a)=>t.adjustMgr.setMIJomoImputeRD(a),name:"check",color:"primary"}),label:"Impute reporting delays inputs"}))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(T.A,{color:"primary",onClick:e=>t.adjustMgr.restoreMIDefaults("jomo")},"Restore defaults")))))})),Dt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"overline"},"Chained Equations - MICE parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Number of imputations",helperText:"Type the number of data sets to input",type:"number",value:t.adjustMgr.miMiceSettings.nimp,onChange:e=>t.adjustMgr.setMIMiceNimp(e.target.value),onBlur:e=>t.adjustMgr.setMIMiceNimp(Math.min(Math.max(e.target.value,2),50)),fullWidth:!0,InputProps:{inputProps:{min:2,max:50}},sx:{marginBottom:"20px"}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Number of mice iterations",helperText:"Type the number of mice iterations",type:"number",value:t.adjustMgr.miMiceSettings.nit,onChange:e=>t.adjustMgr.setMIMiceNit(e.target.value),onBlur:e=>t.adjustMgr.setMIMiceNit(Math.min(Math.max(e.target.value,2),50)),fullWidth:!0,InputProps:{inputProps:{min:2,max:50}},sx:{marginBottom:"20px"}})),r.createElement(F.Ay,{item:!0,xs:4}),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(p.A,{id:"discrete-slider",gutterBottom:!0},"Number of degrees of freedom for spline of diagnosis calendar year"),r.createElement(Ue.Ay,{min:3,max:5,value:t.adjustMgr.miMiceSettings.nsdf,onChange:(e,a)=>t.adjustMgr.setMIMiceNsdf(a),marks:[{value:3,label:3},{value:4,label:4},{value:5,label:5}]})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(ft.A,{row:!0},r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.miMiceSettings.imputeRD,onChange:(e,a)=>t.adjustMgr.setMIMiceImputeRD(a),name:"check",color:"primary"}),label:"Impute reporting delays inputs"}))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(T.A,{color:"primary",onClick:e=>t.adjustMgr.restoreMIDefaults("mice")},"Restore defaults")))))})),xt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:2},"Multiple Imputations type:",r.createElement("br",null),r.createElement(Ae.A,{component:"fieldset"},r.createElement(lt.A,{name:"miAdjustType",value:t.adjustMgr.miAdjustType,onChange:e=>t.adjustMgr.setMIAdjustType(e.target.value)},r.createElement(Le.A,{value:"none",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"None"}),r.createElement(Le.A,{value:"jomo",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Joint Modelling - JOMO"}),r.createElement(Le.A,{value:"mice",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Chained Equations - MICE"})))),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10,minHeight:283}},"none"===t.adjustMgr.miAdjustType&&r.createElement(bt,null),"jomo"===t.adjustMgr.miAdjustType&&r.createElement(It,e),"mice"===t.adjustMgr.miAdjustType&&r.createElement(Dt,e))))})),Ct=()=>r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"overline"},"No parameters"),r.createElement(p.A,null,"No Reporting Delays adjustment selected")),vt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"overline"},"Reporting Delays - without trend parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Diagnosis start year",helperText:"Enter the start year for diagnosis",type:"number",value:t.adjustMgr.rdWithoutTrendSettings.startYear,onChange:e=>t.adjustMgr.setRDWithoutStartYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithoutStartYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Notification end year",helperText:"Enter the end year for notification",type:"number",value:t.adjustMgr.rdWithoutTrendSettings.endYear,onChange:e=>t.adjustMgr.setRDWithoutEndYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithoutEndYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Notification end quarter (integer between 1 and 4)",type:"number",value:t.adjustMgr.rdWithoutTrendSettings.endQrt,onChange:e=>t.adjustMgr.setRDWithoutEndQrt(e.target.value),onBlur:e=>t.adjustMgr.setRDWithoutEndQrt(Math.min(Math.max(e.target.value,1),4)),fullWidth:!0,InputProps:{inputProps:{min:1,max:4}},style:{marginBottom:20}})),r.createElement(F.Ay,{item:!0,xs:4},"Stratify by:",r.createElement(ft.A,{row:!0},r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.rdWithoutTrendSettings.stratGender,onChange:(e,a)=>t.adjustMgr.setRDWithoutStratGender(a),name:"check",color:"primary"}),label:"Gender"}),r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.rdWithoutTrendSettings.stratTrans,onChange:(e,a)=>t.adjustMgr.setRDWithoutStratTrans(a),name:"check",color:"primary"}),label:"Transmission"}),r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.rdWithoutTrendSettings.stratMigr,onChange:(e,a)=>t.adjustMgr.setRDWithoutStratMigr(a),name:"check",color:"primary"}),label:"Migration"}))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(T.A,{color:"primary",onClick:e=>t.adjustMgr.restoreRDDefaults("withoutTrend")},"Restore defaults")))))})),Pt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"overline"},"Reporting Delays - with trend parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Diagnosis start year",helperText:"Enter the start year for diagnosis",type:"number",value:t.adjustMgr.rdWithTrendSettings.startYear,onChange:e=>t.adjustMgr.setRDWithStartYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithStartYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Notification end year",helperText:"Enter the end year for notification",type:"number",value:t.adjustMgr.rdWithTrendSettings.endYear,onChange:e=>t.adjustMgr.setRDWithEndYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithEndYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(R.A,{label:"Notification end quarter (integer between 1 and 4)",type:"number",value:t.adjustMgr.rdWithTrendSettings.endQrt,onChange:e=>t.adjustMgr.setRDWithEndQrt(e.target.value),onBlur:e=>t.adjustMgr.setRDWithEndQrt(Math.min(Math.max(e.target.value,1),4)),fullWidth:!0,InputProps:{inputProps:{min:1,max:4}},style:{marginBottom:20}})),r.createElement(F.Ay,{item:!0,xs:4},"Stratify by:",r.createElement(ft.A,{row:!0},r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.rdWithTrendSettings.stratGender,onChange:(e,a)=>t.adjustMgr.setRDWithStratGender(a),name:"check",color:"primary"}),label:"Gender"}),r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.rdWithTrendSettings.stratTrans,onChange:(e,a)=>t.adjustMgr.setRDWithStratTrans(a),name:"check",color:"primary"}),label:"Transmission"}),r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.adjustMgr.rdWithTrendSettings.stratMigr,onChange:(e,a)=>t.adjustMgr.setRDWithStratMigr(a),name:"check",color:"primary"}),label:"Migration"}))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(T.A,{color:"primary",onClick:e=>t.adjustMgr.restoreRDDefaults("withTrend")},"Restore defaults")))))})),Rt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:2},"Reporting Delays type:",r.createElement("br",null),r.createElement(Ae.A,{component:"fieldset"},r.createElement(lt.A,{name:"rdAdjustType",value:t.adjustMgr.rdAdjustType,onChange:e=>t.adjustMgr.setRDAdjustType(e.target.value)},r.createElement(Le.A,{value:"none",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"None"}),r.createElement(Le.A,{value:"withoutTrend",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Without trend"}),r.createElement(Le.A,{value:"withTrend",control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"With trend"})))),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10,minHeight:263}},"none"===t.adjustMgr.rdAdjustType&&r.createElement(Ct,null),"withoutTrend"===t.adjustMgr.rdAdjustType&&r.createElement(vt,e),"withTrend"===t.adjustMgr.rdAdjustType&&r.createElement(Pt,e))))})),Tt=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.adjustMgr.adjustmentSelected,onClick:e=>t.uiStateMgr.setActivePageId(3,1)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Case-based data adjustments parameters")),r.createElement(xt,e),r.createElement(Rt,e)))}));var Nt=a(8582),Yt=a(8910),wt=a(1553);const Ft=(0,l.PA)((e=>{const{progress:t}=e;return D(t)|!t?null:r.createElement(N.A,{color:"secondary",sx:{marginTop:"10px",marginBottom:"10px",height:"5px"}})})),Ot=(0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState(0);return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.reportsPageEnabled,onClick:e=>t.uiStateMgr.setActivePageId(4)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Case-based data adjustments run")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(ae,{onClick:()=>t.adjustMgr.runAdjustments(),disabled:!t.adjustMgr.adjustmentSelected||t.adjustMgr.adjustmentsRunInProgress},r.createElement(Nt.A,null)," Run adjustments"),r.createElement(T.A,{onClick:()=>t.adjustMgr.cancelAdjustments(),color:"primary",style:{marginLeft:20},disabled:!t.adjustMgr.adjustmentsRunInProgress},"Cancel"),r.createElement(Ft,{progress:t.adjustMgr.adjustmentsRunProgress})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(Yt.A,{value:a,onChange:(e,t)=>n(t),indicatorColor:"primary",textColor:"primary"},r.createElement(wt.A,{label:"Run log",disabled:D(t.adjustMgr.adjustmentsRunLog)}),r.createElement(wt.A,{label:"Diagnostics",disabled:D(t.adjustMgr.adjustmentsReport)})),0===a&&r.createElement(r.Fragment,null,r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.adjustMgr.adjustmentsRunLog},style:{overflowX:"auto",fontSize:"0.75rem"}})),1===a&&r.createElement(r.Fragment,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t.adjustMgr.adjustmentsReport},style:{overflowX:"auto"}}))))))})),_t=(0,l.PA)((e=>{const{appMgr:t}=e,a=t.uiStateMgr.activeSubPageId;return r.createElement(r.Fragment,null,0===a&&r.createElement(Tt,e),1===a&&r.createElement(Ot,e))}));var kt=a(5968);const jt=e=>e&&"object"==typeof e,Bt=(...e)=>be(!0,e.map(D))?e[0]:e.reduce(((e,t)=>(Object.keys(t).forEach((a=>{const r=e[a],n=t[a];fe(r)&&fe(n)?e[a]=r.concat(...n):jt(r)&&jt(n)?e[a]=Bt(r,n):e[a]=n})),e)),{}),Ht=Bt;Ge.Y([$e.a,Qe.a,Je.a,Ke.a,ot.a,kt.a,it.a,qe.a]);const Ut=e=>{const{data:t,options:a}=e;if(D(t))return r.createElement("div",null,"No plot data available");const n=18*t.chartCategoriesY.length+110,l={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:80,right:0,bottom:0,left:90},xAxis:{type:"category",name:t.titleX,nameLocation:"center",nameTextStyle:{fontWeight:"bold"},nameGap:35,data:t.chartCategoriesX,position:"top",axisLabel:{fontSize:11},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{type:"category",name:"Year of Arrival",nameLocation:"center",nameGap:45,data:t.chartCategoriesY,inverse:!1,axisLabel:{fontSize:11},axisLine:{show:!1},axisTick:{show:!1}},visualMap:{type:"continuous",calculable:!0,orient:"horizontal",right:80,top:"top",inRange:{color:["#bedfe1","#69b023"]},padding:0,min:0,max:t.dataMax,align:"top",textStyle:{fontSize:11,color:"rgb(110, 112, 121)"}},series:[{type:"heatmap",data:t.seriesData,label:{show:!0,fontSize:10,formatter:e=>ct(e.data[2],0)},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{itemStyle:{borderColor:"#fff",borderWidth:1}}}],tooltip:{trigger:"item"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{pixelRatio:2,name:"MissingnessPattern",title:"Save"}}},legend:{}},i=Ht(l,a);return r.createElement(Xe.A,{echarts:Ve,option:i,style:{height:`${n}px`,width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{}})};function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Lt.apply(null,arguments)}const Wt=e=>r.createElement(p.A,Lt({variant:"caption",component:"div"},e));function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Xt.apply(null,arguments)}const Gt=(0,l.PA)((({isTotal:e,value:t,lb:a,ub:n,isPerc:l=!1,decimals:i=0,...s})=>{const o=l?dt:ct,m=e?{fontWeight:"bold",backgroundColor:"#f9f9f9"}:null;let c=!isNaN(t)&&""!==t,d="";D(t)?D(a)||D(n)||(d=`${o(a,i)} - ${o(n,i)}`,c=!0):d=o(t,i);const u=Ht({align:c?"right":"left"},s);return r.createElement(K.A,Xt({},u,{sx:m}),d)})),Vt=(0,l.PA)((e=>{const{missingness:t}=e;let a=null;return a=D(t)||fe(t)&&0===t.length?r.createElement("div",null,"No table data available"):r.createElement(z.A,{size:"small"},r.createElement(ue.A,null,r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{align:"right"},"Priority"),r.createElement(K.A,{align:"left",width:"700px"},"Missing variable"),r.createElement(K.A,{align:"right"},"Number of excluded cases"))),r.createElement(J.A,null,t.map(((e,t)=>r.createElement(q.A,{key:t},r.createElement(Gt,{value:e.IsTotalRow?null:t+1,isTotal:e.IsTotalRow,align:"right"}),r.createElement(Gt,{value:e.Excluded,isTotal:e.IsTotalRow,align:"left"}),r.createElement(Gt,{value:e.Count,isTotal:e.IsTotalRow,align:"right"})))))),r.createElement(r.Fragment,null,r.createElement(Wt,null,"Table 1. Number of excluded cases"),a)}));var zt=a(9257),$t=a(4653);const Qt=(0,l.PA)((e=>{const{migrMgr:t}=e,a=(e,a)=>t.setYodRegion(a),n=D(t.yodDistr)?0:t.yodDistr.chartCategoriesX.length-1,l=Math.max(n-20+1,0);let i=null;return D(t.yodDistr)||(i=r.createElement(zt.A,{exclusive:!0,size:"small",color:"primary",value:t.yodRegion,onChange:a},r.createElement($t.A,{value:"ALL"},"ALL"),r.createElement($t.A,{value:"AFRICA"},"AFRICA"),r.createElement($t.A,{value:"EUROPE-NORTH AMERICA"},"EUROPE-NORTH AMERICA"),r.createElement($t.A,{value:"ASIA"},"ASIA"),r.createElement($t.A,{value:"OTHER"},"OTHER"))),r.createElement(r.Fragment,null,r.createElement(Wt,null,"Figure 2. Average number of cases by the Year of Arrival and Year of Diagnosis"),i,r.createElement(Ut,{data:t.yodDistr,options:{xAxis:{inverse:!0},title:{subtext:"Last 20 years selected by default",subtextStyle:{fontSize:11}},dataZoom:[{type:"slider",xAxisIndex:0,top:51,height:25,startValue:l,endValue:n,handleSize:"80%",showDetail:!1,borderColor:"transparent",fillerColor:"transparent"}]}}))})),Jt=({section:e,isTotal:t=!1,caption:a=""})=>{let n=[];return""!==a&&(n=[r.createElement(q.A,{key:-1},r.createElement(Gt,{value:a,isTotal:!0,colSpan:7}))]),n=n.concat(e.map(((e,a)=>r.createElement(q.A,{key:a},r.createElement(Gt,{value:e.Category,isTotal:t}),r.createElement(Gt,{value:e.Count,isTotal:t}),r.createElement(Gt,{value:e.Algorithm,isTotal:t,align:"right"}),r.createElement(Gt,{value:e.PriorProp,isTotal:t,isPerc:!0}),r.createElement(Gt,{lb:e.PriorPropLB,ub:e.PriorPropUB,isTotal:t,isPerc:!0}),r.createElement(Gt,{value:e.PostProp,isTotal:t,isPerc:!0}),r.createElement(Gt,{lb:e.PostPropLB,ub:e.PostPropUB,isTotal:t,isPerc:!0}))))),n},Kt=(0,l.PA)((({migrMgr:e})=>{const t=e.tableDistr,a=t=>e.setTableRegion(t.target.value);let n=null;D(e.yodDistr)||(n=r.createElement(zt.A,{exclusive:!0,size:"small",color:"primary",value:e.tableRegion,onChange:a,sx:{marginBottom:"5px"}},r.createElement($t.A,{value:"ALL"},"ALL"),r.createElement($t.A,{value:"AFRICA"},"AFRICA"),r.createElement($t.A,{value:"EUROPE-NORTH AMERICA"},"EUROPE-NORTH AMERICA"),r.createElement($t.A,{value:"ASIA"},"ASIA"),r.createElement($t.A,{value:"OTHER"},"OTHER")));let l=null;return l=D(t)?r.createElement(z.A,{size:"small"},r.createElement(ue.A,null,r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{width:"220px",rowSpan:2},"Category"),r.createElement(K.A,{align:"right",rowSpan:2},"Count"),r.createElement(K.A,{align:"right",rowSpan:2},"Algorithm"),r.createElement(K.A,{align:"right",colSpan:2,sx:{textAlign:"center"}},"Infected prior to arrival"),r.createElement(K.A,{align:"right",colSpan:2,sx:{textAlign:"center"}},"Infected post arrival")),r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{align:"right"},"Proportion"),r.createElement(K.A,{align:"right"},"95% CI"),r.createElement(K.A,{align:"right"},"Proportion"),r.createElement(K.A,{align:"right"},"95% CI"))),r.createElement(J.A,null,r.createElement(q.A,null,r.createElement(Gt,{value:"Total",isTotal:!0}),r.createElement(Gt,{value:0,isTotal:!0}),r.createElement(Gt,{value:null,isTotal:!0}),r.createElement(Gt,{value:null,isTotal:!0}),r.createElement(Gt,{value:null,isTotal:!0}),r.createElement(Gt,{value:null,isTotal:!0})))):r.createElement(z.A,{size:"small"},r.createElement(ue.A,null,r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{width:"220px",rowSpan:2},"Category"),r.createElement(K.A,{align:"right",rowSpan:2},"Count"),r.createElement(K.A,{align:"right",rowSpan:2},"Algorithm"),r.createElement(K.A,{align:"right",colSpan:2,sx:{textAlign:"center"}},"Infected prior to arrival"),r.createElement(K.A,{align:"right",colSpan:2,sx:{textAlign:"center"}},"Infected post arrival")),r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{align:"right"},"Proportion"),r.createElement(K.A,{align:"right"},"95% CI"),r.createElement(K.A,{align:"right"},"Proportion"),r.createElement(K.A,{align:"right"},"95% CI"))),r.createElement(J.A,null,r.createElement(Jt,{section:t.Total,isTotal:!0}),r.createElement(Jt,{section:t.Sex,caption:"Sex:"}),r.createElement(Jt,{section:t.AgeGroup,caption:"Age Group:"}),r.createElement(Jt,{section:t.Transmission,caption:"Transmission:"}),r.createElement(Jt,{section:t.GroupedRegionOfOrigin,caption:"Grouped Region Of Origin:"}))),r.createElement(r.Fragment,null,r.createElement(Wt,null,"Table 2. Proportion of migrants infected post arrival by sex, age group and transmission category"),n,l)}));var qt=a(173),Zt=a(9680);Ge.Y([$e.a,Qe.a,Je.a,Ke.a,gt.a,qt.a,Zt.a]);const ea=(0,l.PA)((({title:e,xAxisTitle:t="Year",yAxisTitle:a="Proportion",data:n,legendOptions:l={orient:"vertical",right:0,top:"center",selector:!0},color:i=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],format:s="number",showConfBounds:o=!0})=>{const m=e=>{let t=null;return D(e)||(t=e.map((e=>isFinite(e[1])?o?(isFinite(e[2])&&!D(e[2])||(e[2]=e[1]),isFinite(e[3])&&!D(e[3])||(e[3]=e[1]),e):[e[0],e[1],null,null,e[4],null]:[e[0],null,null,null,null,null]))),t},c=(e,t)=>{if(e.context.rendered)return;const a=t.visual("color"),r=e.dataIndexInside,n=t.value(0,r),l=t.value(1,r),i=t.coord([n,l]),s=t.value(0,r+1),o=t.value(1,r+1),m=t.coord([s,o]),c={x1:i[0],y1:i[1],x2:m[0],y2:m[1]},d=t.coord([n,t.value(2,r)]),u=t.coord([n,t.value(3,r)]),g=t.coord([s,t.value(3,r+1)]),p=t.coord([s,t.value(2,r+1)]),h=[d,u,g,p];let A=[];return d!==u&&p!==g&&A.push({type:"polygon",shape:{points:h},style:{fill:a,opacity:.3}}),A.push({type:"line",shape:c,style:{stroke:a,fill:"none",lineDash:t.value(4,r)&&t.value(4,r+1)?null:[2]}}),A.push({type:"circle",shape:{cx:i[0],cy:i[1],r:2},style:{fill:a}}),{type:"group",children:A}};let d=[],u=[],g={},p=[];n.forEach(((e,t)=>((e,t)=>{D(e)||(u.push({name:e.name,type:"custom",renderItem:c,encode:{x:"x",y:["y","lb","ub"],tooltip:["x","y","lb","ub"]},dimensions:["x","y","lb","ub","used"],datasetIndex:t}),d.push({name:e.name}),g[e.name]=!D(e.selected)&&e.selected,p.push({source:m(e.values)}))})(e,t)));const h="number"===s?ct:dt,A={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:"horizontal"===l.orient?30:240,bottom:40,left:65},title:{text:e},xAxis:{type:"category",nameLocation:"center",name:t,nameTextStyle:{padding:[10,0,0,0]},axisTick:{alignWithLabel:!0},boundaryGap:!1,axisPointer:{type:"shadow",snap:!0}},yAxis:{type:"value",name:a,nameLocation:"center",nameGap:50,axisLabel:{formatter:e=>h(e,0)}},series:u,color:i,dataset:p,tooltip:{trigger:"axis",formatter:e=>{const t=e.map((e=>{let t="";if(!D(e.value[2])&&!D(e.value[3])){let a="";D(e.value[5])||(a=`, Count: ${ct(e.value[5])}`),t=` (${h(e.value[2],0)} - ${h(e.value[3],0)})${a}`}return`${e.marker} ${e.seriesName}: ${h(e.value[1],0)}${t}`})).join("<br />");return`\n          Year: ${e[0].axisValue}<br/ >\n          ${t}\n        `},textStyle:{fontSize:12}},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{pixelRatio:2,title:"Save"}}},legend:{data:d,selected:g,orient:"vertical",right:0,top:"center",selector:!0,textStyle:{fontSize:11},...l}};return r.createElement(Xe.A,{echarts:Ve,option:A,style:{height:"300px",width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{}})})),ta=(0,l.PA)((({migrMgr:e})=>{const{arrivalPlotData:t,diagnosisPlotData:a}=e;let n=null;n=D(t)?r.createElement("div",null,"No plot data available"):r.createElement(ea,{xAxisTitle:"Year of Arrival",data:t,format:"percentage",showConfBounds:e.showConfBounds});let l=null;return l=D(a)?r.createElement("div",null,"No plot data available"):r.createElement(ea,{xAxisTitle:"Year of Diagnosis",data:a,format:"percentage",showConfBounds:e.showConfBounds}),r.createElement(r.Fragment,null,r.createElement(Le.A,{control:r.createElement(We.A,{checked:e.showConfBounds,onChange:t=>e.setShowConfBounds(t.target.checked),color:"primary",size:"small"}),label:"Show confidence bounds in charts below",sx:{marginTop:1,marginBottom:1}}),r.createElement(Wt,null,"Figure 3. Proportion of migrants infected post arrival by region of origin and year of arrival"),n,r.createElement(Wt,{sx:{marginTop:1}},"Figure 4. Proportion of migrants infected post arrival by region of origin and year of diagnosis"),l)})),aa=(0,l.PA)((({migrMgr:e})=>{const t=e.confBounds,a=(t,a)=>e.setPropTableStrat(a);let n=null;D(t)||(n=r.createElement(zt.A,{size:"small",color:"primary",value:e.propTableStrat,onChange:a,sx:{marginBottom:"5px"}},r.createElement($t.A,{value:"Gender"},"Sex"),r.createElement($t.A,{value:"AgeGroup"},"Age Group"),r.createElement($t.A,{value:"Transmission"},"Transmission"),r.createElement($t.A,{value:"GroupedRegionOfOrigin"},"Grouped Region Of Origin")));const l=!1;let i=null;return i=D(t)?r.createElement("div",null,"No table data available"):r.createElement(z.A,{size:"small"},r.createElement(ue.A,null,r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{width:"220px",rowSpan:2},"Category"),r.createElement(K.A,{align:"right",rowSpan:2},"Count"),r.createElement(K.A,{align:"right",rowSpan:2},"Algorithm"),r.createElement(K.A,{align:"right",colSpan:2,sx:{textAlign:"center"}},"Infected prior to arrival"),r.createElement(K.A,{align:"right",colSpan:2,sx:{textAlign:"center"}},"Infected post arrival")),r.createElement(q.A,{hover:!1,sx:{backgroundColor:"#bedfe1"}},r.createElement(K.A,{align:"right"},"Proportion"),r.createElement(K.A,{align:"right"},"95% CI"),r.createElement(K.A,{align:"right"},"Proportion"),r.createElement(K.A,{align:"right"},"95% CI"))),r.createElement(J.A,null,t.map(((e,t)=>r.createElement(q.A,{key:t},r.createElement(Gt,{value:e.Category,isTotal:l}),r.createElement(Gt,{value:e.Count,isTotal:l}),r.createElement(Gt,{value:e.Algorithm,isTotal:l,align:"right"}),r.createElement(Gt,{value:e.PriorProp,isTotal:l,isPerc:!0}),r.createElement(Gt,{lb:e.PriorPropLB,ub:e.PriorPropUB,isTotal:l,isPerc:!0}),r.createElement(Gt,{value:e.PostProp,isTotal:l,isPerc:!0}),r.createElement(Gt,{lb:e.PostPropLB,ub:e.PostPropUB,isTotal:l,isPerc:!0})))))),r.createElement(r.Fragment,null,n,i)})),ra=(0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState(0);return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!0,onClick:e=>t.uiStateMgr.setActivePageId(4)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Migrant modelling run")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(ae,{onClick:()=>t.migrMgr.run(),disabled:t.migrMgr.runInProgress},r.createElement(Nt.A,null)," Run migration"),r.createElement(T.A,{onClick:()=>t.migrMgr.cancel(),color:"primary",style:{marginLeft:20},disabled:!t.migrMgr.runInProgress},"Cancel"),r.createElement(Ft,{progress:t.migrMgr.runProgress})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(Yt.A,{value:a,onChange:(e,t)=>n(t),indicatorColor:"primary",textColor:"primary"},r.createElement(wt.A,{label:"Run log"}),r.createElement(wt.A,{label:"Diagnostics",disabled:D(t.migrMgr.inputStats)})),0===a&&r.createElement(r.Fragment,null,r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.migrMgr.runLog},style:{overflowX:"auto",fontSize:"0.75rem"}})),1===a&&r.createElement("div",{style:{maxWidth:1e3}},r.createElement("h3",null,"1. Overview"),r.createElement("p",null,"Estimates of the time of infection require the following variables: Sex, transmission category, Region of Origin, AIDS diagnosis. CD4 count and VL are used if available. In addition, the time of infection must be compared to the arrival time and the estimation based on the cases for which both Year of Arrival and Year of Diagnosis are known."),r.createElement("p",null,"It is possible to run the migration estimation on the original dataset, but it is recommended to use the imputation first. If multiple imputations adjustment was run before the migrant module, then all results are computed as average over imputations and presented rounded to the nearest integer."),r.createElement("p",null,"The estimation is performed for adults only."),r.createElement("h3",null,"2. Excluded data overview"),r.createElement(Vt,{missingness:t.migrMgr.missingness}),r.createElement("h3",null,"3. Description of data used in estimation"),r.createElement(Wt,null,"Figure 1. Average number of cases by Year of Arrival and Region For Migration Module"),r.createElement(Ut,{data:t.migrMgr.regionDistr}),r.createElement("br",null),r.createElement(Qt,{migrMgr:t.migrMgr}),r.createElement("h3",null,"4. Estimates of the proportion of the migrants infected prior and post arrival"),r.createElement(Kt,{migrMgr:t.migrMgr}),r.createElement("br",null),r.createElement(aa,{migrMgr:t.migrMgr}),r.createElement(ta,{migrMgr:t.migrMgr}))))))})),na=(e,t)=>((e,t,a)=>{a/=100;const r=t*Math.min(a,1-a)/100,n=t=>{const n=(t+e/30)%12,l=a-r*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*l).toString(16).padStart(2,"0")};return`#${n(0)}${n(8)}${n(4)}`})(t,40+60*e,95-40*e),la=(0,l.PA)((e=>{const{i:t,isSelected:a,onSelectClick:n,population:l,appMgr:i}=e;return r.createElement(q.A,{hover:!0,role:"checkbox"},r.createElement(K.A,{padding:"checkbox",sx:{verticalAlign:"top"}},r.createElement(pe.A,{inputProps:{"aria-labelledby":`labelId${t}`},color:"primary",checked:a,onClick:n})),r.createElement(K.A,{sx:{padding:"4px 16px 0px 16px",maxWidth:"300px",verticalAlign:"top"}},r.createElement(ge.A,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(Me.A,{key:e,label:e,sx:{margin:"2px"},color:"secondary"})))),value:l.variables,style:{width:"100%",fontSize:"0.75rem"},onChange:e=>{i.popMgr.setPopulationVariables(t,e.target.value)}},i.popMgr.availableVariables.map(((e,t)=>r.createElement(he.A,{key:t,value:e.Name,dense:!0},`${e.Name} (${e.Code})`))))),r.createElement(K.A,null,r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.strata.map((e=>r.createElement(Me.A,{key:e.Combination,label:`${e.Combination} (${dt(e.Perc)})`,style:{margin:2,backgroundColor:`${na(e.Perc,214)}`}}))))))})),ia=(0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState([]),l=t.popMgr.populationsJS,i=e=>t=>{const r=a.indexOf(e);let l=[];-1===r?l=l.concat(a,e):0===r?l=l.concat(a.slice(1)):r===a.length-1?l=l.concat(a.slice(0,-1)):r>0&&(l=l.concat(a.slice(0,r),a.slice(r+1))),n(l)},s=l.length,o=a.length,m=e=>-1!==a.indexOf(e);return r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Case-base data populations"),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{padding:"checkbox"},r.createElement(pe.A,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=l.map(((e,t)=>t));n(e)}else n([])},checked:s>0&&o===s})),r.createElement(K.A,{width:"50%"},"Selected variables"),r.createElement(K.A,{width:"50%"},"Defined populations"))),r.createElement(J.A,null,l.map(((e,a)=>r.createElement(la,{key:a,i:a,population:e,appMgr:t,isSelected:m(a),onSelectClick:i(a)}))))),r.createElement(Ce,{selectedCount:o,onAddClick:()=>{t.popMgr.addEmptyPopulation()},onDeleteClick:()=>{t.popMgr.removePopulations(a),n([])},addDisabled:!t.uiStateMgr.caseBasedOrigGroupingProvisioned}))})),sa=(0,l.PA)((e=>{const{isSelected:t,onSelectClick:a,el:n,appMgr:l}=e,i=(e,t)=>{t&&l.popCombMgr.setCombinationName(n.id,e)},s=e=>{l.popCombMgr.setCombinationCasePopulations(n.id,e.target.value)},o=e=>{l.popCombMgr.setCombinationAggrPopulations(n.id,e.target.value)},m=e=>{let t="";return""===e&&(t="Please, specify a unique name"),t};let c=null,d=null,u=null,g=null;return n.id===l.popCombMgr.combinationAllId?(d=n.name,u="All data available",g="All data available after selection above"):(c=r.createElement(pe.A,{inputProps:{"aria-labelledby":`labelId${n.id}`},color:"primary",checked:t,onClick:a}),d=r.createElement(Se,{value:n.name,validationFunc:m,onChange:i,helperText:"",sx:{width:"100%","& .MuiInputBase-root":{fontSize:"0.75rem"}}}),u=r.createElement(ge.A,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(Me.A,{key:e,label:e,sx:{margin:"2px"},color:"secondary"})))),value:n.casePopulations,disabled:0===l.popMgr.definedPopulations.length,onChange:s,sx:{width:"100%",fontSize:"0.75rem","&:before":{borderBottom:"0px solid black"}}},l.popMgr.definedPopulations.map(((e,t)=>r.createElement(he.A,{key:t,value:e,dense:!0},e)))),g=r.createElement(ge.A,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(Me.A,{key:e,label:e,sx:{margin:"2px"},color:"secondary"})))),value:n.aggrPopulations,onChange:o,sx:{width:"100%",fontSize:"0.75rem","&:before":{borderBottom:"0px solid black"}}},l.aggrDataMgr.populationNames.map(((e,t)=>r.createElement(he.A,{key:t,value:e,dense:!0},e))))),r.createElement(q.A,{hover:!0,role:"checkbox"},r.createElement(K.A,{padding:"checkbox",sx:{verticalAlign:"top"}},c),r.createElement(K.A,{id:`labelId${n.id}`,scope:"row",sx:{padding:"4px 4px 6px 0px",verticalAlign:"top"}},d),r.createElement(K.A,{sx:{padding:"4px 4px 0px 16px",verticalAlign:"top"}},u),r.createElement(K.A,{sx:{padding:"4px 4px 0px 16px",verticalAlign:"top"}},g))})),oa=(0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState([]),l=t.popCombMgr.combinationsArray,i=e=>()=>{let t=[];t=-1===a.indexOf(e)?t.concat(a,e):ve(a,e),n(t)},s=l.length-1,o=a.length;return r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Populations combinations"),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{padding:"checkbox"},r.createElement(pe.A,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=ve(l.map((e=>e.id)),t.popCombMgr.combinationAllId);n(e)}else n([])},checked:s>0&&o===s})),r.createElement(K.A,{width:"30%",padding:"none"},"Combination name"),r.createElement(K.A,{width:"35%"},"Case-based populations"),r.createElement(K.A,{width:"35%"},"Aggregated populations"))),r.createElement(J.A,null,l.map(((e,n)=>{return r.createElement(sa,{key:n,el:e,appMgr:t,isSelected:(l=e.id,-1!==a.indexOf(l)),onSelectClick:i(e.id)});var l})))),r.createElement(Ce,{selectedCount:o,onAddClick:()=>{t.popCombMgr.addEmptyCombination()},onDeleteClick:()=>{t.popCombMgr.removeCombinations(a),n([])}}))})),ma=(0,l.PA)((({i:e,rowCount:t,dataFile:a,appMgr:n})=>{const l=(e,t)=>{n.aggrDataMgr.setDataFileYears(a.name,t)},i="Dead"!==a.name&&n.modelMgr.migrConnFlag,s=i?{color:"rgba(0, 0, 0, 0.26)"}:null;let o=null;return(1===t||t>1&&0===e)&&(o=r.createElement(K.A,{rowSpan:t,sx:{pt:5,pr:3,pb:1}},r.createElement(Ue.Ay,{min:n.aggrDataMgr.rangeYears[0],max:n.aggrDataMgr.rangeYears[1],marks:!0,value:a.years,onChange:l,sx:{"& *":{fontSize:"9px"}},valueLabelDisplay:"on",valueLabelFormat:e=>e.toFixed(),"aria-labelledby":"range-slider",getAriaLabel:e=>e.toFixed(),getAriaValueText:e=>e.toFixed(),color:"secondary",disabled:i}))),r.createElement(q.A,{hover:!i},r.createElement(K.A,{sx:s},a.name),r.createElement(K.A,null,r.createElement(We.A,{color:"primary",checked:a.use,onChange:e=>{n.aggrDataMgr.setDataFileUse(a.name,e.target.checked)},size:"small",disabled:i})),o)})),ca=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Aggregated data selection"),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{width:"320px"},"Data type"),r.createElement(K.A,{width:"100px"},"Use"),r.createElement(K.A,null,"Years"))),r.createElement(J.A,null,t.aggrDataMgr.dataFiles.map(((e,a)=>r.createElement(ma,{key:a,i:a,rowCount:1,dataFile:e,appMgr:t}))))))})),da=e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",onClick:e=>t.uiStateMgr.setActivePageId(4,1)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Case-based data")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,null,"Create populations from data"),r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Stratify data by values present in the data. Select one or more variables.")),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(ia,e)),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(W.A,{light:!0,style:{margin:"30px 0"}})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Aggregated data")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,null,"Select data for modelling"),r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Only years present in the aggregated data set will overwrite case-based derived data.")),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(ca,e)),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(W.A,{light:!0,style:{margin:"30px 0"}})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Combine populations")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,{variant:"body2",color:"textSecondary"},"Combine case-based and aggregated data populations.")),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(oa,e))))},ua=(0,l.PA)((e=>{const{i:t,isSelected:a,onSelectClick:n,interval:l,collection:i}=e,s=e=>i.setIntervalStartYear(t,e.target.value);let o=null;return o=0===t?l.startYear:r.createElement(Ne.A,{style:{width:"100%",fontSize:"0.75rem"},value:l.startYear,type:"number",onChange:s}),r.createElement(q.A,{hover:!0,role:"checkbox"},r.createElement(K.A,{padding:"checkbox"},r.createElement(pe.A,{inputProps:{"aria-labelledby":`labelId${t}`},color:"primary",checked:a,onClick:n})),r.createElement(K.A,{id:"labelId1",scope:"row",padding:"none"},o),r.createElement(K.A,{sx:{textAlign:"center"}},l.endYear),r.createElement(K.A,{padding:"checkbox",sx:{textAlign:"center"}},r.createElement(pe.A,{color:"primary",checked:l.jump,onChange:e=>i.setIntervalJump(t,e.target.checked)})),r.createElement(K.A,{padding:"checkbox",sx:{textAlign:"center"}},r.createElement(pe.A,{color:"primary",checked:l.diffByCD4,onChange:e=>i.setIntervalDiffByCD4(t,e.target.checked)})),r.createElement(K.A,{padding:"checkbox",sx:{textAlign:"center"}},r.createElement(pe.A,{color:"primary",checked:l.changeInInterval,onChange:e=>i.setIntervalChangeInInterval(t,e.target.checked)})))})),ga=(0,l.PA)((e=>{const{timeIntCollMgr:t}=e,[a,n]=r.useState([]),l=t.selectedEditCollection,i=l.intervals,s=e=>t=>{const r=a.indexOf(e);let l=[];-1===r?l=l.concat(a,e):0===r?l=l.concat(a.slice(1)):r===a.length-1?l=l.concat(a.slice(0,-1)):r>0&&(l=l.concat(a.slice(0,r),a.slice(r+1))),n(l)},o=i.length,m=a.length,c=e=>-1!==a.indexOf(e);return r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Collection: ",l.name),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{padding:"checkbox"},r.createElement(pe.A,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=i.map(((e,t)=>t));n(e)}else n([])},checked:o>0&&m===o}),"            "),r.createElement(K.A,{width:"20%",padding:"none"},"Start year"),r.createElement(K.A,{width:"20%",sx:{textAlign:"center"}},"End year"),r.createElement(K.A,{width:"20%",sx:{textAlign:"center"}},"Jump"),r.createElement(K.A,{width:"20%",sx:{textAlign:"center"}},"Change by CD4 count"),r.createElement(K.A,{width:"20%",sx:{textAlign:"center"}},"Change in interval"))),r.createElement(J.A,null,i.map(((e,t)=>r.createElement(ua,{key:t,i:t,interval:e,collection:l,isSelected:c(t),onSelectClick:s(t)}))))),r.createElement(Ce,{selectedCount:m,onAddClick:()=>{l.addEmptyInterval()},onDeleteClick:()=>{l.removeIntervals(a),n([])}}))})),pa=(0,l.PA)((e=>{const{timeIntCollMgr:t}=e,a=t.defaultEditCollectionSelected;return r.createElement(r.Fragment,null,r.createElement(ge.A,{value:t.selectedEditCollectionId,onChange:e=>t.setSelectedEditCollectionId(e.target.value),style:{width:"100%",fontSize:"0.75rem"}},t.collectionsArray.map(((e,t)=>r.createElement(he.A,{key:t,value:e.id,dense:!0},e.name)))),r.createElement(T.A,{color:"primary",onClick:()=>t.deleteSelectedEditCollection(),disabled:a},"Delete"),r.createElement(T.A,{color:"primary",onClick:()=>t.addNewCollection()},"Add"))})),ha=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",onClick:()=>t.uiStateMgr.setActivePageId(4,2)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Load model parameters file")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement("input",{style:{display:"none"},id:"modelUploadBtn",type:"file",accept:".xml, .zip",onChange:e=>{const a=e.target.files[0];t.modelMgr.setModelsParamFile(a),e.target.value=null}}),r.createElement(V.A,{title:"Select XML model file",arrow:!0},r.createElement("label",{htmlFor:"modelUploadBtn"},r.createElement(ae,null,r.createElement(ee.A,null)," Load model"))),r.createElement(V.A,{title:"Save XML model file",arrow:!0},r.createElement("span",null,r.createElement(T.A,{sx:{marginTop:"6px",marginBottom:"6px",marginLeft:"20px"},color:"primary",onClick:e=>t.modelMgr.saveModelsParamFile()},"Save model"))),r.createElement(p.A,{variant:"body2",color:"textSecondary",style:{marginTop:10}},"Parameters loaded from model file override those determined from data.",r.createElement("br",null),"Supported files types: xml (uncompressed and zip archives)")),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Uploaded file details"),r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(z.A,null,r.createElement(J.A,null,r.createElement(q.A,null,r.createElement(K.A,{width:100},"File name"),r.createElement(K.A,null,t.modelMgr.modelsParamFileName)))))))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(W.A,{light:!0,style:{margin:"30px 0"}})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Time intervals and diagnosis rates modelling")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(pa,{timeIntCollMgr:t.modelMgr.timeIntCollMgr})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(ga,{timeIntCollMgr:t.modelMgr.timeIntCollMgr}))))})),Aa=e=>{const{minYear:t,maxYear:a,value:n,onChange:l}=e;return r.createElement(Ue.Ay,{min:t,max:a,value:n,marks:!0,onChange:l,sx:{"& *":{fontSize:"9px"}},valueLabelDisplay:"on",valueLabelFormat:e=>e.toFixed(),"aria-labelledby":"range-slider",getAriaLabel:e=>e.toFixed(),getAriaValueText:e=>e.toFixed(),color:"secondary"})},Ea=(0,l.PA)((e=>{const{appMgr:t}=e,a=t.modelMgr.optimalYears.All[0]-1,n=t.modelMgr.optimalYears.All[1];return r.createElement(Z.A,{sx:{padding:"10px"}},r.createElement(p.A,{variant:"overline"},"Advanced parameters"),r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,{hover:!1},r.createElement(K.A,{width:"50px"},"Idx"),r.createElement(K.A,{width:"330px"},"Parameter"),r.createElement(K.A,null,"Value"))),r.createElement(J.A,null,r.createElement(q.A,null,r.createElement(K.A,null,"1."),r.createElement(K.A,null,"Range of calculations"),r.createElement(K.A,{sx:{pt:5,pr:3,pb:1}},r.createElement(Aa,{minYear:a,maxYear:n,value:[t.modelMgr.minYear,t.modelMgr.maxYear],onChange:(e,a)=>{t.modelMgr.setMinYear(a[0]),t.modelMgr.setMaxYear(a[1])}}))),r.createElement(q.A,null,r.createElement(K.A,null,"2."),r.createElement(K.A,null,"HIV diagnoses, total"),r.createElement(K.A,{sx:{pt:5,pr:3,pb:1}},r.createElement(Aa,{minYear:a,maxYear:n,value:[t.modelMgr.minFitPos,t.modelMgr.maxFitPos],onChange:(e,a)=>{t.modelMgr.setMinFitPos(a[0]),t.modelMgr.setMaxFitPos(a[1])}}))),r.createElement(q.A,null,r.createElement(K.A,null,"3."),r.createElement(K.A,null,"HIV diagnoses, by CD4 count"),r.createElement(K.A,{sx:{pt:5,pr:3,pb:1}},r.createElement(Aa,{minYear:a,maxYear:n,value:[t.modelMgr.minFitCD4,t.modelMgr.maxFitCD4],onChange:(e,a)=>{t.modelMgr.setMinFitCD4(a[0]),t.modelMgr.setMaxFitCD4(a[1])}}))),r.createElement(q.A,null,r.createElement(K.A,null,"4."),r.createElement(K.A,null,"AIDS diagnoses, total"),r.createElement(K.A,{sx:{pt:5,pr:3,pb:1}},r.createElement(Aa,{minYear:a,maxYear:n,value:[t.modelMgr.minFitAIDS,t.modelMgr.maxFitAIDS],onChange:(e,a)=>{t.modelMgr.setMinFitAIDS(a[0]),t.modelMgr.setMaxFitAIDS(a[1])}}))),r.createElement(q.A,null,r.createElement(K.A,null,"5."),r.createElement(K.A,null,"HIV/AIDS diagnoses, total"),r.createElement(K.A,{sx:{pt:5,pr:3,pb:1}},r.createElement(Aa,{minYear:a,maxYear:n,value:[t.modelMgr.minFitHIVAIDS,t.modelMgr.maxFitHIVAIDS],onChange:(e,a)=>{t.modelMgr.setMinFitHIVAIDS(a[0]),t.modelMgr.setMaxFitHIVAIDS(a[1])}}))),r.createElement(q.A,null,r.createElement(K.A,null,"6."),r.createElement(K.A,null,"Do you have data from the start of the epidemic?"),r.createElement(K.A,null,r.createElement(lt.A,{row:!0,value:t.modelMgr.fullData,onChange:e=>t.modelMgr.setFullData("true"===e.target.value)},r.createElement(Le.A,{value:!0,control:r.createElement(nt.A,{color:"primary"}),label:"Yes"}),r.createElement(Le.A,{value:!1,control:r.createElement(nt.A,{color:"primary"}),label:"No"})))),r.createElement(q.A,null,r.createElement(K.A,null,"7."),r.createElement(K.A,null,"Knots count"),r.createElement(K.A,null,r.createElement(Ne.A,{style:{width:"120px",fontSize:"0.75rem"},value:t.modelMgr.knotsCount,onChange:e=>{const a=parseInt(e.target.value);t.modelMgr.setKnotsCount(a)},type:"number",inputProps:{min:1,max:10}}))),r.createElement(q.A,null,r.createElement(K.A,null,"8."),r.createElement(K.A,null,"Start at zero"),r.createElement(K.A,null,r.createElement(lt.A,{row:!0,value:t.modelMgr.startIncZero,onChange:e=>t.modelMgr.setStartIncZero("true"===e.target.value)},r.createElement(Le.A,{value:!0,control:r.createElement(nt.A,{color:"primary"}),label:"Yes"}),r.createElement(Le.A,{value:!1,control:r.createElement(nt.A,{color:"primary"}),label:"No"})))),r.createElement(q.A,null,r.createElement(K.A,null,"9."),r.createElement(K.A,null,"Prevent sudden changes at end of observation interval"),r.createElement(K.A,null,r.createElement(lt.A,{row:!0,value:t.modelMgr.maxIncCorr,onChange:e=>t.modelMgr.setMaxIncCorr("true"===e.target.value)},r.createElement(Le.A,{value:!0,control:r.createElement(nt.A,{color:"primary"}),label:"Yes"}),r.createElement(Le.A,{value:!1,control:r.createElement(nt.A,{color:"primary"}),label:"No"})))),r.createElement(q.A,null,r.createElement(K.A,null,"10."),r.createElement(K.A,null,"Maximum likelihood distribution"),r.createElement(K.A,null,r.createElement(lt.A,{row:!0,value:t.modelMgr.distributionFit,onChange:e=>t.modelMgr.setDistributionFit(e.target.value)},r.createElement(Le.A,{value:"POISSON",control:r.createElement(nt.A,{color:"primary"}),label:"Poisson"}),r.createElement(Le.A,{value:"NEGATIVE_BINOMIAL",control:r.createElement(nt.A,{color:"primary"}),label:"Negative Binomial"})))),r.createElement(q.A,null,r.createElement(K.A,null,"11."),r.createElement(K.A,null,"Extra diagnosis rate due to non-AIDS symptoms"),r.createElement(K.A,null,r.createElement(Ne.A,{style:{width:"120px",fontSize:"0.75rem"},value:t.modelMgr.delta4Fac,onChange:e=>t.modelMgr.setDelta4Fac(e.target.value),type:"number",inputProps:{min:0,max:10,step:.01}}))),r.createElement(q.A,null,r.createElement(K.A,null,"12."),r.createElement(K.A,null,"Country-specific settings"),r.createElement(K.A,null,r.createElement(ge.A,{value:t.modelMgr.country,onChange:e=>t.modelMgr.setCountry(e.target.value),style:{width:"120px",fontSize:"0.75rem"}},r.createElement(he.A,{value:"OTHER",dense:!0},"Other"),r.createElement(he.A,{value:"NL",dense:!0},"NL")))))))})),Ma=e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",onClick:e=>t.uiStateMgr.setActivePageId(4,3)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Advanced paramaters")),r.createElement(F.Ay,{item:!0,xs:2}),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Ea,e))))},ya=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.bootstrapEnabled,onClick:e=>t.uiStateMgr.setActivePageId(4,4)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Perform main fit of HIV model")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(p.A,{variant:"body2",color:"textSecondary"},"1. Migrant connection"),r.createElement(lt.A,{row:!0,value:t.modelMgr.migrConnFlag,onChange:e=>t.modelMgr.setMigrConnFlag("true"===e.target.value)},r.createElement(Le.A,{value:!0,control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"Yes"}),r.createElement(Le.A,{value:!1,control:r.createElement(nt.A,{color:"primary",size:"small"}),label:"No"})),r.createElement(Ee.A,null,"Enable alternative HIV modelling processing with migrant status information used."),r.createElement(p.A,{variant:"body2",color:"textSecondary",style:{marginTop:20}},"2. Population"),r.createElement(Ae.A,{style:{width:"100%"}},r.createElement(ge.A,{value:t.popCombMgr.selectedCombination.id,onChange:e=>{t.popCombMgr.setSelectedCombination(e.target.value)},style:{width:"100%",fontSize:"0.75rem"}},t.popCombMgr.combinationsArray.map((e=>r.createElement(he.A,{key:e.id,value:e.id,dense:!0},e.name)))),r.createElement(Ee.A,null,"Select population")),r.createElement(p.A,{variant:"body2",color:"textSecondary",style:{width:"100%",marginTop:20}},"3. Time intervals and diagnosis rates"),r.createElement(Ae.A,{style:{marginBottom:20}},r.createElement(ge.A,{value:t.modelMgr.timeIntCollMgr.selectedRunCollectionId,onChange:e=>{t.modelMgr.timeIntCollMgr.setSelectedRunCollectionId(e.target.value)},style:{width:"100%",fontSize:"0.75rem"}},t.modelMgr.timeIntCollMgr.collectionsArray.map(((e,t)=>r.createElement(he.A,{key:t,value:e.id,dense:!0},e.name)))),r.createElement(Ee.A,null,"Select time intervals and diagnosis rates modelling matrix")),r.createElement(ae,{onClick:()=>{t.modelMgr.runModels()},disabled:t.modelMgr.modelsRunInProgress}," Run main model"),r.createElement(T.A,{onClick:()=>{t.modelMgr.cancelModels()},color:"primary",style:{marginLeft:20},disabled:!t.modelMgr.modelsRunInProgress},"Cancel"),r.createElement(Ft,{progress:t.modelMgr.modelsRunProgress})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Run log"),r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.modelMgr.modelsRunLog},style:{overflowX:"auto",fontSize:"0.75rem"}})))))})),Sa=(0,l.PA)((e=>{const{appMgr:t}=e;return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.modellingOutputsEnabled,onClick:e=>t.uiStateMgr.setActivePageId(4,5)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Perform bootstrap fit of HIV model")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(Ae.A,{style:{width:"100%",marginTop:20}},r.createElement(Ne.A,{style:{width:"100%",fontSize:"0.75rem"},value:t.modelMgr.bootstrapCount,onChange:e=>t.modelMgr.setBootstrapCount(e.target.value),type:"number"}),r.createElement(Ee.A,null,"Set the number of iterations")),r.createElement(Ae.A,{sx:{marginTop:"20px",marginBottom:"20px",width:"100%"}},r.createElement(lt.A,{row:!0,value:t.modelMgr.bootstrapType,onChange:e=>t.modelMgr.setBootstrapType(e.target.value)},r.createElement(Le.A,{value:"PARAMETRIC",control:r.createElement(nt.A,{color:"primary"}),label:"Parametric",sx:{"& span":{fontSize:"0.75rem"}}}),r.createElement(Le.A,{value:"NON-PARAMETRIC",control:r.createElement(nt.A,{color:"primary"}),label:"Non-parametric",disabled:!t.uiStateMgr.nonParametricBootstrapEnabled,sx:{"& span":{fontSize:"0.75rem"}}})),r.createElement(Ee.A,null,"Set the bootstrap type")),r.createElement(ae,{onClick:()=>t.modelMgr.runBootstrap(),disabled:t.modelMgr.bootstrapRunInProgress},"Run bootstrap"),r.createElement(T.A,{onClick:()=>t.modelMgr.cancelBootstrap(),color:"primary",style:{marginLeft:20},disabled:!t.modelMgr.bootstrapRunInProgress},"Cancel"),r.createElement(Ft,{progress:t.modelMgr.bootstrapRunProgress})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Run log"),r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.modelMgr.bootstrapRunLog},style:{overflowX:"auto",fontSize:"0.75rem"}})))))}));var ba=a(784);const fa=(0,l.PA)((e=>{const{tableData:t,maxHeight:a}=e;return D(t)?null:r.createElement(ba.A,{style:{maxHeight:a||300}},r.createElement(z.A,{size:"small",stickyHeader:!0,sx:{"& > .MuiTableHead-root":{"& > .MuiTableRow-root":{"& > .MuiTableCell-root":{padding:"5px",fontSize:"0.6rem",backgroundColor:"white",textAlign:"right",whiteSpace:"nowrap"}}},"& > .MuiTableBody-root":{"& > .MuiTableRow-root":{"& > .MuiTableCell-root":{padding:"5px",fontSize:"0.6rem",backgroundColor:"transparent",textAlign:"right",whiteSpace:"nowrap"}}}}},r.createElement(ue.A,null,r.createElement(q.A,null,t.colNames.map(((e,t)=>r.createElement(K.A,{key:t},e))))),r.createElement(J.A,null,t.values.map(((e,a)=>r.createElement(q.A,{hover:!0,key:a},t.colNames.map(((e,n)=>r.createElement(K.A,{key:n},t.values[a][n])))))))))})),Ia=(0,l.PA)((e=>{const{appMgr:t}=e;if(D(t.modelMgr.plotData))return null;const a=["#69b023","#c7c7c7"],n={orient:"horizontal",left:"center",top:0,selector:!1};return r.createElement(F.Ay,{container:!0,spacing:2,style:{marginTop:20}},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"A. HIV diagnoses, total")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable1Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot1Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"B. HIV diagnoses, CD4 ","≥"," 500")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable2Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot2Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"C. HIV diagnoses, CD4 350 - 499")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable3Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot3Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"D. HIV diagnoses, CD4 200 - 349")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable4Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot4Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"E. HIV diagnoses, CD4 ","<"," 200")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable5Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot5Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"F. HIV/AIDS diagnoses")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable6Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot6Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"G. AIDS diagnoses, total")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:t.modelMgr.gofTable7Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:t.modelMgr.gofPlot7Data,legendOptions:n,color:a,showConfBounds:t.modelMgr.showConfBounds})))})),Da=(0,l.PA)((e=>{const{appMgr:t}=e;return D(t.modelMgr.plotData)?null:r.createElement(F.Ay,{container:!0,spacing:2,style:{marginTop:20}},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"A. Main results")),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(fa,{tableData:t.modelMgr.mainOutputTableData,maxHeight:"100%"})))})),xa=(0,l.PA)((({appMgr:e})=>{if(D(e.modelMgr.plotData))return null;const t=["#69b023","#7bbcc0","#9d8b56","#ce80ce","#c7c7c7"],a={orient:"horizontal",left:"center",top:0,selector:!1};return console.log(e.modelMgr.outputTable1Data),r.createElement(F.Ay,{container:!0,spacing:2,style:{marginTop:20}},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"A. HIV infections per year")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:e.modelMgr.outputTable1Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:e.modelMgr.outputPlot1Data,legendOptions:a,color:t,showConfBounds:e.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"B. Time to diagnosis")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:e.modelMgr.outputTable2Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Years",data:e.modelMgr.outputPlot2Data,legendOptions:a,color:t,showConfBounds:e.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"C. Total number of HIV-infected"),r.createElement(p.A,{variant:"body2",color:"textSecondary",sx:{mt:1}},"Count of undiagnosed migrants can be underestimated")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:e.modelMgr.outputTable3Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Count",data:e.modelMgr.outputPlot3Data,legendOptions:a,color:t,showConfBounds:e.modelMgr.showConfBounds})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"D. Proportion undiagnosed of all those alive")),r.createElement(F.Ay,{item:!0,xs:4},r.createElement(fa,{tableData:e.modelMgr.outputTable4Data})),r.createElement(F.Ay,{item:!0,xs:8},r.createElement(ea,{xAxisTitle:"Year",yAxisTitle:"Proportion",data:e.modelMgr.outputPlot4Data,legendOptions:a,color:t,showConfBounds:e.modelMgr.showConfBounds})))})),Ca=(0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState(0);return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",onClick:()=>t.uiStateMgr.setActivePageId(6)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"HIV Modelling results")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(Le.A,{control:r.createElement(We.A,{checked:t.modelMgr.showConfBounds,onChange:e=>t.modelMgr.setShowConfBounds(e.target.checked),color:"primary",size:"small"}),label:"Show confidence bounds"}),r.createElement(p.A,{variant:"body2",color:"textSecondary",sx:{mt:1}},"Enable plotting confidence bounds in the output plots if available."),r.createElement(p.A,{variant:"body2",color:"textSecondary",sx:{mt:1}},'Dotted curves represent data not used in the modelling (see year ranges in tab "Advanced").')),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(Yt.A,{value:a,onChange:(e,t)=>n(t),indicatorColor:"primary",textColor:"primary"},r.createElement(wt.A,{label:"Goodness of fit"}),r.createElement(wt.A,{label:"Tables"}),r.createElement(wt.A,{label:"Graphs"})),0===a&&r.createElement(Ia,{appMgr:t}),1===a&&r.createElement(Da,{appMgr:t}),2===a&&r.createElement(xa,{appMgr:t})))))})),va=(0,l.PA)((e=>{const{appMgr:t}=e,a=t.uiStateMgr.activeSubPageId;return r.createElement(r.Fragment,null,0===a&&r.createElement(da,e),1===a&&r.createElement(ha,e),2===a&&r.createElement(Ma,e),3===a&&r.createElement(ya,e),4===a&&r.createElement(Sa,e),5===a&&r.createElement(Ca,e))}));var Pa=a(199);const Ra=(0,l.PA)((e=>{const{appMgr:t}=e,a=["reportHTML","reportPDF","reportLATEX","reportWORD"];r.useEffect((()=>(t.unbindShiny(a),t.bindShiny(),()=>t.unbindShiny(a))));return r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(h.A,{display:"flex",justifyContent:"flex-end"},r.createElement(T.A,{size:"small",color:"primary",disabled:!t.uiStateMgr.outputsPageEnabled,onClick:()=>t.uiStateMgr.setActivePageId(6)},"Next step"))),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Select report")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(Ae.A,{style:{width:"100%",marginTop:20,marginBottom:20}},r.createElement(ge.A,{value:1,style:{width:"100%",fontSize:"0.75rem"}},r.createElement(he.A,{value:1,dense:!0},"Report on adjusted data")),r.createElement(Ee.A,null,"Select report type")),r.createElement(ae,{onClick:()=>t.reportMgr.createReport(),disabled:t.reportMgr.creatingReportInProgress},"Create report"),r.createElement(T.A,{onClick:()=>t.reportMgr.cancelCreatingReport(),color:"primary",style:{marginLeft:20},disabled:!t.reportMgr.creatingReportInProgress},"Cancel"),r.createElement(Ft,{progress:t.reportMgr.creatingReportInProgress})),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(p.A,{variant:"overline"},"Parameters for report on adjusted data"),r.createElement(ft.A,null,r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.reportMgr.adjustReportParams.reportingDelay,onChange:(e,a)=>t.reportMgr.setAdjustReportReportingDelay(a),color:"primary"}),label:"Adjust count of cases for reporting delay"}),r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.reportMgr.adjustReportParams.smoothing,onChange:(e,a)=>t.reportMgr.setAdjustReportSmoothing(a),color:"primary"}),label:"Apply plot curves smoothing"}),r.createElement(Le.A,{control:r.createElement(pe.A,{checked:t.reportMgr.adjustReportParams.cd4ConfInt,onChange:(e,a)=>t.reportMgr.setAdjustReportCD4ConfInt(a),color:"primary"}),label:"Plot inter-quartile range in CD4 count plots"})),r.createElement(T.A,{color:"primary",onClick:()=>t.reportMgr.restoreDefaults()},"Restore defaults"))),t.reportMgr.report&&r.createElement(r.Fragment,null,r.createElement(F.Ay,{item:!0,xs:12},r.createElement(W.A,{light:!0,style:{margin:"30px 0"}})),r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"View and download")),r.createElement(F.Ay,{item:!0,xs:2},r.createElement(Pa.A,{download:!0,href:"#",id:"reportHTML",className:"shiny-download-link"},"HTML"),r.createElement(Pa.A,{download:!0,href:"#",id:"reportPDF",className:"shiny-download-link",style:{marginLeft:10}},"PDF"),r.createElement(Pa.A,{download:!0,href:"#",id:"reportLATEX",className:"shiny-download-link",style:{marginLeft:10}},"Latex"),r.createElement(Pa.A,{download:!0,href:"#",id:"reportWORD",className:"shiny-download-link",style:{marginLeft:10}},"MS Word")),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement("div",{dangerouslySetInnerHTML:{__html:t.reportMgr.report},style:{overflowX:"auto"}}))))))})),Ta=(0,l.PA)((e=>{const{appMgr:t}=e,a=["downAdjDataCSV","downAdjDataRDS","downAdjDataDTA","downRepDelDataCSV","downRepDelDataRDS","downRepDelDataDTA","downMainFitDetailedRDS","downMainFitCSV","downMainFitRDS","downMainFitDTA","downBootFitDetailedRDS","downBootFitCSV","downBootFitRDS","downBootFitDTA","downBootStatDetailedRDS","downBootStatCSV","downBootStatRDS","downBootStatDTA","downFitXLSM","downFitXLSX"];r.useEffect((()=>(t.unbindShiny(a),t.bindShiny(),()=>t.unbindShiny(a))));let n=null;n=t.uiStateMgr.adjustmentsOutputsEnabled?r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downAdjDataCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downAdjDataRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downAdjDataDTA",className:"shiny-download-link"},"dta (Stata)")):r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)");let l=null;l=t.uiStateMgr.repDelOutputsEnabled?r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downRepDelDataCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downRepDelDataRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downRepDelDataDTA",className:"shiny-download-link"},"dta (Stata)")):r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)");let i=null,s=null,o=null;t.uiStateMgr.modellingOutputsEnabled?(i=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downMainFitDetailedRDS",className:"shiny-download-link"},"rds (R)")),s=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downMainFitCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downMainFitRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downMainFitDTA",className:"shiny-download-link"},"dta (Stata)")),o=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downFitXLSM",className:"shiny-download-link"},"xlsm (Excel with Macro - automatic refresh)")," |",r.createElement("br",null),r.createElement(Pa.A,{download:!0,href:"#",id:"downFitXLSX",className:"shiny-download-link"},"xlsx (Excel without Macro - manual refresh)"))):(i=r.createElement(r.Fragment,null,"rds (R)"),s=r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)"),o=r.createElement(r.Fragment,null,"xlsm (Excel with Macro - automatic refresh) |",r.createElement("br",null),"xlsx (Excel without Macro - manual refresh)"));let m=null,c=null,d=null,u=null;return t.uiStateMgr.bootstrapOutputsEnabled?(m=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downBootFitDetailedRDS",className:"shiny-download-link"},"rds (R)")),c=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downBootFitCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downBootFitRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downBootFitDTA",className:"shiny-download-link"},"dta (Stata)")),d=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downBootStatDetailedRDS",className:"shiny-download-link"},"rds (R)")),u=r.createElement(r.Fragment,null,r.createElement(Pa.A,{download:!0,href:"#",id:"downBootStatCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downBootStatRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(Pa.A,{download:!0,href:"#",id:"downBootStatDTA",className:"shiny-download-link"},"dta (Stata)"))):(m=r.createElement(r.Fragment,null,"rds (R)"),c=r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)"),d=r.createElement(r.Fragment,null,"rds (R)"),u=r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)")),r.createElement(G,null,r.createElement(F.Ay,{container:!0,spacing:2,style:{paddingTop:43}},r.createElement(F.Ay,{item:!0,xs:12},r.createElement(p.A,{variant:"h6"},"Outputs")),r.createElement(F.Ay,{item:!0,xs:2},"Adjustments"),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,null,r.createElement(K.A,{width:"300px"},"Description"),r.createElement(K.A,{width:"320px"},"Format"),r.createElement(K.A,null,"Description"))),r.createElement(J.A,null,r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Adjusted case-based data"),r.createElement(K.A,null,n),r.createElement(K.A,null,"Flat table")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Reporting delays distribution"),r.createElement(K.A,null,l),r.createElement(K.A,null,"Flat table")))))),r.createElement(F.Ay,{item:!0,xs:2},"HIV Model"),r.createElement(F.Ay,{item:!0,xs:10},r.createElement(Z.A,{style:{padding:10}},r.createElement(z.A,null,r.createElement(ue.A,null,r.createElement(q.A,null,r.createElement(K.A,{width:"300px"},"Description"),r.createElement(K.A,{width:"320px"},"Format"),r.createElement(K.A,null,"Description"))),r.createElement(J.A,null,r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Detailed main fit model results"),r.createElement(K.A,null,i),r.createElement(K.A,null,"R list object")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Main outputs of main fit model"),r.createElement(K.A,null,s),r.createElement(K.A,null,"Flat table")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Detailed bootstrap fits model results"),r.createElement(K.A,null,m),r.createElement(K.A,null,"R list object")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Main outputs of bootstrap fits"),r.createElement(K.A,null,c),r.createElement(K.A,null,"Flat table")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Detailed bootstrap statistics results"),r.createElement(K.A,null,d),r.createElement(K.A,null,"R list object")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Main outputs bootstrap statistics"),r.createElement(K.A,null,u),r.createElement(K.A,null,"Flat table")),r.createElement(q.A,{hover:!0},r.createElement(K.A,null,"Main outputs of main fit and bootstrap"),r.createElement(K.A,null,o),r.createElement(K.A,null,"Excel file with tables and charts"))))))))}));var Na=a(9564),Ya=a(9341);const wa=(0,l.PA)((e=>{const{notificationsMgr:t}=e,a=(e,a)=>{"clickaway"!==a&&t.clearMsg()};return r.createElement(Na.A,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.hasMsg,autoHideDuration:5e3,onClose:a,message:t.msgInfo.msg,action:r.createElement(r.Fragment,null,r.createElement(A.A,{size:"small","aria-label":"close",color:"inherit",onClick:a},r.createElement(Ya.A,{fontSize:"small"})))})}));function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Fa.apply(null,arguments)}const Oa=({pageId:e,activePageId:t,children:a,...n})=>r.createElement(p.A,Fa({component:"div",role:"tabpanel",hidden:t!==e,id:`wrapped-tabpanel-${e}`,"aria-labelledby":`wrapped-tab-${e}`,style:{flexGrow:1,overflowY:"scroll"}},n),t===e&&r.createElement(h.A,{p:2},a)),_a=(0,l.WQ)("appMgr")((0,l.PA)((e=>{const{appMgr:t}=e,[a,n]=r.useState(!1);{const e=e=>{e.preventDefault(),e.returnValue=""};r.useEffect((()=>(window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e))),[])}const l=t.shinyReady?"#69b023":"#f44336",i=r.createElement(u.A,{position:"sticky",sx:{backgroundColor:`${l}`}},r.createElement(g.A,{variant:"dense",disableGutters:!0},r.createElement(p.A,{variant:"h4",sx:{fontWeight:"bold",color:"white",ml:"10px"}},t.packageDetails.Title),r.createElement(p.A,{variant:"overline",sx:{color:"white",ml:"20px",lineHeight:1.5}},"Version: ",t.packageDetails.Version," ",r.createElement("br",null),"Build date: ",t.packageDetails.Date),r.createElement(h.A,{flexGrow:1}),r.createElement(p.A,{variant:"overline",sx:{color:"white"}},"Engine state: ",t.shinyStateHuman),r.createElement(A.A,{onClick:()=>n(!a),size:"large",sx:{color:"white"}},r.createElement(E.A,null))));return r.createElement(h.A,{display:"flex",flexGrow:1,flexDirection:"column",sx:{overflow:"hidden"},p:0},r.createElement(w,Fa({},e,{open:a,onClose:()=>n(!1)})),i,r.createElement(h.A,{display:"flex",flexGrow:1,flexDirection:"row",sx:{overflow:"hidden",backgroundColor:"#fafafa"},p:0},r.createElement(C,{pages:t.uiStateMgr.pages,activePageId:t.uiStateMgr.activePageId,onPageChange:(e,a)=>{t.uiStateMgr.setActivePageId(e,a)}}),r.createElement(Oa,{pageId:0,activePageId:t.uiStateMgr.activePageId},r.createElement(L,e)),r.createElement(Oa,{pageId:1,activePageId:t.uiStateMgr.activePageId},r.createElement(He,e)),r.createElement(Oa,{pageId:2,activePageId:t.uiStateMgr.activePageId},r.createElement(St,e)),r.createElement(Oa,{pageId:3,activePageId:t.uiStateMgr.activePageId},r.createElement(_t,e)),r.createElement(Oa,{pageId:4,activePageId:t.uiStateMgr.activePageId},r.createElement(ra,e)),r.createElement(Oa,{pageId:5,activePageId:t.uiStateMgr.activePageId},r.createElement(va,e)),r.createElement(Oa,{pageId:6,activePageId:t.uiStateMgr.activePageId},r.createElement(Ra,e)),r.createElement(Oa,{pageId:7,activePageId:t.uiStateMgr.activePageId},r.createElement(Ta,e))),r.createElement(wa,{notificationsMgr:t.notificationsMgr}))}))),ka=(0,m.A)({typography:{fontSize:12},palette:{primary:{main:"#69b023"},secondary:{main:"#bedfe1"}},components:{MuiStepLabel:{styleOverrides:{label:{color:"black","&.Mui-active":{fontWeight:"bold"},"&.Mui-completed":{fontWeight:"bold"},"&.Mui-disabled":{color:"rgba(0, 0, 0, 0.5)"}},iconContainer:{"& text":{fill:"white"}}}},MuiStepConnector:{styleOverrides:{vertical:{marginLeft:"10px"}}},MuiStepContent:{styleOverrides:{root:{marginLeft:"10px","& .MuiList-root":{paddingBottom:"0px"},"& .MuiButtonBase-root":{padding:"6px",fontSize:"0.75rem"}}}},MuiAutocomplete:{styleOverrides:{option:{fontSize:"0.75rem"}}},MuiTableRow:{defaultProps:{hover:!0},styleOverrides:{root:{"&:last-child td":{borderBottom:"0px"}}}},MuiTableCell:{styleOverrides:{root:{borderBottom:"1px solid rgba(240, 240, 240, 1)"},head:{fontWeight:"bold"}}},MuiSelect:{defaultProps:{variant:"standard"},styleOverrides:{select:{paddingBottom:"5px"}}},MuiTextField:{defaultProps:{variant:"standard"}}}}),ja=()=>r.createElement(c.A,{injectFirst:!0},r.createElement(d.A,{theme:ka},r.createElement(r.Fragment,null,r.createElement(o.Ay,null),r.createElement(_a,null))));var Ba=a(5116),Ha=a(6378);class Ua{rootMgr=null;lastEventType=null;completedSteps=null;pages=[{title:"Welcome",completed:!1,disabled:!1,subPages:[]},{title:"Input data upload",completed:!1,disabled:!0,subPages:[{title:"Case-based data",disabled:!1},{title:"Aggregated data",disabled:!1}],activeSubPageId:0},{title:"Case-based data summary",completed:!1,disabled:!0,subPages:[],description:"Subset of case-based data can be selected here for adjustments and modelling"},{title:"Adjustments",completed:!1,disabled:!0,subPages:[{title:"Inputs",disabled:!1},{title:"Run",disabled:!1}],activeSubPageId:0},{title:"Migration",completed:!1,disabled:!1,subPages:[]},{title:"Modelling",completed:!1,disabled:!0,subPages:[{title:"Populations",disabled:!1},{title:"Inputs",disabled:!1},{title:"Advanced",disabled:!1},{title:"Run Main Fit",disabled:!1},{title:"Run Bootstrap",disabled:!1},{title:"Tables and charts",disabled:!1}],activeSubPageId:0},{title:"Reports",completed:!1,disabled:!0,subPages:[]},{title:"Outputs",completed:!1,disabled:!0,subPages:[]}];activePageId=0;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{completedSteps:Ba.sH,pages:Ba.sH,activePageId:Ba.sH,lastEventType:Ba.sH,pagesTitles:Ba.EW,uploadPageEnabled:Ba.EW,summaryPageEnabled:Ba.EW,adjustmentsPageEnabled:Ba.EW,migrantPageEnabled:Ba.EW,modellingPageEnabled:Ba.EW,reportsPageEnabled:Ba.EW,outputsPageEnabled:Ba.EW,caseBasedAttrMappingEnabled:Ba.EW,caseBasedOrigGroupingProvisioned:Ba.EW,caseBasedOrigGroupingEnabled:Ba.EW,migrConnEnabled:Ba.EW,bootstrapEnabled:Ba.EW,adjustmentsOutputsEnabled:Ba.EW,repDelOutputsEnabled:Ba.EW,modellingOutputsEnabled:Ba.EW,bootstrapOutputsEnabled:Ba.EW,caseBasedDataUnloadEnabled:Ba.EW,aggrDataUnloadEnabled:Ba.EW,setCompletedSteps:Ba.XI,setActivePageId:Ba.XI,setLastEventType:Ba.XI,setSubPageDisabledStatus:Ba.XI,setUIState:Ba.XI})}get pagesTitles(){return this.pages.map((e=>e.title))}get activeSubPageId(){return this.pages[this.activePageId].activeSubPageId}get uploadPageEnabled(){return be("SESSION_INITIALIZED",this.completedSteps)}get summaryPageEnabled(){return be("CASE_BASED_SUMMARY",this.completedSteps)}get adjustmentsPageEnabled(){return be("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)}get migrantPageEnabled(){return be("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)&&this.rootMgr.migrMgr.dataCompatibleFlag}get modellingPageEnabled(){return be("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)||be("AGGR_READ",this.completedSteps)}get reportsPageEnabled(){return be("CASE_BASED_ADJUSTMENTS",this.completedSteps)}get outputsPageEnabled(){return be("CASE_BASED_ADJUSTMENTS",this.completedSteps)||be("MODELLING",this.completedSteps)}get caseBasedAttrMappingEnabled(){return be("CASE_BASED_READ",this.completedSteps)}get caseBasedDataUnloadEnabled(){return be("CASE_BASED_READ",this.completedSteps)}get aggrDataUnloadEnabled(){return be("AGGR_READ",this.completedSteps)}get caseBasedOrigGroupingProvisioned(){return be("CASE_BASED_ATTR_MAPPING",this.completedSteps)}get caseBasedOrigGroupingEnabled(){return this.caseBasedOrigGroupingProvisioned&&0===this.rootMgr.origGroupMgr.unusedOrigins.length}get migrConnEnabled(){return be("CASE_BASED_MIGRATION",this.completedSteps)}get bootstrapEnabled(){return be("MODELLING",this.completedSteps)}get nonParametricBootstrapEnabled(){return be("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)}get adjustmentsOutputsEnabled(){return be("CASE_BASED_ADJUSTMENTS",this.completedSteps)}get repDelOutputsEnabled(){return be("CASE_BASED_ADJUSTMENTS",this.completedSteps)&&be("REPORTING_DELAYS",this.rootMgr.adjustMgr.runAdjustmentsTypes)}get modellingOutputsEnabled(){return be("MODELLING",this.completedSteps)}get bootstrapOutputsEnabled(){return be("BOOTSTRAP",this.completedSteps)}setCompletedSteps=e=>{this.completedSteps=Ie(e),this.refreshPagesStatus()};setActivePageId=(e,t=-1)=>{this.pages[e].disabled?this.rootMgr.notificationsMgr.setMsg("Page this link refers to is not enabled"):(this.activePageId=e,-1!==t&&t<this.pages[e].subPages.length&&(this.pages[e].activeSubPageId=t),this.refreshPagesStatus())};setSubPageDisabledStatus=(e,t,a)=>{this.pages[e].subPages[t].disabled=a};setLastEventType=e=>this.lastEventType=e;refreshPagesStatus=()=>{this.pages[0].completed=this.activePageId>0,this.pages[1].completed=this.activePageId>1,this.pages[2].completed=this.activePageId>2,this.pages[3].completed=this.activePageId>3,this.pages[4].completed=this.activePageId>4,this.pages[1].disabled=!this.uploadPageEnabled,this.pages[2].disabled=!this.summaryPageEnabled,this.pages[3].disabled=!this.adjustmentsPageEnabled,this.pages[4].disabled=!this.migrantPageEnabled,this.pages[5].disabled=!this.modellingPageEnabled,this.pages[6].disabled=!this.reportsPageEnabled,this.pages[7].disabled=!this.outputsPageEnabled,this.setSubPageDisabledStatus(5,4,!this.bootstrapEnabled),this.setSubPageDisabledStatus(5,5,!this.modellingOutputsEnabled)};setUIState=e=>{this.lastEventType=e.lastEventType,this.completedSteps=e.completedSteps,this.pages=e.pages,this.activePageId=e.activePageId}}const La=e=>`${e}_${("000000"+(2176782336*Math.random()|0).toString(36)).slice(-6)}`;class Wa{rootMgr=null;msgInfo={key:null,msg:null};constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{msgInfo:Ba.sH,hasMsg:Ba.EW,setMsg:Ba.XI,clearMsg:Ba.XI,setUIState:Ba.XI})}get hasMsg(){return null!==this.msgInfo.msg}setMsg=e=>{this.msgInfo={msg:e,key:La("msg")}};clearMsg=()=>{this.msgInfo={key:null,msg:null}};setUIState=e=>{this.msgInfo=e.msgInfo}}class Xa{rootMgr=null;mapping=[];actionStatus=null;actionMessage=null;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{mapping:Ba.sH,actionStatus:Ba.sH,actionMessage:Ba.sH,setMapping:Ba.XI,setOrigCol:Ba.XI,setDefVal:Ba.XI,applyMapping:Ba.XI,setActionStatus:Ba.XI,setActionMessage:Ba.XI,actionValid:Ba.EW,setUIState:Ba.XI})}setMapping=e=>{this.mapping=e,this.runCheck()};setActionStatus=e=>this.actionStatus=e;setActionMessage=e=>this.actionMessage=e;setOrigCol=(e,t)=>{const a=this.mapping.findIndex((t=>t.attribute===e));-1!==a?(this.mapping[a].origColName=""!==t?t:null,this.runCheck()):console.log(`AttrMappingManager.setOrigCol: cannot find element with Attribute "${e}"`)};setDefVal=(e,t)=>{const a=this.mapping.findIndex((t=>t.attribute===e));-1!==a?(this.mapping[a].defaultValue=""!==t?t:null,this.runCheck()):console.log(`AttrMappingManager.setDefVal: cannot find element with Attribute "${e}"`)};applyMapping=()=>{this.rootMgr.btnClicked("attrMapping:AttrMappingArray",this.mapping)};runCheck=()=>{const e=[...this.mapping.filter((e=>e.origColName)).map((e=>e.origColName)).reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map)].filter((e=>e[1]>1)).map((e=>e[0]));let t=null,a=null;e.length>0?(a="FAIL",t=`Column${e.length>1?"s":""} "${e.join(", ")}" ${e.length>1?"are":"is"} mapped multiple times`):(a="SUCCESS",t="Attribute mapping is valid"),this.setActionStatus(a),this.setActionMessage(t)};get actionValid(){return D(this.actionStatus)?null:"SUCCESS"===this.actionStatus}setUIState=e=>{this.mapping=e.mapping,this.actionStatus=e.actionStatus,this.actionMessage=e.actionMessage}}const Ga=(e,t)=>{let a=Ie(t).map((t=>parseFloat(t.replace(e,""))));return Math.max(0,Math.max.apply(null,a.filter((e=>!isNaN(e)))))+1};class Va{rootMgr=null;distribution={FullRegionOfOrigin:[],Count:[]};groupings=[];preset="REPCOUNTRY + UNK + OTHER";repCountryGroupingIdx=null;actionStatus=null;actionMessage=null;migrantCompatibleStatus=null;migrantCompatibleMessage=null;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{distribution:Ba.sH,groupings:Ba.sH,preset:Ba.sH,actionStatus:Ba.sH,actionMessage:Ba.sH,migrantCompatibleStatus:Ba.sH,migrantCompatibleMessage:Ba.sH,distributionArray:Ba.EW,origins:Ba.EW,usedOrigins:Ba.EW,unusedOrigins:Ba.EW,groupingsJS:Ba.EW,usedNames:Ba.EW,setDistribution:Ba.XI,setGroupings:Ba.XI,setPreset:Ba.XI,setGroupName:Ba.XI,setGroupOrigin:Ba.XI,setMigrantOrigin:Ba.XI,removeGroupings:Ba.XI,addEmptyGrouping:Ba.XI,applyGroupings:Ba.XI,setActionStatus:Ba.XI,setActionMessage:Ba.XI,actionValid:Ba.EW,setUIState:Ba.XI}),(0,Ba.fm)((()=>{this.rootMgr.inputValueSet("checkOriginGrouping:OriginGroupingArray",this.groupingsJS)}))}get distributionArray(){const e=this.distribution.FullRegionOfOrigin,t=this.distribution.Count;return e.map(((a,r)=>({origin:e[r],count:t[r]})))}get origins(){return this.distribution.FullRegionOfOrigin.slice().sort()}get usedOrigins(){return[].concat.apply([],this.groupings.map((e=>e.FullRegionOfOrigin)))}get unusedOrigins(){return this.origins.filter((e=>!this.usedOrigins.includes(e)))}get groupingsJS(){return(0,Ba.HO)(this.groupings)}get usedNames(){return this.groupings.map((e=>e.GroupedRegionOfOrigin))}setDistribution=e=>this.distribution=e;setGroupings=e=>{this.groupings=e.map((e=>({GroupedRegionOfOrigin:e.GroupedRegionOfOrigin,FullRegionOfOrigin:Ie(e.FullRegionOfOrigin),MigrantRegionOfOrigin:e.MigrantRegionOfOrigin,groupCount:0}))),this.computeGroupCounts()};setPreset=e=>this.preset=e;setActionStatus=e=>this.actionStatus=e;setActionMessage=e=>this.actionMessage=e;setMigrantCompatibleStatus=e=>this.migrantCompatibleStatus=e;setMigrantCompatibleMessage=e=>this.migrantCompatibleMessage=e;setGroupName=(e,t)=>{this.groupings[e].GroupedRegionOfOrigin=t,this.preset="Custom"};setGroupOrigin=(e,t)=>{this.groupings[e].FullRegionOfOrigin=t,this.computeGroupCounts(),this.preset="Custom"};setMigrantOrigin=(e,t)=>{this.groupings[e].MigrantRegionOfOrigin=t,this.computeGroupCounts(),this.preset="Custom"};removeGroupings=e=>{this.groupings=De(this.groupings,e),this.computeGroupCounts(),this.preset="Custom"};addEmptyGrouping=()=>{this.groupings.push({GroupedRegionOfOrigin:`Group ${Ga("Group ",this.usedNames)}`,FullRegionOfOrigin:[],MigrantRegionOfOrigin:"",groupCount:0}),this.computeGroupCounts(),this.preset="Custom"};applyGroupings=()=>{this.rootMgr.btnClicked("originGrouping:OriginGroupingArray",this.groupings)};computeGroupCounts=()=>{this.groupings.forEach((e=>{e.groupCount=e.FullRegionOfOrigin.reduce(((e,t)=>{const a=this.distributionArray.findIndex((e=>e.origin==t));return-1!==a?e+this.distributionArray[a].count:e}),0)}))};get actionValid(){return D(this.actionStatus)?null:"SUCCESS"===this.actionStatus}setUIState=e=>{this.distribution=e.distribution,this.groupings=e.groupings,this.preset=e.preset,this.actionStatus=e.actionStatus,this.actionMessage=e.actionMessage,this.migrantCompatibleStatus=e.migrantCompatibleStatus,this.migrantCompatibleMessage=e.migrantCompatibleMessage}}var za=function(e){this.files=e,this.fileIndex=-1,this.aborted=!1,this.completed=!1,this.$run()};function $a(e,t,a){(e=>{var t=e.data("currentUploader");t&&t.abort(),e.removeAttr("data-restore")})($(t));var r=t.files;0!==r.length&&(this.shinyapp=e,this.id=t.id,this.el=t,this.progressCallback=a,za.call(this,r))}(function(){this.onBegin=function(e,t){setTimeout(t,0)},this.onFile=function(e,t){setTimeout(t,0)},this.onComplete=function(){},this.onAbort=function(){},this.abort=function(){this.completed||this.aborted||(this.aborted=!0,this.onAbort())},this.$getRun=function(){var e=this,t=!1;return function(){t||(t=!0,e.$run())}},this.$run=function(){if(!this.aborted&&!this.completed){if(this.fileIndex<0)return this.fileIndex=0,void this.onBegin(this.files,this.$getRun());if(this.fileIndex===this.files.length)return this.completed=!0,void this.onComplete();var e=this.files[this.fileIndex++];this.onFile(e,this.$getRun())}}}).call(za.prototype),$.extend($a.prototype,za.prototype),function(){this.makeRequest=function(e,t,a,r,n){this.shinyapp.makeRequest(e,t,a,r,n)},this.onBegin=function(e,t){var a=this;this.onProgress(0),this.totalBytes=0,this.progressBytes=0,$.each(e,(function(e,t){a.totalBytes+=t.size}));var r=$.map(e,(function(e){return{name:e.name,size:e.size,type:e.type}}));this.makeRequest("uploadInit",[r],(function(e){a.jobId=e.jobId,a.uploadUrl=e.uploadUrl,t()}),(function(e){a.onError(e)}))},this.onFile=function(e,t){var a=this;this.onProgress(0),$.ajax(this.uploadUrl,{type:"POST",cache:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){e.lengthComputable&&a.onProgress((a.progressBytes+e.loaded)/a.totalBytes)}),e},data:e,contentType:"application/octet-stream",processData:!1,success:function(){a.progressBytes+=e.size,t()},error:function(e,t){a.onError(e.responseText||t)}})},this.onComplete=function(){var e=this,t=$.map(this.files,(function(e){return{name:e.name,size:e.size,type:e.type}})),a=jQuery.Event("shiny:inputchanged");a.name=this.id,a.value=t,a.el=this.el,a.inputType="shiny.fileupload",$(document).trigger(a),this.makeRequest("uploadEnd",[this.jobId,this.id],(function(){e.onProgress(null)}),(function(t){e.onError(t)}))},this.onError=function(e){console.log("onError: ",e),this.progressCallback(null)},this.onAbort=function(){console.log("onAbort"),this.progressCallback(null)},this.onProgress=function(e){this.progressCallback(e)}}.call($a.prototype);class Qa{rootMgr=null;fileName=null;fileSize=null;fileType=null;filePath=null;columnNames=[];recordCount=null;uploadProgress=null;actionStatus=null;actionMessage=null;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{fileName:Ba.sH,fileSize:Ba.sH,fileType:Ba.sH,filePath:Ba.sH,columnNames:Ba.sH,recordCount:Ba.sH,uploadProgress:Ba.sH,actionStatus:Ba.sH,actionMessage:Ba.sH,setFileName:Ba.XI,setFileSize:Ba.XI,setFileType:Ba.XI,setFilePath:Ba.XI,setRecordCount:Ba.XI,setColumnNames:Ba.XI,setColumnNames:Ba.XI,uploadData:Ba.XI,unloadData:Ba.XI,setUploadProgress:Ba.XI,setActionStatus:Ba.XI,setActionMessage:Ba.XI,columnNamesString:Ba.EW,actionValid:Ba.EW,setUIState:Ba.XI})}setFileName=e=>this.fileName=e;setFileSize=e=>this.fileSize=e;setFileType=e=>this.fileType=e;setFilePath=e=>this.filePath=e;setRecordCount=e=>this.recordCount=e;setColumnNames=e=>this.columnNames=Ie(e);setUploadProgress=e=>this.uploadProgress=e;setActionStatus=e=>this.actionStatus=e;setActionMessage=e=>this.actionMessage=e;uploadData=e=>{$(e).data("currentUploader",new $a(Shiny.shinyapp,e,this.setUploadProgress))};unloadData=()=>{this.rootMgr.btnClicked("unloadCaseBasedData")};get columnNamesString(){return null===this.columnNames?"":this.columnNames.join(", ")}get actionValid(){return D(this.actionStatus)?null:"SUCCESS"===this.actionStatus}setUIState=e=>{this.fileName=e.fileName,this.fileSize=e.fileSize,this.fileType=e.fileType,this.filePath=e.filePath,this.columnNames=e.columnNames,this.recordCount=e.recordCount,this.uploadProgress=e.uploadProgress,this.actionStatus=e.actionStatus,this.actionMessage=e.actionMessage}}class Ja{rootMgr=null;fileName=null;fileSize=null;fileType=null;filePath=null;dataFiles=[];origDataFiles=[];rangeYears=null;dataFileNameToIdxMap=new Map;populationNames=[];fileUploadProgress=null;actionStatus=null;actionMessage=null;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{fileName:Ba.sH,fileSize:Ba.sH,fileType:Ba.sH,filePath:Ba.sH,populationNames:Ba.sH,fileUploadProgress:Ba.sH,dataFiles:Ba.sH.deep,origDataFiles:Ba.sH,rangeYears:Ba.sH,actionStatus:Ba.sH,actionMessage:Ba.sH,dataNames:Ba.EW,dataNamesString:Ba.EW,populationNamesString:Ba.EW,setFileName:Ba.XI,setFileSize:Ba.XI,setFileType:Ba.XI,setFilePath:Ba.XI,setDataFiles:Ba.XI,setDataFileUse:Ba.XI,setDataFileYears:Ba.XI,setPopulationNames:Ba.XI,setFileUploadProgress:Ba.XI,uploadData:Ba.XI,setActionStatus:Ba.XI,setActionMessage:Ba.XI,setRangeYears:Ba.XI,actionValid:Ba.EW,setUIState:Ba.XI}),(0,Ba.fm)((()=>this.rootMgr.inputValueSet("aggrFilters:AggrFilters",(0,Ba.HO)(this.dataFiles))),{delay:1e3})}setFileName=e=>this.fileName=e;setFileSize=e=>this.fileSize=e;setFileType=e=>this.fileType=e;setFilePath=e=>this.filePath=e;setDataFiles=e=>{this.origDataFiles=Ie(e),this.dataFiles=Ie(e),this.dataFileNameToIdxMap=new Map(this.dataFiles.map(((e,t)=>[e.name,t])))};setDataFileUse=(e,t)=>{this.dataFiles[this.dataFileNameToIdxMap.get(e)].use=t};setDataFileYears=(e,t)=>this.dataFiles[this.dataFileNameToIdxMap.get(e)].years=t;setPopulationNames=e=>this.populationNames=Ie(e).sort();setFileUploadProgress=e=>this.fileUploadProgress=e;setRangeYears=e=>this.rangeYears=e;uploadData=e=>{$(e).data("currentUploader",new $a(Shiny.shinyapp,e,this.setFileUploadProgress))};setActionStatus=e=>this.actionStatus=e;setActionMessage=e=>this.actionMessage=e;get dataNames(){return this.dataFiles.map((e=>e.name))}get dataNamesString(){return null===this.dataNames?"":this.dataNames.join(", ")}get populationNamesString(){return null===this.populationNames?"":this.populationNames.join(", ")}get actionValid(){return D(this.actionStatus)?null:"SUCCESS"===this.actionStatus}setUIState=e=>{this.fileName=e.fileName,this.fileSize=e.fileSize,this.fileType=e.fileType,this.filePath=e.filePath,this.dataFiles=e.dataFiles,this.origDataFiles=e.origDataFiles,this.rangeYears=e.rangeYears,this.dataFileNameToIdxMap=e.dataFileNameToIdxMap,this.populationNames=e.populationNames,this.fileUploadProgress=e.fileUploadProgress,this.actionStatus=e.actionStatus,this.actionMessage=e.actionMessage}}class Ka{rootMgr=null;selectedCount=null;totalCount=null;diagYearPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:null},chartCategories:[],chartData:[]};notifQuarterPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:null},chartCategories:[],chartData:[]};missPlotData={plot1:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot2:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot3:{chartData:{all:[],female:[],male:[]}},plot4:{chartCategories:[],chartData:{all:[],female:[],male:[]}}};missPlotSelection="all";repDelPlotData={chartData:{all:{q95:0,series:[]},female:{q95:0,series:[]},male:{q95:0,series:[]}}};repDelPlotSelection="all";dispose=null;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{selectedCount:Ba.sH,totalCount:Ba.sH,diagYearPlotData:Ba.sH,notifQuarterPlotData:Ba.sH,missPlotData:Ba.sH,missPlotSelection:Ba.sH,repDelPlotData:Ba.sH,repDelPlotSelection:Ba.sH,reset:Ba.XI,setSelectedCount:Ba.XI,setTotalCount:Ba.XI,setDiagYearPlotData:Ba.XI,setDiagYearFilterApply:Ba.XI,setDiagYearFilterMinYear:Ba.XI,setDiagYearFilterMaxYear:Ba.XI,setNotifQuarterPlotData:Ba.XI,setNotifQuarterFilterApply:Ba.XI,setNotifQuarterFilterMinYear:Ba.XI,setNotifQuarterFilterMaxYear:Ba.XI,setMissPlotData:Ba.XI,setMissPlotSelection:Ba.XI,setRepDelPlotData:Ba.XI,setRepDelPlotSelection:Ba.XI,notifQuarterSliderMarks:Ba.EW,notifQuarterChartCategories:Ba.EW,missPlot1Series:Ba.EW,missPlot2Series:Ba.EW,missPlot3Series:Ba.EW,missPlot4Series:Ba.EW,repDelPlot:Ba.EW,missPlot3Categories:Ba.EW,missPlot4Categories:Ba.EW,filters:Ba.EW,setUIState:Ba.XI}),this.dispose=(0,Ba.mJ)((()=>this.filters),(e=>{console.log("Filters changed"),this.rootMgr.inputValueSet("summaryFilters",e)}),{delay:1e3})}setSelectedCount=e=>this.selectedCount=e;setTotalCount=e=>this.totalCount=e;setDiagYearPlotData=e=>this.diagYearPlotData=e;setDiagYearFilterApply=e=>this.diagYearPlotData.filter.applyInAdjustments=e;setDiagYearFilterMinYear=e=>{this.diagYearPlotData.filter.valueMinYear!==e&&(this.diagYearPlotData.filter.valueMinYear=e)};setDiagYearFilterMaxYear=e=>{this.diagYearPlotData.filter.valueMaxYear!==e&&(this.diagYearPlotData.filter.valueMaxYear=e)};setNotifQuarterPlotData=e=>this.notifQuarterPlotData=e;setNotifQuarterFilterApply=e=>this.notifQuarterPlotData.filter.applyInAdjustments=e;setNotifQuarterFilterMinYear=e=>{this.notifQuarterPlotData.filter.valueMinYear!==e&&(this.notifQuarterPlotData.filter.valueMinYear=e)};setNotifQuarterFilterMaxYear=e=>{this.notifQuarterPlotData.filter.valueMaxYear!==e&&(this.notifQuarterPlotData.filter.valueMaxYear=e)};setMissPlotData=e=>this.missPlotData=e;setMissPlotSelection=e=>this.missPlotSelection=e;setRepDelPlotData=e=>this.repDelPlotData=e;setRepDelPlotSelection=e=>this.repDelPlotSelection=e;get notifQuarterSliderMarks(){return this.notifQuarterPlotData.chartCategories.map((e=>({value:e,label:""})))}get notifQuarterChartCategories(){return this.notifQuarterPlotData.chartCategories.map((e=>at(e)))}get missPlot1Series(){return this.missPlotData.plot1.chartData[this.missPlotSelection]}get missPlot2Series(){return this.missPlotData.plot2.chartData[this.missPlotSelection]}get missPlot3Series(){const e=this.missPlotData.plot3.chartData[this.missPlotSelection];let t=["Present","Missing"].map((t=>e.map((e=>e.name===t?e.y:0))));return t[2]=e.map((e=>dt(e.y))),t}get missPlot4Series(){return this.missPlotData.plot4.chartData[this.missPlotSelection]}get repDelPlot(){const e=(0,Ba.HO)(this.repDelPlotData.chartData[this.repDelPlotSelection]);return{q95:e.q95,series:[{name:"density",data:e.series}]}}get missPlot3Categories(){return this.missPlotData.plot3.chartData[this.missPlotSelection].map((e=>`${(100*e.y).toFixed(2)} %`))}get missPlot4Categories(){return this.missPlotData.plot4.chartCategories}get filters(){return{DiagYear:{ApplyInAdjustments:this.diagYearPlotData.filter.applyInAdjustments,MinYear:this.diagYearPlotData.filter.valueMinYear,MaxYear:this.diagYearPlotData.filter.valueMaxYear},NotifQuarter:{ApplyInAdjustments:this.notifQuarterPlotData.filter.applyInAdjustments,MinYear:this.notifQuarterPlotData.filter.valueMinYear,MaxYear:this.notifQuarterPlotData.filter.valueMaxYear}}}reset=()=>{this.selectedCount=null,this.totalCount=null,this.diagYearPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:null},chartCategories:[],chartData:[]},this.notifQuarterPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:null},chartCategories:[],chartData:[]},this.missPlotData={plot1:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot2:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot3:{chartData:{all:[],female:[],male:[]}},plot4:{chartCategories:[],chartData:{all:[],female:[],male:[]}}},this.missPlotSelection="all",this.repDelPlotData={chartData:{all:{q95:0,series:[]},female:{q95:0,series:[]},male:{q95:0,series:[]}}},this.repDelPlotSelection="all"};setUIState=e=>{this.dispose(),this.selectedCount=e.selectedCount,this.totalCount=e.totalCount,this.diagYearPlotData=e.diagYearPlotData,this.notifQuarterPlotData=e.notifQuarterPlotData,this.missPlotData=e.missPlotData,this.missPlotSelection=e.missPlotSelection,this.repDelPlotData=e.repDelPlotData,this.repDelPlotSelection=e.repDelPlotSelection,this.dispose=(0,Ba.mJ)((()=>this.filters),(e=>{console.log("Filters changed"),this.rootMgr.inputValueSet("summaryFilters",e)}),{delay:1e3,fireImmediately:!1})}}class qa{rootMgr=null;miAdjustType="none";miJomoSettings={nimp:5,nburn:1e3,nbetween:500,nsdf:4,imputeRD:!1};miMiceSettings={nimp:5,nit:10,nsdf:4,imputeRD:!1};rdAdjustType="none";dataBounds={startYear:2e3,endYear:2017,endQrt:1};rdWithoutTrendSettings={startYear:2e3,endYear:2017,endQrt:1,stratGender:!1,stratTrans:!1,stratMigr:!1};rdWithTrendSettings={startYear:2e3,endYear:2017,endQrt:1,stratGender:!1,stratTrans:!1,stratMigr:!1};adjustmentsRunProgress=null;adjustmentsRunLog=null;adjustmentsReport=null;runAdjustmentsTypes=[];constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{miAdjustType:Ba.sH,miJomoSettings:Ba.sH,miMiceSettings:Ba.sH,rdAdjustType:Ba.sH,rdWithoutTrendSettings:Ba.sH,rdWithTrendSettings:Ba.sH,adjustmentsRunProgress:Ba.sH,adjustmentsRunLog:Ba.sH,adjustmentsReport:Ba.sH,runAdjustmentsTypes:Ba.sH,miParams:Ba.EW,rdParams:Ba.EW,adjustmentSelected:Ba.EW,adjustmentsRunInProgress:Ba.EW,setRunAdjustmentsTypes:Ba.XI,setMIAdjustType:Ba.XI,setRDAdjustType:Ba.XI,setMIJomoNimp:Ba.XI,setMIJomoNburn:Ba.XI,setMIJomoNbetween:Ba.XI,setMIJomoNsdf:Ba.XI,setMIJomoImputeRD:Ba.XI,setMIMiceNimp:Ba.XI,setMIMiceNit:Ba.XI,setMIMiceNsdf:Ba.XI,setMIMiceImputeRD:Ba.XI,restoreMIDefaults:Ba.XI,restoreRDDefaults:Ba.XI,setRDWithoutStartYear:Ba.XI,setRDWithoutEndYear:Ba.XI,setRDWithoutEndQrt:Ba.XI,setRDWithoutStratGender:Ba.XI,setRDWithoutStratTrans:Ba.XI,setRDWithoutStratMigr:Ba.XI,setRDWithStartYear:Ba.XI,setRDWithEndYear:Ba.XI,setRDWithEndQrt:Ba.XI,setRDWithStratGender:Ba.XI,setRDWithStratTrans:Ba.XI,setRDWithStratMigr:Ba.XI,runAdjustments:Ba.XI,cancelAdjustments:Ba.XI,setAdjustmentsRunProgress:Ba.XI,setAdjustmentsRunLog:Ba.XI,setAdjustmentsReport:Ba.XI,setDataBounds:Ba.XI,setUIState:Ba.XI}),(0,Ba.fm)((()=>{this.rootMgr.uiStateMgr.setSubPageDisabledStatus(3,1,!this.adjustmentSelected)}))}get miParams(){let e=null;return"jomo"===this.miAdjustType?e=this.miJomoSettings:"mice"===this.miAdjustType&&(e=this.miMiceSettings),e}get rdParams(){let e=null;return"withoutTrend"===this.rdAdjustType?e=this.rdWithoutTrendSettings:"withTrend"===this.rdAdjustType&&(e=this.rdWithTrendSettings),e}get adjustmentSelected(){return"none"!==this.miAdjustType||"none"!==this.rdAdjustType}get adjustmentsRunInProgress(){return null!==this.adjustmentsRunProgress}setRunAdjustmentsTypes=e=>this.runAdjustmentsTypes=Ie(e);setMIAdjustType=e=>this.miAdjustType=e;setMIJomoNimp=e=>this.miJomoSettings.nimp=e;setMIJomoNburn=e=>this.miJomoSettings.nburn=e;setMIJomoNbetween=e=>this.miJomoSettings.nbetween=e;setMIJomoNsdf=e=>this.miJomoSettings.nsdf=e;setMIJomoImputeRD=e=>this.miJomoSettings.imputeRD=e;setMIMiceNimp=e=>this.miMiceSettings.nimp=e;setMIMiceNit=e=>this.miMiceSettings.nit=e;setMIMiceNsdf=e=>this.miMiceSettings.nsdf=e;setMIMiceImputeRD=e=>this.miMiceSettings.imputeRD=e;restoreMIDefaults=e=>{"jomo"===e?this.miJomoSettings={nimp:5,nburn:1e3,nbetween:500,nsdf:4,imputeRD:!1}:"mice"===e&&(this.miMiceSettings={nimp:5,nit:5,nsdf:4,imputeRD:!1})};setRDAdjustType=e=>this.rdAdjustType=e;setRDWithoutStartYear=e=>this.rdWithoutTrendSettings.startYear=e;setRDWithoutEndYear=e=>this.rdWithoutTrendSettings.endYear=e;setRDWithoutEndQrt=e=>this.rdWithoutTrendSettings.endQrt=e;setRDWithoutStratGender=e=>this.rdWithoutTrendSettings.stratGender=e;setRDWithoutStratTrans=e=>this.rdWithoutTrendSettings.stratTrans=e;setRDWithoutStratMigr=e=>this.rdWithoutTrendSettings.stratMigr=e;setRDWithStartYear=e=>this.rdWithTrendSettings.startYear=e;setRDWithEndYear=e=>this.rdWithTrendSettings.endYear=e;setRDWithEndQrt=e=>this.rdWithTrendSettings.endQrt=e;setRDWithStratGender=e=>this.rdWithTrendSettings.stratGender=e;setRDWithStratTrans=e=>this.rdWithTrendSettings.stratTrans=e;setRDWithStratMigr=e=>this.rdWithTrendSettings.stratMigr=e;setDataBounds=e=>this.dataBounds=e;restoreRDDefaults=e=>{"withoutTrend"===e?this.rdWithoutTrendSettings={startYear:this.dataBounds.startYear,endYear:this.dataBounds.endYear,endQrt:this.dataBounds.endQrt,stratGender:!1,stratTrans:!1,stratMigr:!1}:"withTrend"===e&&(this.rdWithTrendSettings={startYear:this.dataBounds.startYear,endYear:this.dataBounds.endYear,endQrt:this.dataBounds.endQrt,stratGender:!1,stratTrans:!1,stratMigr:!1})};runAdjustments=()=>{this.rootMgr.btnClicked("runAdjustBtn",{MIAdjustType:this.miAdjustType,MIParams:this.miParams,RDAdjustType:this.rdAdjustType,RDParams:this.rdParams})};cancelAdjustments=()=>this.rootMgr.btnClicked("cancelAdjustBtn");setAdjustmentsRunProgress=e=>this.adjustmentsRunProgress=e;setAdjustmentsRunLog=e=>this.adjustmentsRunLog=e;setAdjustmentsReport=e=>this.adjustmentsReport=e;setUIState=e=>{this.miAdjustType=e.miAdjustType,this.miJomoSettings=e.miJomoSettings,this.miMiceSettings=e.miMiceSettings,this.rdAdjustType=e.rdAdjustType,this.dataBounds=e.dataBounds,this.rdWithoutTrendSettings=e.rdWithoutTrendSettings,this.rdWithTrendSettings=e.rdWithTrendSettings,this.adjustmentsRunProgress=e.adjustmentsRunProgress,this.adjustmentsRunLog=e.adjustmentsRunLog,this.adjustmentsReport=e.adjustmentsReport}}class Za{rootMgr=null;availableVariables=[];availableStrata={};populations=[];constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{availableVariables:Ba.sH,availableStrata:Ba.sH,populations:Ba.sH,addEmptyPopulation:Ba.XI,removePopulations:Ba.XI,setPopulationVariables:Ba.XI,setAvailableVariables:Ba.XI,setAvailableStrata:Ba.XI,populationsJS:Ba.EW,availableVarNames:Ba.EW,definedPopulations:Ba.EW})}addEmptyPopulation=()=>{this.populations.push({id:La("Population"),variables:[],variablesKey:null,strata:[]})};setAvailableVariables=e=>{null==e&&(e=[]),this.availableVariables=e,this.populations=[]};setAvailableStrata=e=>{null==e&&(e={}),this.availableStrata=e,this.populations=[]};removePopulations=e=>{this.populations=De(this.populations,e)};setPopulationVariables=(e,t)=>{var a,r;this.populations[e].variables=(a=this.availableVarNames,r=t,a.filter((e=>-1!==r.indexOf(e)))),this.populations[e].variables.length>0?(this.populations[e].variablesKey=this.populations[e].variables.join(", "),this.populations[e].strata=this.availableStrata[this.populations[e].variablesKey]):(this.populations[e].variablesKey=null,this.populations[e].strata=[])};get populationsJS(){return(0,Ba.HO)(this.populations)}get availableVarNames(){return this.availableVariables.map((e=>e.Name))}get definedPopulations(){return[...new Set(this.populations.map((e=>e.strata.map((e=>e.Combination)))).flat())]}setUIState=e=>{this.availableVariables=e.availableVariables,this.availableStrata=e.availableStrata,this.populations=e.populations}}class er{parentMgr=null;combinations=new Map;selectedCombination=null;combinationAllId=null;constructor(e){this.parentMgr=e,(0,Ba.Gn)(this,{combinations:Ba.sH,combinationAllId:Ba.sH,selectedCombination:Ba.sH,addEmptyCombination:Ba.XI,removeCombinations:Ba.XI,setSelectedCombination:Ba.XI,setCombinationName:Ba.XI,setCombinationName:Ba.XI,setCombinationCasePopulations:Ba.XI,setCombinationAggrPopulations:Ba.XI,syncCasePopulations:Ba.XI,syncAggrPopulations:Ba.XI,combinationAll:Ba.EW,combinationsArray:Ba.EW,combinationsNames:Ba.EW});const t=La("combination");this.addEmptyCombination(t,"All data"),this.setSelectedCombination(t),this.combinationAllId=t,(0,Ba.fm)((()=>{this.syncCasePopulations(this.parentMgr.popMgr.definedPopulations)})),(0,Ba.fm)((()=>{this.syncAggrPopulations(this.parentMgr.aggrDataMgr.populationNames)}))}addEmptyCombination=(e=null,t=null)=>{D(e)&&(e=La("combination")),D(t)&&(t=`Combination ${Ga("Combination ",this.combinationsNames)}`);const a={id:e,name:t,casePopulations:[],aggrPopulations:[]};return this.combinations.set(e,a),e};removeCombinations=e=>{e.forEach((e=>{this.combinations.has(e)&&this.combinations.delete(e)})),this.selectedCombination=this.combinationsArray[this.combinationsArray.length-1]};setSelectedCombination=e=>{this.combinations.has(e)&&(this.selectedCombination=this.combinations.get(e))};setCombinationName=(e,t)=>{this.combinations.has(e)&&(this.combinations.get(e).name=t)};setCombinationCasePopulations=(e,t)=>{this.combinations.has(e)&&(this.combinations.get(e).casePopulations=t)};setCombinationAggrPopulations=(e,t)=>{this.combinations.has(e)&&(this.combinations.get(e).aggrPopulations=t)};syncCasePopulations=e=>{this.combinations.forEach((t=>{t.casePopulations=t.casePopulations.filter((t=>e.includes(t)))}))};syncAggrPopulations=e=>{this.combinations.forEach((t=>{t.aggrPopulations=t.aggrPopulations.filter((t=>e.includes(t)))})),this.combinationAll.aggrPopulations=e};get combinationAll(){return this.combinations.has(this.combinationAllId)?this.combinations.get(this.combinationAllId):null}get combinationsArray(){return Array.from(this.combinations.values())}get combinationsNames(){return this.combinationsArray.map((e=>e.name))}setUIState=e=>{this.combinations=new Map;for(const[t,a]of Object.entries(e.combinations))this.combinations.set(t,a);this.setSelectedCombination(e.selectedCombination),this.combinationAllId=e.combinationAllId}}class tr{parentMgr=null;constructor(e,t,a=null){this.parentMgr=e,this.id=La("timeIntervals"),this.name=t,this.minYear=e.minYear,this.maxYear=e.maxYear,D(a)?this.createIntervals(this.minYear,this.maxYear,5,1984):this.intervals=a,(0,Ba.Gn)(this,{id:Ba.sH,name:Ba.sH,intervals:Ba.sH,minYear:Ba.sH,maxYear:Ba.sH,setMinYear:Ba.XI,setMaxYear:Ba.XI,setIntervals:Ba.XI,addInterval:Ba.XI,addEmptyInterval:Ba.XI,removeIntervals:Ba.XI,setId:Ba.XI,setName:Ba.XI,setIntervalStartYear:Ba.XI,setIntervalJump:Ba.XI,setIntervalChangeInInterval:Ba.XI,setIntervalDiffByCD4:Ba.XI,intervalsJS:Ba.EW,maxStartYear:Ba.EW})}id=null;name="";intervals=[];minYear=null;maxYear=null;setId=e=>this.id=e;setName=e=>this.name=e;setMinYear=e=>{this.minYear=e,this.intervals.forEach((e=>e.startYear=Math.max(this.minYear,e.startYear))),this.reinitializeEndYears()};setMaxYear=e=>{this.maxYear=e,this.reinitializeEndYears()};setIntervals=(e,t,a)=>{this.minYear=e,this.maxYear=t,this.intervals=a};createIntervals=(e,t,a,r=0)=>{if(a>0){this.minYear=e,this.maxYear=t;let n=e;for(let l=0;l<a;++l){let i=n;const s=Math.max(Math.floor((t-i)/(a-l)),1);let o=Math.min(i+s,t);if(0===l&&r>0&&r>=e&&(i=e,o=r),this.addInterval(i,o,0!==l,!1,!1),n=o,o===t)break}}};addInterval=(e,t,a,r,n)=>{this.intervals.push({startYear:e,endYear:t,jump:a,changeInInterval:r,diffByCD4:n})};addEmptyInterval=()=>{this.addInterval(this.maxStartYear,this.maxYear,!1,!1,!1),this.reinitializeEndYears()};removeIntervals=e=>{e.length===this.intervals.length&&(e=De(e,0)),this.intervals=De(this.intervals,e),this.reinitializeEndYears()};setIntervalStartYear=(e,t)=>{t>=this.minYear&&t<=this.maxYear&&(this.intervals[e].startYear=t,this.reinitializeEndYears())};setIntervalJump=(e,t)=>this.intervals[e].jump=t;setIntervalChangeInInterval=(e,t)=>this.intervals[e].changeInInterval=t;setIntervalDiffByCD4=(e,t)=>this.intervals[e].diffByCD4=t;get intervalsJS(){return(0,Ba.HO)(this.intervals)}get maxStartYear(){return 0===this.intervals.length?this.minYear:Math.max.apply(null,this.intervals.map((e=>e.startYear)))}reinitializeEndYears=()=>{const e=this.intervals.length;if(e>0){this.intervals[0].startYear=this.minYear,this.intervals.sort(((e,t)=>e.startYear<t.startYear?-1:1));for(let t=0;t<e;++t)this.intervals[t].startYear=Math.min(this.intervals[t].startYear,this.maxYear),t!==e-1&&(this.intervals[t].endYear=Math.min(this.intervals[t+1].startYear,this.maxYear));this.intervals[e-1].endYear=this.maxYear}}}class ar{id="TimeIntervalsCollectionManager";parentMgr=null;constructor(e){this.parentMgr=e,this.minYear=e.minYear,this.maxYear=e.maxYear,this.addNewCollection(),this.selectedRunCollectionId=this.selectedEditCollection.id,(0,Ba.Gn)(this,{minYear:Ba.sH,maxYear:Ba.sH,collections:Ba.sH,selectedEditCollectionId:Ba.sH,selectedRunCollectionId:Ba.sH,setIntervals:Ba.XI,setMinYear:Ba.XI,setMaxYear:Ba.XI,addNewCollection:Ba.XI,setSelectedEditCollectionId:Ba.XI,setSelectedRunCollectionId:Ba.XI,deleteSelectedEditCollection:Ba.XI,selectedEditCollection:Ba.EW,selectedRunCollection:Ba.EW,collectionsArray:Ba.EW,defaultEditCollectionSelected:Ba.EW,collectionsNames:Ba.EW,setParentMgr:Ba.XI}),(0,Ba.fm)((()=>{this.collections.forEach((e=>e.setMinYear(this.minYear)))})),(0,Ba.fm)((()=>{this.collections.forEach((e=>e.setMaxYear(this.maxYear)))}))}collections=new Map;minYear=null;maxYear=null;selectedEditCollectionId=null;selectedRunCollectionId=null;setIntervals=(e,t,a)=>{D(this.selectedEditCollection)||this.selectedEditCollection.setIntervals(e,t,a)};setMinYear=e=>this.minYear=e;setMaxYear=e=>this.maxYear=e;addNewCollection=(e=null,t=null)=>{D(e)&&(e=0===this.collections.size?"Default":`Set ${Ga("Set ",this.collectionsNames)}`);const a=new tr(this,e,t);this.collections.set(a.id,a),this.selectedEditCollectionId=a.id};deleteSelectedEditCollection=()=>{this.collections.has(this.selectedEditCollectionId)&&this.collections.delete(this.selectedEditCollectionId);const e=(0,Ba.HP)(this.collections);this.selectedEditCollectionId=e[e.length-1],this.selectedRunCollectionId=this.selectedEditCollectionId};setSelectedEditCollectionId=e=>this.selectedEditCollectionId=e;setSelectedRunCollectionId=e=>this.selectedRunCollectionId=e;get selectedEditCollection(){let e=null;return this.collections.has(this.selectedEditCollectionId)&&(e=this.collections.get(this.selectedEditCollectionId)),e}get selectedRunCollection(){let e=null;return this.collections.has(this.selectedRunCollectionId)&&(e=this.collections.get(this.selectedRunCollectionId)),e}get defaultEditCollectionSelected(){return"DEFAULT"===this.selectedEditCollection.name.toUpperCase()}get collectionsArray(){return(0,Ba.zu)(this.collections)}get collectionsNames(){return this.collectionsArray.map((e=>e.name))}setParentMgr=e=>this.parentMgr=e;setCollections=e=>{this.collections=new Map;for(const[t,a]of Object.entries(e)){const e=new tr(this,a.name,a.intervals);e.setId(a.id),e.setMinYear(a.minYear),e.setMaxYear(a.maxYear),this.collections.set(e.id,e)}}}const rr=(e,t,a,r=null)=>{let n=e.createElement(a);return D(r)||(n.innerHTML=r),t.appendChild(n),n},nr=e=>{{var t=(new DOMParser).parseFromString(e,"text/xml"),a=(new DOMParser).parseFromString(['<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform">','  <xsl:strip-space elements="*"/>','  <xsl:template match="para[content-style][not(text())]">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">','    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>',"  </xsl:template>",'  <xsl:output indent="yes"/>',"</xsl:stylesheet>"].join("\n"),"text/xml");const r=new XSLTProcessor;r.importStylesheet(a);const n=r.transformToDocument(t);return(new XMLSerializer).serializeToString(n)}},lr=e=>e<10?"0"+e:e;var ir=a(1543),sr=a.n(ir);class or{id="ModelsManager";parentMgr=null;timeIntCollMgr=null;constructor(e){this.parentMgr=e,this.timeIntCollMgr=new ar(this),(0,Ba.Gn)(this,{modelsParamFile:Ba.sH,modelsParamFileName:Ba.sH,rangeYears:Ba.sH,optimalYears:Ba.sH,minYear:Ba.sH,maxYear:Ba.sH,minFitPos:Ba.sH,maxFitPos:Ba.sH,minFitCD4:Ba.sH,maxFitCD4:Ba.sH,minFitAIDS:Ba.sH,maxFitAIDS:Ba.sH,minFitHIVAIDS:Ba.sH,maxFitHIVAIDS:Ba.sH,fullData:Ba.sH,knotsCount:Ba.sH,startIncZero:Ba.sH,maxIncCorr:Ba.sH,distributionFit:Ba.sH,delta4Fac:Ba.sH,country:Ba.sH,modelsRunProgress:Ba.sH,modelsRunLog:Ba.sH,bootstrapRunProgress:Ba.sH,bootstrapRunLog:Ba.sH,bootstrapCount:Ba.sH,bootstrapType:Ba.sH,plotData:Ba.sH,migrConnFlag:Ba.sH,showConfBounds:Ba.sH,setModelsParamFile:Ba.XI,saveModelsParamFile:Ba.XI,setModelsParamFileName:Ba.XI,setMinYear:Ba.XI,setMaxYear:Ba.XI,setMinFitPos:Ba.XI,setMaxFitPos:Ba.XI,setMinFitCD4:Ba.XI,setMaxFitCD4:Ba.XI,setMinFitAIDS:Ba.XI,setMaxFitAIDS:Ba.XI,setMinFitHIVAIDS:Ba.XI,setMaxFitHIVAIDS:Ba.XI,setFullData:Ba.XI,setKnotsCount:Ba.XI,setStartIncZero:Ba.XI,setMaxIncCorr:Ba.XI,setDistributionFit:Ba.XI,setDelta4Fac:Ba.XI,setCountry:Ba.XI,setBootstrapCount:Ba.XI,setBootstrapType:Ba.XI,setRangeYears:Ba.XI,setOptimalYears:Ba.XI,runModels:Ba.XI,cancelModels:Ba.XI,setModelsRunProgress:Ba.XI,setModelsRunLog:Ba.XI,runBootstrap:Ba.XI,cancelBootstrap:Ba.XI,setMigrConnFlag:Ba.XI,setShowConfBounds:Ba.XI,modelsRunInProgress:Ba.EW,bootstrapRunInProgress:Ba.EW,gofTable1Data:Ba.EW,gofTable2Data:Ba.EW,gofTable3Data:Ba.EW,gofTable4Data:Ba.EW,gofTable5Data:Ba.EW,gofTable6Data:Ba.EW,gofTable7Data:Ba.EW,gofPlot1Data:Ba.EW,gofPlot2Data:Ba.EW,gofPlot3Data:Ba.EW,gofPlot4Data:Ba.EW,gofPlot5Data:Ba.EW,gofPlot6Data:Ba.EW,gofPlot7Data:Ba.EW,outputTable1Data:Ba.EW,outputTable2Data:Ba.EW,outputTable3Data:Ba.EW,outputTable4Data:Ba.EW,outputPlot1Data:Ba.EW,outputPlot2Data:Ba.EW,outputPlot3Data:Ba.EW,outputPlot4Data:Ba.EW,mainOutputTableData:Ba.EW}),(0,Ba.fm)((()=>{this.timeIntCollMgr.setMinYear(this.minYear)})),(0,Ba.fm)((()=>{this.timeIntCollMgr.setMaxYear(this.maxYear)})),(0,Ba.fm)((()=>this.parentMgr.inputValueSet("migrConnFlag",this.migrConnFlag)),{delay:1e3})}modelsParamFile=null;modelsParamFileName="";rangeYears=null;optimalYears=null;minYear=1980;maxYear=2016;minFitPos=1979;maxFitPos=1979;minFitCD4=1984;maxFitCD4=2016;minFitAIDS=1980;maxFitAIDS=1995;minFitHIVAIDS=1996;maxFitHIVAIDS=2016;fullData=!0;knotsCount=4;startIncZero=!0;maxIncCorr=!0;distributionFit="POISSON";delta4Fac=0;country="OTHER";bootstrapCount=100;bootstrapType="PARAMETRIC";modelsRunProgress=null;modelsRunLog=null;bootstrapRunProgress=null;bootstrapRunLog=null;migrConnFlag=!1;showConfBounds=!0;plotData=null;colsDescriptions={N_HIV_D:"Data",N_HIV_Obs_M:"Model",N_CD4_1_D:"Data",N_CD4_1_Obs_M:"Model",N_CD4_2_D:"Data",N_CD4_2_Obs_M:"Model",N_CD4_3_D:"Data",N_CD4_3_Obs_M:"Model",N_CD4_4_D:"Data",N_CD4_4_Obs_M:"Model",N_HIVAIDS_D:"Data",N_HIVAIDS_Obs_M:"Model",N_AIDS_D:"Data",N_AIDS_M:"Model",N_Inf_M:"New incident infections",NewMigrantInfectionsPerArrYear:"New arrivals of infected migrants",InfectionsTotal:"Total",t_diag:"Time to diagnosis",N_Alive_Diag_M:"Diagnosed from model",CumNewMigrantDiagnosesPerDiagYear:"Diagnosed migrants",N_Und:"Undiagnosed from model",CumUndiagnosedMigrantCases:"Undiagnosed migrants",AliveTotal:"Alive",N_Und_Alive_p:"Proportion of undiagnosed",UndiagnosedFrac:"Proportion of undiagnosed"};setModelsParamFile=e=>{e&&(this.modelsParamFile=e,this.modelsParamFileName=e.name,(e=>{const t=new FileReader;return new Promise(((a,r)=>{t.onload=e=>{a(e.target.result)},t.onerror=r,t.readAsText(e)}))})(this.modelsParamFile).then((0,Ba.XI)("success",(e=>{this.parentMgr.btnClicked("xmlModel",e)})),(0,Ba.XI)("error",(e=>console.log(e)))))};saveModelsParamFile=()=>{let e=(new DOMParser).parseFromString("<Model></Model>","text/xml"),t=e.getElementsByTagName("Model")[0];rr(e,t,"FileVersion",2);let a=rr(e,t,"Meta");rr(e,a,"Name","HIVModel"),rr(e,a,"Author","HIV Platform"),rr(e,a,"Description","Model file exported by HIV Platform"),rr(e,a,"InputDataPath","./"),rr(e,a,"OutputResultsPath","./");let r=rr(e,a,"RiskGroups"),n=rr(e,r,"RiskGroup");rr(e,n,"Name","Default"),rr(e,n,"CreatedByDefault",!0),rr(e,n,"FitMinYear",this.minYear);let l=rr(e,n,"RiskCategories");(0,Ba.HO)(this.parentMgr.aggrDataMgr.populationNames).forEach((t=>{let a=rr(e,l,"RiskCategory");rr(e,a,"Name",t),rr(e,a,"IsSelected",!0)}));let i=rr(e,t,"IncidenceModel");rr(e,i,"Run","True"),rr(e,i,"MinYear",this.minYear),rr(e,i,"MaxYear",this.maxYear),rr(e,i,"MinFitPos",this.minFitPos),rr(e,i,"MaxFitPos",this.maxFitPos),rr(e,i,"MinFitCD4",this.minFitCD4),rr(e,i,"MaxFitCD4",this.maxFitCD4),rr(e,i,"MinFitAIDS",this.minFitAIDS),rr(e,i,"MaxFitAIDS",this.maxFitAIDS),rr(e,i,"MinFitHIVAIDS",this.minFitHIVAIDS),rr(e,i,"MaxFitHIVAIDS",this.maxFitHIVAIDS),rr(e,i,"Country",this.country),rr(e,i,"KnotsCount",this.knotsCount),rr(e,i,"StartIncZer",this.startIncZero),rr(e,i,"DistributionFit",this.distributionFit),rr(e,i,"RDisp",50),rr(e,i,"Delta4Fac",this.delta4Fac),rr(e,i,"MaxIncCorr",this.maxIncCorr),rr(e,i,"SplineType","B-splines"),rr(e,i,"FullData",this.fullData);let s=rr(e,i,"Bootstrap");rr(e,s,"StartIter",0),rr(e,s,"IterCount",this.bootstrapCount);let o=rr(e,i,"DiagnosisRates");(0,Ba.HO)(this.timeIntCollMgr.selectedRunCollection.intervals).forEach((t=>{let a=rr(e,o,"Interval");rr(e,a,"Description","Test"),rr(e,a,"StartYear",t.startYear),rr(e,a,"Jump",t.jump),rr(e,a,"ChangingInInterval",t.changeInInterval),rr(e,a,"DifferentByCD4",t.diffByCD4)}));let m=rr(e,t,"LondonModel");rr(e,m,"Run",!1),rr(e,m,"RunType1",!0),rr(e,m,"RunType2",!0),rr(e,m,"MinYear",this.minYear),rr(e,m,"MaxYear",this.maxYear),rr(e,m,"BootstrapIterCount",5e4),rr(e,m,"RateW",2);const c=(new XMLSerializer).serializeToString(e),d=new Blob([['<?xml version="1.0" encoding="utf-8"?>',nr(c)].join("\n")],{type:"text/xml"}),u=((e,t="dd/mm/yyyy")=>{var a=e.getDate(),r=e.getMonth(),n=e.getFullYear(),l=e.getHours(),i=e.getMinutes(),s=e.getSeconds(),o=e.getMilliseconds(),m=lr(l),c=lr(i),d=lr(s),u=lr(a),g=r+1,p=lr(g),h=n+"",A=h.substring(2,2);return t.replace("hh",m).replace("h",l).replace("mm",c).replace("m",i).replace("ss",d).replace("s",s).replace("S",o).replace("dd",u).replace("d",a).replace("MM",p).replace("M",g).replace("yyyy",h).replace("yy",A)})(new Date,"yyyyMMdd_hhmmss");sr().saveAs(d,`HIVModel_${u}.xml`)};setModelsParamFileName=e=>this.modelsParamFileName=e;setRangeYears=e=>this.rangeYears=e;setOptimalYears=e=>{this.optimalYears=e,this.setMinYear(e.All[0]),this.setMaxYear(e.All[1]),this.setMinFitPos(e.HIV[0]),this.setMaxFitPos(e.HIV[1]),this.setMinFitCD4(e.HIVCD4[0]),this.setMaxFitCD4(e.HIVCD4[1]),this.setMinFitAIDS(e.AIDS[0]),this.setMaxFitAIDS(e.AIDS[1]),this.setMinFitHIVAIDS(e.HIVAIDS[0]),this.setMaxFitHIVAIDS(e.HIVAIDS[1])};setMinYear=e=>this.minYear=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMaxYear=e=>this.maxYear=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMinFitPos=e=>this.minFitPos=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMaxFitPos=e=>this.maxFitPos=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMinFitCD4=e=>this.minFitCD4=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMaxFitCD4=e=>this.maxFitCD4=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMinFitAIDS=e=>this.minFitAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMaxFitAIDS=e=>this.maxFitAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMinFitHIVAIDS=e=>this.minFitHIVAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setMaxFitHIVAIDS=e=>this.maxFitHIVAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]);setFullData=e=>this.fullData=e;setKnotsCount=e=>this.knotsCount=e;setStartIncZero=e=>this.startIncZero=e;setMaxIncCorr=e=>this.maxIncCorr=e;setDistributionFit=e=>this.distributionFit=e;setDelta4Fac=e=>this.delta4Fac=parseFloat(e);setCountry=e=>this.country=e;setBootstrapCount=e=>this.bootstrapCount=e;setBootstrapType=e=>this.bootstrapType=e;setPlotData=e=>this.plotData=e;setModelsRunProgress=e=>this.modelsRunProgress=e;setModelsRunLog=e=>this.modelsRunLog=e;runModels=()=>{const e={minYear:this.minYear,maxYear:this.maxYear,minFitPos:this.minFitPos,maxFitPos:this.maxFitPos,minFitCD4:this.minFitCD4,maxFitCD4:this.maxFitCD4,minFitAIDS:this.minFitAIDS,maxFitAIDS:this.maxFitAIDS,minFitHIVAIDS:this.minFitHIVAIDS,maxFitHIVAIDS:this.maxFitHIVAIDS,fullData:this.fullData,knotsCount:this.knotsCount,startIncZero:this.startIncZero,maxIncCorr:this.maxIncCorr,distributionFit:this.distributionFit,delta4Fac:this.delta4Fac,country:this.country,timeIntervals:(0,Ba.HO)(this.timeIntCollMgr.selectedRunCollection.intervals),popCombination:(0,Ba.HO)(this.parentMgr.popCombMgr.selectedCombination)};this.parentMgr.btnClicked("runModelBtn:HIVModelParams",e)};cancelModels=()=>this.parentMgr.btnClicked("cancelModelBtn");setBootstrapRunProgress=e=>this.bootstrapRunProgress=e;setBootstrapRunLog=e=>this.bootstrapRunLog=e;runBootstrap=()=>this.parentMgr.btnClicked("runBootstrapBtn",{count:this.bootstrapCount,type:this.bootstrapType});cancelBootstrap=()=>this.parentMgr.btnClicked("cancelBootstrapBtn");setMigrConnFlag=e=>this.migrConnFlag=e;setShowConfBounds=e=>this.showConfBounds=e;get modelsRunInProgress(){return null!==this.modelsRunProgress}get bootstrapRunInProgress(){return null!==this.bootstrapRunProgress}get gofTable1Data(){return this.getTableData(["Year","N_HIV_D","N_HIV_Obs_M"])}get gofPlot1Data(){return[this.getPlotSeries("N_HIV_D"),this.getPlotSeries("N_HIV_Obs_M")]}get gofTable2Data(){return this.getTableData(["Year","N_CD4_1_D","N_CD4_1_Obs_M"])}get gofPlot2Data(){return[this.getPlotSeries("N_CD4_1_D"),this.getPlotSeries("N_CD4_1_Obs_M")]}get gofTable3Data(){return this.getTableData(["Year","N_CD4_2_D","N_CD4_2_Obs_M"])}get gofPlot3Data(){return[this.getPlotSeries("N_CD4_2_D"),this.getPlotSeries("N_CD4_2_Obs_M")]}get gofTable4Data(){return this.getTableData(["Year","N_CD4_3_D","N_CD4_3_Obs_M"])}get gofPlot4Data(){return[this.getPlotSeries("N_CD4_3_D"),this.getPlotSeries("N_CD4_3_Obs_M")]}get gofTable5Data(){return this.getTableData(["Year","N_CD4_4_D","N_CD4_4_Obs_M"])}get gofPlot5Data(){return[this.getPlotSeries("N_CD4_4_D"),this.getPlotSeries("N_CD4_4_Obs_M")]}get gofTable6Data(){return this.getTableData(["Year","N_HIVAIDS_D","N_HIVAIDS_Obs_M"])}get gofPlot6Data(){return[this.getPlotSeries("N_HIVAIDS_D"),this.getPlotSeries("N_HIVAIDS_Obs_M")]}get gofTable7Data(){return this.getTableData(["Year","N_AIDS_D","N_AIDS_M"])}get gofPlot7Data(){return[this.getPlotSeries("N_AIDS_D"),this.getPlotSeries("N_AIDS_M")]}get outputTable1Data(){return this.getTableData(["Year","N_Inf_M","NewMigrantDiagnosesPerArrYear","InfectionsTotal"])}get outputPlot1Data(){return[this.getPlotSeries("N_Inf_M"),this.getPlotSeries("NewMigrantDiagnosesPerArrYear"),this.getPlotSeries("InfectionsTotal")]}get outputTable2Data(){return this.getTableData(["Year","t_diag"])}get outputPlot2Data(){return[this.getPlotSeries("t_diag")]}get outputTable3Data(){return this.getTableData(["Year","N_Alive_Diag_M","CumNewMigrantDiagnosesPerDiagYear","N_Und","CumUndiagnosedMigrantCases","AliveTotal"])}get outputPlot3Data(){return[this.getPlotSeries("N_Alive_Diag_M"),this.getPlotSeries("CumNewMigrantDiagnosesPerDiagYear"),this.getPlotSeries("N_Und"),this.getPlotSeries("CumUndiagnosedMigrantCases"),this.getPlotSeries("AliveTotal")]}get outputTable4Data(){return this.migrConnFlag?this.getTableData(["Year","UndiagnosedFrac"]):this.getTableData(["Year","N_Und_Alive_p"])}get outputPlot4Data(){return this.migrConnFlag?[this.getPlotSeries("UndiagnosedFrac")]:[this.getPlotSeries("N_Und_Alive_p")]}get mainOutputTableData(){return this.getTableData(["Year","N_HIV_D","N_HIV_Obs_M","N_CD4_1_D","N_CD4_2_D","N_CD4_3_D","N_CD4_4_D","N_CD4_1_Obs_M","N_CD4_2_Obs_M","N_CD4_3_Obs_M","N_CD4_4_Obs_M","N_AIDS_D","N_AIDS_M","N_HIVAIDS_D","N_HIVAIDS_Obs_M","N_Inf_M","t_diag","t_diag_p25","t_diag_p50","t_diag_p75","N_Alive","N_Alive_Diag_M","N_Und","N_Und_Alive_p","N_Und_CD4_3_M","N_Und_CD4_4_M"])}getTableData=e=>{if(D(this.plotData))return null;{const t=this.plotData.Year.map(((t,a)=>e.map((e=>this.getTableEntry(e,a)))));return{colNames:e,values:t}}};getTableEntry=(e,t)=>{if("Year"===e)return this.plotData.Year[t];const a=this.plotData[e]?this.plotData[e][t]:null;if(D(a)||!isFinite(a))return"";if(!this.showConfBounds||!this.plotData[e+"_LB"]||!this.plotData[e+"_UB"])return ct(a);let r=this.plotData[e+"_LB"]?this.plotData[e+"_LB"][t]:null,n=this.plotData[e+"_UB"]?this.plotData[e+"_UB"][t]:null;return isFinite(r)&&!D(r)||(r=a),isFinite(n)&&!D(n)||(n=a),`${ct(a)} (${ct(r)} - ${ct(n)})`};getPlotSeries=e=>{if(D(this.plotData))return null;{const t=this.plotData.Year.map(((t,a)=>[t,this.plotData[e]?this.plotData[e][a]:null,this.plotData[e+"_LB"]?this.plotData[e+"_LB"][a]:null,this.plotData[e+"_UB"]?this.plotData[e+"_UB"][a]:null,!this.plotData[e+"_Used"]||this.plotData[e+"_Used"][a]]));return{name:this.colsDescriptions[e],values:t,selected:!0}}};setUIState=e=>{this.id=e.id,this.modelsParamFile=e.modelsParamFile,this.modelsParamFileName=e.modelsParamFileName,this.rangeYears=e.rangeYears,this.optimalYears=e.optimalYears,this.minYear=e.minYear,this.maxYear=e.maxYear,this.minFitPos=e.minFitPos,this.maxFitPos=e.maxFitPos,this.minFitCD4=e.minFitCD4,this.maxFitCD4=e.maxFitCD4,this.minFitAIDS=e.minFitAIDS,this.maxFitAIDS=e.maxFitAIDS,this.minFitHIVAIDS=e.minFitHIVAIDS,this.maxFitHIVAIDS=e.maxFitHIVAIDS,this.fullData=e.fullData,this.knotsCount=e.knotsCount,this.startIncZero=e.startIncZero,this.maxIncCorr=e.maxIncCorr,this.distributionFit=e.distributionFit,this.delta4Fac=e.delta4Fac,this.country=e.country,this.bootstrapCount=e.bootstrapCount,this.bootstrapType=e.bootstrapType,this.modelsRunProgress=e.modelsRunProgress,this.modelsRunLog=e.modelsRunLog,this.bootstrapRunProgress=e.bootstrapRunProgress,this.bootstrapRunLog=e.bootstrapRunLog,this.plotData=e.plotData;new ar(this)}}class mr{rootMgr=null;report=null;adjustReportParams={reportingDelay:!0,smoothing:!1,cd4ConfInt:!1};creatingReportInProgress=!1;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{report:Ba.sH,adjustReportParams:Ba.sH,creatingReportInProgress:Ba.sH,setReport:Ba.XI,setAdjustReportReportingDelay:Ba.XI,setAdjustReportSmoothing:Ba.XI,setAdjustReportCD4ConfInt:Ba.XI,restoreDefaults:Ba.XI,createReport:Ba.XI,cancelCreatingReport:Ba.XI,setCreatingReportInProgress:Ba.XI})}setReport=e=>this.report=e;setAdjustReportReportingDelay=e=>this.adjustReportParams.reportingDelay=e;setAdjustReportSmoothing=e=>this.adjustReportParams.smoothing=e;setAdjustReportCD4ConfInt=e=>this.adjustReportParams.cd4ConfInt=e;setCreatingReportInProgress=e=>this.creatingReportInProgress=e;createReport=()=>{this.rootMgr.btnClicked("createReportBtn",Object.assign({name:"Main Report"},this.adjustReportParams))};cancelCreatingReport=()=>this.rootMgr.btnClicked("cancelCreatingReportBtn");restoreDefaults=()=>{this.adjustReportParams={reportingDelay:!0,smoothing:!1,cd4ConfInt:!1}};setUIState=e=>{this.report=e.report,this.adjustReportParams=e.adjustReportParams,this.creatingReportInProgress=e.creatingReportInProgress}}class cr{rootMgr=null;runProgress=null;runLog=null;inputStats=null;outputStats=null;outputPlots=null;confBounds=null;dataCompatibleFlag=null;yodRegion="ALL";tableRegion="ALL";propTableStrat=[];showConfBounds=!0;constructor(e){this.rootMgr=e,(0,Ba.Gn)(this,{runProgress:Ba.sH,runLog:Ba.sH,inputStats:Ba.sH,outputStats:Ba.sH,outputPlots:Ba.sH,confBounds:Ba.sH,yodRegion:Ba.sH,tableRegion:Ba.sH,propTableStrat:Ba.sH,dataCompatibleFlag:Ba.sH,showConfBounds:Ba.sH,runInProgress:Ba.EW,missingness:Ba.EW,regionDistr:Ba.EW,yodDistr:Ba.EW,tableDistr:Ba.EW,arrivalPlotData:Ba.EW,diagnosisPlotData:Ba.EW,setRunProgress:Ba.XI,setRunLog:Ba.XI,setInputStats:Ba.XI,setOutputStats:Ba.XI,setOutputPlots:Ba.XI,setConfBounds:Ba.XI,setYodRegion:Ba.XI,setTableRegion:Ba.XI,setDataCompatibleFlag:Ba.XI,setPropTableStrat:Ba.XI,setShowConfBounds:Ba.XI,run:Ba.XI,cancel:Ba.XI}),(0,Ba.fm)((()=>this.rootMgr.inputValueSet("propTableStrat",(0,Ba.HO)(this.propTableStrat))),{delay:1e3}),(0,Ba.fm)((()=>this.rootMgr.inputValueSet("migrRegion",(0,Ba.HO)(this.tableRegion))),{delay:1e3})}get runInProgress(){return null!==this.runProgress}get missingness(){let e=null;return D(this.inputStats)||D(this.inputStats.Missingness)||(e=this.inputStats.Missingness),e}get regionDistr(){let e=null;return D(this.inputStats)||D(this.inputStats.RegionDistr)||(e=this.inputStats.RegionDistr),e}get yodDistr(){let e=null;return""===this.yodRegion||D(this.inputStats)||D(this.inputStats.YODDistr)||(e=this.inputStats.YODDistr[this.yodRegion]),e}get tableDistr(){let e=null;return""===this.tableRegion||D(this.outputStats)||D(this.outputStats.TableDistr)||D(this.outputStats.TableDistr[this.tableRegion])||(e=this.outputStats.TableDistr[this.tableRegion]),e}get arrivalPlotData(){let e=null;return D(this.outputPlots)||D(this.outputPlots.ArrivalPlotData)||(e=this.outputPlots.ArrivalPlotData.map((e=>({name:e.GroupedRegionOfOrigin,values:e.PlotData.YearOfArrival.map(((t,a)=>[t,e.PlotData.PostProp[a],e.PlotData.PostPropLB[a],e.PlotData.PostPropUB[a],!0,e.PlotData.Count[a]])),selected:"ALL"===e.GroupedRegionOfOrigin})))),e}get diagnosisPlotData(){let e=null;return D(this.outputPlots)||D(this.outputPlots.DiagnosisPlotData)||(e=this.outputPlots.DiagnosisPlotData.map((e=>({name:e.GroupedRegionOfOrigin,values:e.PlotData.YearOfHIVDiagnosis.map(((t,a)=>[t,e.PlotData.PostProp[a],e.PlotData.PostPropLB[a],e.PlotData.PostPropUB[a],!0,e.PlotData.Count[a]])),selected:"ALL"===e.GroupedRegionOfOrigin})))),e}setRunProgress=e=>this.runProgress=e;setRunLog=e=>this.runLog=e;setInputStats=e=>this.inputStats=e;setOutputStats=e=>this.outputStats=e;setOutputPlots=e=>this.outputPlots=e;setConfBounds=e=>this.confBounds=e;setYodRegion=e=>this.yodRegion=e;setTableRegion=e=>this.tableRegion=e;setDataCompatibleFlag=e=>this.dataCompatibleFlag=e;setPropTableStrat=e=>this.propTableStrat=e;setShowConfBounds=e=>this.showConfBounds=e;run=()=>this.rootMgr.btnClicked("runMigrantBtn");cancel=()=>this.rootMgr.btnClicked("cancelMigrantBtn");setUIState=e=>{this.runProgress=e.runProgress,this.runLog=e.runLog,this.inputStats=e.inputStats,this.outputStats=e.outputStats,this.outputPlots=e.outputPlots,this.confBounds=e.confBounds,this.dataCompatibleFlag=e.dataCompatibleFlag,this.yodRegion=e.yodRegion,this.tableRegion=e.tableRegion,this.propTableStrat=e.propTableStrat,this.showConfBounds=e.showConfBounds}}const dr=(e,t)=>sr().saveAs(function(e,t){t=t||"";for(var a=1024,r=atob(e),n=r.length,l=Math.ceil(n/a),i=new Array(l),s=0;s<l;++s){for(var o=s*a,m=Math.min(o+a,n),c=new Array(m-o),d=o,u=0;d<m;++u,++d)c[u]=r[d].charCodeAt(0);i[s]=new Uint8Array(c)}return new Blob(i,{type:t})}(e),t);(0,Ba.jK)({enforceActions:"observed",computedRequiresReaction:!0});class ur{id="AppManager";packageDetails={};uiStateMgr=null;notificationsMgr=null;attrMappingMgr=null;origGroupMgr=null;caseBasedDataMgr=null;aggrDataMgr=null;summaryDataMgr=null;adjustMgr=null;popMgr=null;popCombMgr=null;modelMgr=null;reportMgr=null;migrMgr=null;loadingUIState=!1;shinyState="DISCONNECTED";shinyMessage={};loadStateProgress=null;seed=null;onShinyEvent=e=>{if(console.log("onShinyEvent",e.type,e),this.loadingUIState&&"UI_STATE_LOADED"!==e.type)console.log("Loading UI state - ignoring events");else switch(e.type){case"PACKAGE_DETAILS_SENT":"SUCCESS"===e.payload.ActionStatus&&this.setPackageDetails(e.payload.PackageDetails);break;case"UI_STATE_READY_FOR_LOAD":"SUCCESS"===e.payload.ActionStatus&&(this.loadingUIState=!0,this.setUIState(JSON.parse(e.payload.UIState))),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"UI_STATE_LOADED":"SUCCESS"===e.payload.ActionStatus&&(this.loadingUIState=!1,this.inputValueSet("test",!0)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"COMPLETED_STEPS_SET":"SUCCESS"===e.payload.ActionStatus&&this.uiStateMgr.setCompletedSteps(e.payload.CompletedSteps);break;case"CASE_BASED_DATA_UPLOADED":this.caseBasedDataMgr.setActionStatus(e.payload.ActionStatus),this.caseBasedDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.caseBasedDataMgr.setFileName(e.payload.FileName),this.caseBasedDataMgr.setFilePath(e.payload.FilePath),this.caseBasedDataMgr.setFileSize(e.payload.FileSize),this.caseBasedDataMgr.setFileType(e.payload.FileType),this.uiStateMgr.setLastEventType(e.type));break;case"CASE_BASED_DATA_READ":this.caseBasedDataMgr.setActionStatus(e.payload.ActionStatus),this.caseBasedDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.caseBasedDataMgr.setColumnNames(e.payload.ColumnNames),this.caseBasedDataMgr.setRecordCount(e.payload.RecordCount),this.attrMappingMgr.setMapping(e.payload.AttrMapping),this.summaryDataMgr.reset(),this.notificationsMgr.setMsg("Case-based data uploaded"),this.uiStateMgr.setLastEventType(e.type));break;case"CASE_BASED_ATTRIBUTE_MAPPING_APPLY_START":"SUCCESS"===e.payload.ActionStatus&&this.notificationsMgr.setMsg("Applying attribute mapping");break;case"CASE_BASED_ATTRIBUTE_MAPPING_APPLY_END":this.attrMappingMgr.setActionStatus(e.payload.ActionStatus),this.attrMappingMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus?(this.origGroupMgr.setDistribution(e.payload.OriginDistribution),this.origGroupMgr.setPreset(e.payload.OriginGroupingPreset),this.origGroupMgr.setGroupings(e.payload.OriginGrouping),this.notificationsMgr.setMsg("Attribute mapping has been applied"),this.summaryDataMgr.reset(),this.uiStateMgr.setLastEventType(e.type)):(this.notificationsMgr.setMsg("Attribute mapping could not be applied"),this.uiStateMgr.setLastEventType("CASE_BASED_DATA_READ"));break;case"CASE_BASED_DATA_ORIGIN_GROUPING_PREPARED":"SUCCESS"===e.payload.ActionStatus?(this.origGroupMgr.setPreset(e.payload.OriginGroupingPreset),this.origGroupMgr.setGroupings(e.payload.OriginGrouping)):this.notificationsMgr.setMsg("There was a problem with setting this origin grouping");break;case"CASE_BASED_DATA_ORIGIN_GROUPING_MIGRANT_CHECKED":this.origGroupMgr.setMigrantCompatibleStatus(e.payload.ActionStatus),this.origGroupMgr.setMigrantCompatibleMessage(e.payload.ActionMessage);break;case"CASE_BASED_DATA_ORIGIN_GROUPING_APPLIED":this.origGroupMgr.setActionStatus(e.payload.ActionStatus),this.origGroupMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus?(this.summaryDataMgr.reset(),this.summaryDataMgr.setDiagYearPlotData(e.payload.Summary.DiagYearPlotData),this.summaryDataMgr.setNotifQuarterPlotData(e.payload.Summary.NotifQuarterPlotData),this.adjustMgr.setRDWithoutStartYear(e.payload.Summary.DiagYearPlotData.filter.scaleMinYear),this.adjustMgr.setRDWithoutEndYear(Math.round(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setRDWithoutEndQrt(tt(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setRDWithStartYear(e.payload.Summary.DiagYearPlotData.filter.scaleMinYear),this.adjustMgr.setRDWithEndYear(Math.round(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setRDWithEndQrt(tt(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setDataBounds({startYear:e.payload.Summary.DiagYearPlotData.filter.scaleMinYear,endYear:Math.round(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear),endQrt:tt(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)}),this.migrMgr.setDataCompatibleFlag(e.payload.MigrantCompatibility.Valid),this.uiStateMgr.setLastEventType(e.type)):this.uiStateMgr.setLastEventType("CASE_BASED_ATTRIBUTE_MAPPING_APPLY_END"),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"CASE_BASED_SUMMARY_DATA_PREPARED":"SUCCESS"===e.payload.ActionStatus?(this.summaryDataMgr.setSelectedCount(e.payload.Summary.SelectedCount),this.summaryDataMgr.setTotalCount(e.payload.Summary.TotalCount),this.summaryDataMgr.setMissPlotData(e.payload.Summary.MissPlotData),this.summaryDataMgr.setRepDelPlotData(e.payload.Summary.RepDelPlotData)):this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"ADJUSTMENTS_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.adjustMgr.setAdjustmentsRunProgress(1),this.adjustMgr.setAdjustmentsReport(null));break;case"ADJUSTMENTS_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.adjustMgr.setAdjustmentsRunLog(e.payload.RunLog);break;case"ADJUSTMENTS_RUN_FINISHED":this.adjustMgr.setAdjustmentsRunProgress(null),"SUCCESS"===e.payload.ActionStatus?(this.uiStateMgr.setLastEventType(e.type),this.adjustMgr.setAdjustmentsReport(e.payload.AdjustmentsReport),this.adjustMgr.setRunAdjustmentsTypes(e.payload.RunAdjustmentsTypes),this.notificationsMgr.setMsg("Adjustment run finished")):this.notificationsMgr.setMsg("Adjustment run failed");break;case"ADJUSTMENTS_RUN_CANCELLED":this.adjustMgr.setAdjustmentsRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&this.notificationsMgr.setMsg("Adjustment run cancelled");break;case"MIGRATION_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.migrMgr.setRunProgress(1),this.migrMgr.setInputStats(null),this.migrMgr.setOutputStats(null),this.migrMgr.setOutputPlots(null));break;case"MIGRATION_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.migrMgr.setRunLog(e.payload.RunLog);break;case"MIGRATION_RUN_FINISHED":this.migrMgr.setRunProgress(null),"SUCCESS"===e.payload.ActionStatus?(this.uiStateMgr.setLastEventType(e.type),this.migrMgr.setInputStats(e.payload.InputStats),this.migrMgr.setOutputStats(e.payload.OutputStats),this.migrMgr.setOutputPlots(e.payload.OutputPlots),this.migrMgr.setConfBounds(e.payload.ConfBounds),this.notificationsMgr.setMsg("Migration run finished")):this.notificationsMgr.setMsg("Migration run failed");break;case"MIGRATION_RUN_CANCELLED":this.migrMgr.setRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&this.notificationsMgr.setMsg("Migration run cancelled");break;case"MIGRATION_CONF_BOUNDS_COMPUTED":"SUCCESS"===e.payload.ActionStatus&&this.migrMgr.setConfBounds(e.payload.ConfBounds);break;case"CREATING_REPORT_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.reportMgr.setCreatingReportInProgress(!0),this.reportMgr.setReport(null),this.notificationsMgr.setMsg("Creating report started"));break;case"CREATING_REPORT_FINISHED":"SUCCESS"===e.payload.ActionStatus?(this.uiStateMgr.setLastEventType(e.type),this.reportMgr.setReport(e.payload.Report),this.notificationsMgr.setMsg("Creating report finished")):this.notificationsMgr.setMsg("Creating report failed"),this.reportMgr.setCreatingReportInProgress(!1);break;case"AGGR_DATA_UPLOADED":this.aggrDataMgr.setActionStatus(e.payload.ActionStatus),this.aggrDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.aggrDataMgr.setFileName(e.payload.FileName),this.aggrDataMgr.setFilePath(e.payload.FilePath),this.aggrDataMgr.setFileSize(e.payload.FileSize),this.aggrDataMgr.setFileType(e.payload.FileType));break;case"AGGR_DATA_READ":this.aggrDataMgr.setActionStatus(e.payload.ActionStatus),this.aggrDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.aggrDataMgr.setDataFiles(e.payload.DataFiles),this.aggrDataMgr.setPopulationNames(e.payload.PopulationNames),this.aggrDataMgr.setRangeYears(e.payload.RangeYears),this.notificationsMgr.setMsg("Aggregated data uploaded"));break;case"AVAILABLE_STRATA_SET":"SUCCESS"===e.payload.ActionStatus&&(this.popMgr.setAvailableVariables(e.payload.AvailableVariables),this.popMgr.setAvailableStrata(e.payload.AvailableStrata));break;case"MODELS_PARAMS_LOADED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setMinYear(e.payload.Params.minYear),this.modelMgr.setMaxYear(e.payload.Params.maxYear),this.modelMgr.setMinFitPos(e.payload.Params.minFitPos),this.modelMgr.setMaxFitPos(e.payload.Params.maxFitPos),this.modelMgr.setMinFitCD4(e.payload.Params.minFitCD4),this.modelMgr.setMaxFitCD4(e.payload.Params.maxFitCD4),this.modelMgr.setMinFitAIDS(e.payload.Params.minFitAIDS),this.modelMgr.setMaxFitAIDS(e.payload.Params.maxFitAIDS),this.modelMgr.setMinFitHIVAIDS(e.payload.Params.minFitHIVAIDS),this.modelMgr.setMaxFitHIVAIDS(e.payload.Params.maxFitHIVAIDS),this.modelMgr.setFullData(e.payload.Params.fullData),this.modelMgr.setKnotsCount(e.payload.Params.knotsCount),this.modelMgr.setStartIncZero(e.payload.Params.startIncZero),this.modelMgr.setMaxIncCorr(e.payload.Params.maxIncCorr),this.modelMgr.setDistributionFit(e.payload.Params.distributionFit),this.modelMgr.setDelta4Fac(e.payload.Params.delta4Fac),this.modelMgr.setCountry(e.payload.Params.country),this.modelMgr.timeIntCollMgr.setIntervals(e.payload.Params.minYear,e.payload.Params.maxYear,e.payload.Params.timeIntervals));break;case"MODELS_YEAR_RANGES_DETERMINED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setRangeYears(e.payload.Years.Range),this.modelMgr.setOptimalYears(e.payload.Years.Optimal)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"MODELS_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setModelsRunProgress(1),this.modelMgr.setModelsRunLog(null)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"MODELS_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.modelMgr.setModelsRunLog(e.payload.RunLog);break;case"MODELS_RUN_FINISHED":this.modelMgr.setModelsRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setPlotData(e.payload.PlotData),this.uiStateMgr.setLastEventType(e.type)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"MODELS_RUN_CANCELLED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setModelsRunProgress(null),this.notificationsMgr.setMsg(e.payload.ActionMessage));break;case"BOOTSTRAP_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setBootstrapRunProgress(1),this.modelMgr.setBootstrapRunLog(null));break;case"BOOTSTRAP_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.modelMgr.setBootstrapRunLog(e.payload.RunLog);break;case"BOOTSTRAP_RUN_FINISHED":this.modelMgr.setBootstrapRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setPlotData(e.payload.PlotData),this.uiStateMgr.setLastEventType(e.type)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"BOOTSTRAP_RUN_CANCELLED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setBootstrapRunProgress(null),this.notificationsMgr.setMsg(e.payload.ActionMessage));break;case"SEED_SET":"SUCCESS"===e.payload.ActionStatus&&(this.setSeed(e.payload.Seed),this.notificationsMgr.setMsg(e.payload.ActionMessage));break;case"SAVE_STATE":"SUCCESS"===e.payload.ActionStatus&&(dr(e.payload.Data,e.payload.FileName),this.notificationsMgr.setMsg(e.payload.ActionMessage))}};constructor(){this.uiStateMgr=new Ua(this),this.notificationsMgr=new Wa(this),this.caseBasedDataMgr=new Qa(this),this.aggrDataMgr=new Ja(this),this.attrMappingMgr=new Xa(this),this.origGroupMgr=new Va(this),this.summaryDataMgr=new Ka(this),this.adjustMgr=new qa(this),this.popMgr=new Za(this),this.popCombMgr=new er(this),this.modelMgr=new or(this),this.reportMgr=new mr(this),this.migrMgr=new cr(this),(0,Ba.Gn)(this,{packageDetails:Ba.sH,loadingUIState:Ba.sH,shinyState:Ba.sH,shinyMessage:Ba.sH,loadStateProgress:Ba.sH,seed:Ba.sH,seedText:Ba.EW,shinyReady:Ba.EW,jsonShinyMessage:Ba.EW,setPackageDetails:Ba.XI,setShinyState:Ba.XI,btnClicked:Ba.XI,inputValueSet:Ba.XI,setShinyMessage:Ba.XI,unbindShiny:Ba.XI,bindShiny:Ba.XI,saveState:Ba.XI,loadState:Ba.XI,setUIState:Ba.XI,setLoadStateProgress:Ba.XI,setSeed:Ba.XI});const e=this;$((()=>{console.log("Application manager created. Binding shiny server events handlers."),$(document).on("shiny:disconnected",(()=>e.setShinyState("DISCONNECTED"))),$(document).on("shiny:connected",(()=>e.setShinyState("CONNECTED"))),$(document).on("shiny:sessioninitialized",(()=>e.setShinyState("SESSION_INITIALIZED"))),$(document).on("shiny:message",(t=>e.setShinyMessage(t))),$(document).on("shiny:inputchanged",(e=>console.log("shiny:inputchanged:",e))),$(document).on("shiny:filedownload",(e=>console.log("shiny:filedownload:",e)))}))}get shinyReady(){return"SESSION_INITIALIZED"===this.shinyState||"DEBUGGING"===this.shinyState}get jsonShinyMessage(){return JSON.stringify(this.shinyMessage)}get seedText(){return D(this.seed)?"":this.seed}get shinyStateHuman(){let e="";switch(this.shinyState){case"DISCONNECTED":e="DISCONNECTED";break;case"CONNECTED":e="INITIALIZING";break;case"DEBUGGING":case"SESSION_INITIALIZED":e="READY"}return e}setPackageDetails=e=>this.packageDetails=e;setShinyState=e=>{this.shinyState=e,"SESSION_INITIALIZED"===e&&Shiny.addCustomMessageHandler("shinyHandler",this.onShinyEvent)};btnClicked=(e,t="")=>{D(window.Shiny)||!this.shinyReady||this.loadingUIState?console.log("btnClicked: Shiny is not available",e,(0,Ba.HO)(t)):Shiny.setInputValue(e,t,{priority:"event"})};inputValueSet=(e,t,a=!1)=>{D(window.Shiny)||!this.shinyReady||this.loadingUIState&&!a?console.log("inputValueSet: Shiny is not available",e,(0,Ba.HO)(t)):Shiny.setInputValue(e,t)};setShinyMessage=e=>this.shinyMessage=e;setSeed=e=>{this.seed=""===e?null:e};unbindShiny=e=>{!D(window.Shiny)&&this.shinyReady?(window.Shiny.unbindAll(),Ie(e).forEach((e=>delete window.Shiny.shinyapp.$bindings[e]))):console.log("unbindShinyInputs: Shiny is not available")};bindShiny=()=>{!D(window.Shiny)&&this.shinyReady?window.Shiny.bindAll():console.log("bindShinyInputs: Shiny is not available")};saveState=()=>{const e=(0,Ha.lK)(this),t=JSON.stringify(e,{},2);this.btnClicked("saveStateBtn",t)};loadState=e=>{$(e).data("currentUploader",new $a(Shiny.shinyapp,e,this.setLoadStateProgress))};setUIState=e=>{this.loadingUIState=!0,this.shinyState=e.shinyState,this.uiStateMgr.setUIState(e.uiStateMgr),this.notificationsMgr.setUIState(e.notificationsMgr),this.attrMappingMgr.setUIState(e.attrMappingMgr),this.origGroupMgr.setUIState(e.origGroupMgr),this.caseBasedDataMgr.setUIState(e.caseBasedDataMgr),this.aggrDataMgr.setUIState(e.aggrDataMgr),this.summaryDataMgr.setUIState(e.summaryDataMgr),this.adjustMgr.setUIState(e.adjustMgr),this.popMgr.setUIState(e.popMgr),this.popCombMgr.setUIState(e.popCombMgr),this.modelMgr.setUIState(e.modelMgr),this.reportMgr.setUIState(e.reportMgr),this.migrMgr.setUIState(e.migrMgr),this.inputValueSet("loadingUIStateDone",!0,!0)};setLoadStateProgress=e=>this.loadStateProgress=e}class gr{}class pr{}(0,Ha.PL)(pr,{parentMgr:(0,Ha.ir)(gr),id:(0,Ha.MY)(),name:(0,Ha.MY)(),intervals:(0,Ha.p_)((0,Ha.lS)()),minYear:(0,Ha.MY)(),maxYear:(0,Ha.MY)()}),(0,Ha.PL)(gr,{id:(0,Ha.Cv)(),parentMgr:(0,Ha.ir)(or),collections:(0,Ha.Tj)((0,Ha.Ik)(pr)),minYear:(0,Ha.MY)(),maxYear:(0,Ha.MY)(),selectedEditCollectionId:(0,Ha.MY)(),selectedRunCollectionId:(0,Ha.MY)()}),(0,Ha.PL)(or,{id:(0,Ha.Cv)(),timeIntCollMgr:(0,Ha.Ik)(gr),modelsParamFile:(0,Ha.MY)(),modelsParamFileName:(0,Ha.MY)(),rangeYears:(0,Ha.lS)(),optimalYears:(0,Ha.lS)(),minYear:(0,Ha.MY)(),maxYear:(0,Ha.MY)(),minFitPos:(0,Ha.MY)(),maxFitPos:(0,Ha.MY)(),minFitCD4:(0,Ha.MY)(),maxFitCD4:(0,Ha.MY)(),minFitAIDS:(0,Ha.MY)(),maxFitAIDS:(0,Ha.MY)(),minFitHIVAIDS:(0,Ha.MY)(),maxFitHIVAIDS:(0,Ha.MY)(),fullData:(0,Ha.MY)(),knotsCount:(0,Ha.MY)(),startIncZero:(0,Ha.MY)(),maxIncCorr:(0,Ha.MY)(),distributionFit:(0,Ha.MY)(),delta4Fac:(0,Ha.MY)(),country:(0,Ha.MY)(),bootstrapCount:(0,Ha.MY)(),bootstrapType:(0,Ha.MY)(),modelsRunProgress:(0,Ha.MY)(),modelsRunLog:(0,Ha.MY)(),bootstrapRunProgress:(0,Ha.MY)(),bootstrapRunLog:(0,Ha.MY)(),migrConnFlag:(0,Ha.MY)(),showConfBounds:(0,Ha.MY)(),plotData:(0,Ha.lS)()}),(0,Ha.PL)(mr,{rootMgr:(0,Ha.ir)(ur),report:(0,Ha.MY)(),adjustReportParams:(0,Ha.lS)(),creatingReportInProgress:(0,Ha.MY)()});class hr{}(0,Ha.PL)(hr,{id:(0,Ha.Cv)(),name:(0,Ha.MY)(),aggrPopulations:(0,Ha.p_)((0,Ha.MY)()),casePopulations:(0,Ha.p_)((0,Ha.MY)())}),(0,Ha.PL)(er,{rootMgr:(0,Ha.ir)(ur),combinations:(0,Ha.Tj)((0,Ha.Ik)(hr)),selectedCombination:(0,Ha.ir)(hr),combinationAllId:(0,Ha.MY)()}),(0,Ha.PL)(Za,{rootMgr:(0,Ha.ir)(ur),availableVariables:(0,Ha.p_)((0,Ha.lS)()),availableStrata:(0,Ha.lS)(),populations:(0,Ha.p_)((0,Ha.lS)())}),(0,Ha.PL)(qa,{rootMgr:(0,Ha.ir)(ur),miAdjustType:(0,Ha.MY)(),miJomoSettings:(0,Ha.lS)(),miMiceSettings:(0,Ha.lS)(),rdAdjustType:(0,Ha.MY)(),dataBounds:(0,Ha.lS)(),rdWithoutTrendSettings:(0,Ha.lS)(),rdWithTrendSettings:(0,Ha.lS)(),adjustmentsRunProgress:(0,Ha.MY)(),adjustmentsRunLog:(0,Ha.MY)(),adjustmentsReport:(0,Ha.MY)(),runAdjustmentsTypes:(0,Ha.p_)((0,Ha.MY)())}),(0,Ha.PL)(Ka,{rootMgr:(0,Ha.ir)(ur),selectedCount:(0,Ha.MY)(),totalCount:(0,Ha.MY)(),diagYearPlotData:(0,Ha.lS)(),notifQuarterPlotData:(0,Ha.lS)(),missPlotData:(0,Ha.lS)(),missPlotSelection:(0,Ha.MY)(),repDelPlotData:(0,Ha.lS)(),repDelPlotSelection:(0,Ha.MY)()}),(0,Ha.PL)(Ja,{rootMgr:(0,Ha.ir)(ur),fileName:(0,Ha.MY)(),fileSize:(0,Ha.MY)(),fileType:(0,Ha.MY)(),filePath:(0,Ha.MY)(),dataFiles:(0,Ha.lS)(),origDataFiles:(0,Ha.lS)(),rangeYears:(0,Ha.lS)(),dataFileNameToIdxMap:(0,Ha.Tj)(),populationNames:(0,Ha.p_)((0,Ha.MY)()),fileUploadProgress:(0,Ha.MY)(),actionStatus:(0,Ha.MY)(),actionMessage:(0,Ha.MY)()}),(0,Ha.PL)(Qa,{rootMgr:(0,Ha.ir)(ur),fileName:(0,Ha.MY)(),fileSize:(0,Ha.MY)(),fileType:(0,Ha.MY)(),filePath:(0,Ha.MY)(),columnNames:(0,Ha.p_)((0,Ha.MY)()),recordCount:(0,Ha.MY)(),uploadProgress:(0,Ha.MY)(),actionStatus:(0,Ha.MY)(),actionMessage:(0,Ha.MY)()}),(0,Ha.PL)(Va,{rootMgr:(0,Ha.ir)(ur),distribution:(0,Ha.lS)(),groupings:(0,Ha.p_)((0,Ha.lS)()),preset:(0,Ha.MY)(),actionStatus:(0,Ha.MY)(),actionMessage:(0,Ha.MY)(),migrantCompatibleStatus:(0,Ha.MY)(),migrantCompatibleMessage:(0,Ha.MY)()}),(0,Ha.PL)(Xa,{rootMgr:(0,Ha.ir)(ur),mapping:(0,Ha.p_)((0,Ha.lS)()),actionStatus:(0,Ha.MY)(),actionMessage:(0,Ha.MY)()}),(0,Ha.PL)(Wa,{rootMgr:(0,Ha.ir)(ur),msgInfo:(0,Ha.lS)()}),(0,Ha.PL)(Ua,{rootMgr:(0,Ha.ir)(ur),lastEventType:(0,Ha.MY)(),completedSteps:(0,Ha.p_)((0,Ha.MY)()),pages:(0,Ha.p_)((0,Ha.lS)()),activePageId:(0,Ha.MY)()}),(0,Ha.PL)(cr,{runLog:(0,Ha.MY)(),runProgress:(0,Ha.MY)(),inputStats:(0,Ha.lS)(),outputStats:(0,Ha.lS)(),outputPlots:(0,Ha.lS)(),confBounds:(0,Ha.lS)(),yodRegion:(0,Ha.MY)(),tableRegion:(0,Ha.MY)(),propTableStrat:(0,Ha.lS)(),dataCompatibleFlag:(0,Ha.lS)(),showConfBounds:(0,Ha.lS)()}),(0,Ha.PL)(ur,{id:(0,Ha.Cv)(),shinyState:(0,Ha.MY)(),uiStateMgr:(0,Ha.Ik)(Ua),notificationsMgr:(0,Ha.Ik)(Wa),attrMappingMgr:(0,Ha.Ik)(Xa),origGroupMgr:(0,Ha.Ik)(Va),caseBasedDataMgr:(0,Ha.Ik)(Qa),aggrDataMgr:(0,Ha.Ik)(Ja),summaryDataMgr:(0,Ha.Ik)(Ka),adjustMgr:(0,Ha.Ik)(qa),popMgr:(0,Ha.Ik)(Za),popCombMgr:(0,Ha.Ik)(er),modelMgr:(0,Ha.Ik)(or),reportMgr:(0,Ha.Ik)(mr),migrMgr:(0,Ha.Ik)(cr)}),window.jQuery=s(),window.$=s();const Ar=new ur,Er=document.getElementById("app");n.createRoot(Er).render(r.createElement(l.Kq,{appMgr:Ar},r.createElement(r.StrictMode,null,r.createElement(ja,null))))}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e].call(a.exports,a,a.exports,l),a.exports}l.m=r,e=[],l.O=(t,a,r,n)=>{if(!a){var i=1/0;for(c=0;c<e.length;c++){for(var[a,r,n]=e[c],s=!0,o=0;o<a.length;o++)(!1&n||i>=n)&&Object.keys(l.O).every((e=>l.O[e](a[o])))?a.splice(o--,1):(s=!1,n<i&&(i=n));if(s){e.splice(c--,1);var m=r();void 0!==m&&(t=m)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var i={};t=t||[null,a({}),a([]),a(a)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,l.d(n,i),n},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[i,s,o]=a,m=0;if(i.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(o)var c=o(l)}for(t&&t(a);m<i.length;m++)n=i[m],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(c)},a=self.webpackChunkhiv_platform=self.webpackChunkhiv_platform||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var i=l.O(void 0,[96],(()=>l(7898)));i=l.O(i)})();